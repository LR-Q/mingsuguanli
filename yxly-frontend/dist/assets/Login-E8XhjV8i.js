/* empty css                  *//* empty css                     *//* empty css                *//* empty css                    *//* empty css                 */import{aB as b,r as w,l as E,z as x,B as a,R as o,J as s,O as i,a4 as h,A as C}from"./vendor-DSBWSuTS.js";import{_ as M,u as R,l as B}from"./index-rlk3mQiZ.js";import{d as T,e as U,f as A,h as F,j as I,k as L,E as c}from"./elementPlus-fsp5CJhs.js";const N={class:"login-container"},z={class:"login-box"},S={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%"}},$={class:"register-link"},j={__name:"Login",setup(q){const k=b(),p=R(),m=w(),f=w(!1),r=E({account:"",password:"",rememberMe:!1}),y={account:[{required:!0,message:"请输入用户名/邮箱/手机号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},g=async()=>{if(m.value)try{await m.value.validate(),f.value=!0;const l=await B({account:r.account,password:r.password});if(l.data){const{accessToken:e,refreshToken:u,userInfo:t}=l.data,d=t==null?void 0:t.roleCode;if(d==="SUPER_ADMIN"||d==="HOMESTAY_ADMIN"){c.warning("管理员请访问管理后台登录：http://localhost:3001");return}p.setToken(e),p.setRefreshToken(u),p.setUserInfo(t),c.success("登录成功"),k.push("/home")}}catch(l){console.error("登录失败:",l),c.error(l.message||"登录失败")}finally{f.value=!1}};return(l,e)=>{const u=U,t=T,d=A,_=F,v=I,V=L;return C(),x("div",N,[a("div",z,[e[10]||(e[10]=a("div",{class:"login-header"},[a("h2",null,"悦鑫乐怡民宿管理系统"),a("p",null,"欢迎登录")],-1)),o(V,{ref_key:"loginFormRef",ref:m,model:r,rules:y,class:"login-form",onKeyup:h(g,["enter"])},{default:s(()=>[o(t,{prop:"account"},{default:s(()=>[o(u,{modelValue:r.account,"onUpdate:modelValue":e[0]||(e[0]=n=>r.account=n),placeholder:"请输入用户名/邮箱/手机号",size:"large","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),o(t,{prop:"password"},{default:s(()=>[o(u,{modelValue:r.password,"onUpdate:modelValue":e[1]||(e[1]=n=>r.password=n),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),o(t,null,{default:s(()=>[a("div",S,[o(d,{modelValue:r.rememberMe,"onUpdate:modelValue":e[2]||(e[2]=n=>r.rememberMe=n)},{default:s(()=>[...e[5]||(e[5]=[i(" 记住我 ",-1)])]),_:1},8,["modelValue"]),o(_,{type:"primary",onClick:e[3]||(e[3]=n=>l.$router.push("/forgot-password"))},{default:s(()=>[...e[6]||(e[6]=[i(" 忘记密码？ ",-1)])]),_:1})])]),_:1}),o(t,null,{default:s(()=>[o(v,{type:"primary",size:"large",style:{width:"100%"},loading:f.value,onClick:g},{default:s(()=>[...e[7]||(e[7]=[i(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1}),o(t,null,{default:s(()=>[a("div",$,[e[9]||(e[9]=i(" 还没有账号？ ",-1)),o(_,{type:"primary",onClick:e[4]||(e[4]=n=>l.$router.push("/register"))},{default:s(()=>[...e[8]||(e[8]=[i(" 立即注册 ",-1)])]),_:1})])]),_:1})]),_:1},8,["model"])])])}}},Q=M(j,[["__scopeId","data-v-a5024626"]]);export{Q as default};
