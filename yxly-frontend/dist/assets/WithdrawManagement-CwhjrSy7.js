/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                   *//* empty css                       *//* empty css                             *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                *//* empty css                     */import{k as ee,d as te,e as ae,L as le,K as oe,j as ne,n as se,O as re,am as ue,a0 as de,a5 as ie,a6 as me,_ as pe,ak as ce,a7 as _e,ab as fe,ac as we,D as ve,a3 as he,S as be,E as C}from"./elementPlus-fsp5CJhs.js";import{d as ge,e as ye}from"./superAdmin-CPV5vgik.js";import{_ as ke}from"./index-rlk3mQiZ.js";import{r as b,l as E,j as Ve,z as N,B as c,R as e,J as t,O as n,u as A,K as Ce,A as g,I as z,P as i,L as Ee}from"./vendor-DSBWSuTS.js";const ze={class:"withdraw-management"},xe={class:"amount-text"},Re={class:"pagination-wrapper"},De={key:0,class:"audit-content"},Me={class:"amount-text"},Se={class:"audit-form"},Ie={__name:"WithdrawManagement",setup(Te){const y=b(!1),x=b([]),_=b(!1),r=b(null),k=b(!1),u=E({username:"",status:null,withdrawMethod:null}),s=E({current:1,size:10,total:0}),d=E({status:1,auditRemark:""}),f=async()=>{y.value=!0;try{const o={current:s.current,size:s.size,username:u.username||void 0,status:u.status!==null?u.status:void 0,withdrawMethod:u.withdrawMethod||void 0},{data:a}=await ge(o);x.value=a.records,s.total=a.total}catch(o){console.error("加载提现记录失败:",o),C.error("加载提现记录失败")}finally{y.value=!1}},B=()=>{s.current=1,f()},F=()=>{Object.assign(u,{username:"",status:null,withdrawMethod:null}),s.current=1,f()},L=o=>{s.size=o,s.current=1,f()},W=o=>{s.current=o,f()},j=o=>{r.value=o,d.status=1,d.auditRemark="",_.value=!0},O=o=>{r.value=o,_.value=!0},P=()=>{r.value=null,d.status=1,d.auditRemark=""},$=async()=>{if(r.value){k.value=!0;try{await ye({withdrawId:r.value.id,status:d.status,auditRemark:d.auditRemark}),C.success("审核成功"),_.value=!1,f()}catch(o){console.error("审核失败:",o),C.error("审核失败，请重试")}finally{k.value=!1}}},R=o=>parseFloat(o).toFixed(2),V=o=>o?new Date(o).toLocaleString("zh-CN"):"-",K=o=>{switch(o){case 0:return"warning";case 1:return"success";case 2:return"danger";default:return"info"}};return Ve(()=>{f()}),(o,a)=>{const D=ae,w=te,p=oe,M=le,S=se,v=ne,I=ee,T=de,m=me,q=pe,G=ie,J=_e,h=we,H=fe,U=he,Q=ve,X=be,Y=ce;return g(),N("div",ze,[a[17]||(a[17]=c("div",{class:"page-header"},[c("h2",null,"提现管理"),c("p",null,"管理所有商户的提现申请，审核提现请求")],-1)),e(T,{class:"search-card",shadow:"never"},{default:t(()=>[e(I,{model:u,inline:""},{default:t(()=>[e(w,{label:"用户名"},{default:t(()=>[e(D,{modelValue:u.username,"onUpdate:modelValue":a[0]||(a[0]=l=>u.username=l),placeholder:"请输入用户名",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(w,{label:"状态"},{default:t(()=>[e(M,{modelValue:u.status,"onUpdate:modelValue":a[1]||(a[1]=l=>u.status=l),placeholder:"选择状态",clearable:"",style:{width:"150px"}},{default:t(()=>[e(p,{label:"全部",value:null}),e(p,{label:"待审核",value:0}),e(p,{label:"审核通过",value:1}),e(p,{label:"审核拒绝",value:2})]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"提现方式"},{default:t(()=>[e(M,{modelValue:u.withdrawMethod,"onUpdate:modelValue":a[2]||(a[2]=l=>u.withdrawMethod=l),placeholder:"选择提现方式",clearable:"",style:{width:"150px"}},{default:t(()=>[e(p,{label:"全部",value:null}),e(p,{label:"支付宝",value:"支付宝"}),e(p,{label:"微信",value:"微信"}),e(p,{label:"银行卡",value:"银行卡"})]),_:1},8,["modelValue"])]),_:1}),e(w,null,{default:t(()=>[e(v,{type:"primary",onClick:B},{default:t(()=>[e(S,null,{default:t(()=>[e(A(re))]),_:1}),a[9]||(a[9]=n(" 搜索 ",-1))]),_:1}),e(v,{onClick:F},{default:t(()=>[e(S,null,{default:t(()=>[e(A(ue))]),_:1}),a[10]||(a[10]=n(" 重置 ",-1))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(T,{class:"table-card",shadow:"never"},{default:t(()=>[Ce((g(),z(G,{data:x.value,stripe:"",style:{width:"100%"}},{default:t(()=>[e(m,{prop:"id",label:"ID",width:"80"}),e(m,{prop:"username",label:"用户名",width:"120"}),e(m,{label:"提现金额",width:"120"},{default:t(({row:l})=>[c("span",xe,"¥"+i(R(l.amount)),1)]),_:1}),e(m,{prop:"withdrawMethod",label:"提现方式",width:"100"}),e(m,{label:"状态",width:"120"},{default:t(({row:l})=>[e(q,{type:K(l.status),size:"small"},{default:t(()=>[n(i(l.statusDesc),1)]),_:2},1032,["type"])]),_:1}),e(m,{label:"申请时间",width:"180"},{default:t(({row:l})=>[n(i(V(l.applyTime)),1)]),_:1}),e(m,{label:"审核时间",width:"180"},{default:t(({row:l})=>[n(i(l.auditTime?V(l.auditTime):"-"),1)]),_:1}),e(m,{prop:"auditorName",label:"审核人",width:"100"},{default:t(({row:l})=>[n(i(l.auditorName||"-"),1)]),_:1}),e(m,{label:"操作",width:"120",fixed:"right"},{default:t(({row:l})=>[l.status===0?(g(),z(v,{key:0,type:"primary",size:"small",onClick:Z=>j(l)},{default:t(()=>[...a[11]||(a[11]=[n(" 审核详情 ",-1)])]),_:1},8,["onClick"])):(g(),z(v,{key:1,type:"info",size:"small",onClick:Z=>O(l)},{default:t(()=>[...a[12]||(a[12]=[n(" 查看详情 ",-1)])]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["data"])),[[Y,y.value]]),c("div",Re,[e(J,{"current-page":s.current,"onUpdate:currentPage":a[3]||(a[3]=l=>s.current=l),"page-size":s.size,"onUpdate:pageSize":a[4]||(a[4]=l=>s.size=l),"page-sizes":[10,20,50,100],total:s.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:L,onCurrentChange:W},null,8,["current-page","page-size","total"])])]),_:1}),e(X,{modelValue:_.value,"onUpdate:modelValue":a[8]||(a[8]=l=>_.value=l),title:"提现审核",width:"600px",onClose:P},{footer:t(()=>[e(v,{onClick:a[7]||(a[7]=l=>_.value=!1)},{default:t(()=>[...a[15]||(a[15]=[n("取消",-1)])]),_:1}),e(v,{type:"primary",onClick:$,loading:k.value},{default:t(()=>[...a[16]||(a[16]=[n(" 提交审核 ",-1)])]),_:1},8,["loading"])]),default:t(()=>[r.value?(g(),N("div",De,[e(H,{column:2,border:""},{default:t(()=>[e(h,{label:"用户名"},{default:t(()=>[n(i(r.value.username),1)]),_:1}),e(h,{label:"提现金额"},{default:t(()=>[c("span",Me,"¥"+i(R(r.value.amount)),1)]),_:1}),e(h,{label:"提现方式"},{default:t(()=>[n(i(r.value.withdrawMethod),1)]),_:1}),e(h,{label:"账户信息"},{default:t(()=>[n(i(r.value.accountInfo),1)]),_:1}),e(h,{label:"申请时间"},{default:t(()=>[n(i(V(r.value.applyTime)),1)]),_:1}),e(h,{label:"用户备注"},{default:t(()=>[n(i(r.value.userRemark||"无"),1)]),_:1})]),_:1}),c("div",Se,[e(I,{model:d,"label-width":"100px"},{default:t(()=>[e(w,{label:"审核结果",required:""},{default:t(()=>[e(Q,{modelValue:d.status,"onUpdate:modelValue":a[5]||(a[5]=l=>d.status=l)},{default:t(()=>[e(U,{label:1},{default:t(()=>[...a[13]||(a[13]=[n("通过",-1)])]),_:1}),e(U,{label:2},{default:t(()=>[...a[14]||(a[14]=[n("拒绝",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(w,{label:"审核备注"},{default:t(()=>[e(D,{modelValue:d.auditRemark,"onUpdate:modelValue":a[6]||(a[6]=l=>d.auditRemark=l),type:"textarea",rows:3,placeholder:"请输入审核备注（可选）",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])])):Ee("",!0)]),_:1},8,["modelValue"])])}}},et=ke(Ie,[["__scopeId","data-v-edcaeec0"]]);export{et as default};
