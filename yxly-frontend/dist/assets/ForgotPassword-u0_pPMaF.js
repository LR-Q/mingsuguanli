/* empty css                  *//* empty css                     *//* empty css                *//* empty css                 */import{aB as E,r as u,l as V,z as h,B as i,R as s,J as l,O as f,a4 as x,A as y}from"./vendor-DSBWSuTS.js";import{_ as R,e as U}from"./index-rlk3mQiZ.js";import{d as F,e as $,j as z,h as B,k as C,E as w}from"./elementPlus-fsp5CJhs.js";const A={class:"forgot-password-container"},I={class:"forgot-password-form"},L={class:"form-section"},N={class:"form-section"},Z={class:"back-to-login"},K={__name:"ForgotPassword",setup(M){const g=E(),d=u(),m=u(!1),r=V({username:"",phone:"",email:"",newPassword:"",confirmPassword:""}),_={username:[{validator:(n,e,o)=>{e?/^[A-Za-z0-9_.-]{3,20}$/.test(e)?o():o(new Error("用户名为3-20位，支持字母、数字、._-")):o(new Error("请输入用户名"))},trigger:"blur"}],phone:[{validator:(n,e,o)=>{e?/^1[3-9]\d{9}$/.test(e)?o():o(new Error("请输入正确的手机号格式")):o(new Error("请输入手机号"))},trigger:"blur"}],email:[{validator:(n,e,o)=>{e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?o():o(new Error("请输入正确的邮箱格式")):o(new Error("请输入邮箱"))},trigger:"blur"}],newPassword:[{validator:(n,e,o)=>{const t=/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*?&]{6,}$/;e?e.length<6?o(new Error("密码长度不能少于6位")):t.test(e)?o():o(new Error("密码必须包含字母和数字")):o(new Error("请输入新密码"))},trigger:"blur"}],confirmPassword:[{validator:(n,e,o)=>{e?e!==r.newPassword?o(new Error("两次输入的密码不一致")):o():o(new Error("请再次输入密码"))},trigger:"blur"}]},p=async()=>{if(d.value)try{await d.value.validate(),m.value=!0;const n=await U({username:r.username,phone:r.phone,email:r.email,newPassword:r.newPassword,confirmPassword:r.confirmPassword});w.success("密码重置成功，前往登录"),g.push("/login")}catch(n){console.error("重置密码失败:",n),w.error(n.message||"重置密码失败")}finally{m.value=!1}};return(n,e)=>{const o=$,t=F,P=z,v=B,c=C;return y(),h("div",A,[i("div",I,[e[10]||(e[10]=i("div",{class:"form-header"},[i("h2",null,"重置密码"),i("p",{class:"subtitle"},"通过验证身份信息重置您的登录密码")],-1)),s(c,{ref_key:"forgotFormRef",ref:d,model:r,rules:_,size:"large",onKeyup:x(p,["enter"])},{default:l(()=>[i("div",L,[e[6]||(e[6]=i("h3",{class:"section-title"},"身份验证",-1)),s(t,{prop:"username"},{default:l(()=>[s(o,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=a=>r.username=a),placeholder:"请输入注册用户名","prefix-icon":"User"},null,8,["modelValue"])]),_:1}),s(t,{prop:"phone"},{default:l(()=>[s(o,{modelValue:r.phone,"onUpdate:modelValue":e[1]||(e[1]=a=>r.phone=a),placeholder:"请输入注册手机号","prefix-icon":"Phone"},null,8,["modelValue"])]),_:1}),s(t,{prop:"email"},{default:l(()=>[s(o,{modelValue:r.email,"onUpdate:modelValue":e[2]||(e[2]=a=>r.email=a),placeholder:"请输入注册邮箱","prefix-icon":"Message"},null,8,["modelValue"])]),_:1})]),i("div",N,[e[7]||(e[7]=i("h3",{class:"section-title"},"设置新密码",-1)),s(t,{prop:"newPassword"},{default:l(()=>[s(o,{modelValue:r.newPassword,"onUpdate:modelValue":e[3]||(e[3]=a=>r.newPassword=a),type:"password",placeholder:"请输入新密码（至少6位，包含字母和数字）","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1}),s(t,{prop:"confirmPassword"},{default:l(()=>[s(o,{modelValue:r.confirmPassword,"onUpdate:modelValue":e[4]||(e[4]=a=>r.confirmPassword=a),type:"password",placeholder:"请再次确认新密码","prefix-icon":"Lock","show-password":""},null,8,["modelValue"])]),_:1})]),s(t,null,{default:l(()=>[s(P,{type:"primary",size:"large",style:{width:"100%"},loading:m.value,onClick:p},{default:l(()=>[...e[8]||(e[8]=[f(" 重置密码 ",-1)])]),_:1},8,["loading"])]),_:1}),s(t,null,{default:l(()=>[i("div",Z,[s(v,{type:"primary",onClick:e[5]||(e[5]=a=>n.$router.push("/login"))},{default:l(()=>[...e[9]||(e[9]=[f(" 返回登录 ",-1)])]),_:1})])]),_:1})]),_:1},8,["model"])])])}}},X=R(K,[["__scopeId","data-v-32068b18"]]);export{X as default};
