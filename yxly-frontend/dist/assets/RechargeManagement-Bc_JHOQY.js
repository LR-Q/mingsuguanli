/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                   *//* empty css                             *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                *//* empty css                     */import{b as Z,c as ee}from"./superAdmin-CPV5vgik.js";import{_ as ae}from"./index-rlk3mQiZ.js";import{k as te,d as le,e as se,L as oe,K as ne,j as ue,a0 as de,a5 as re,a6 as ie,_ as me,ak as pe,a7 as ce,ab as _e,ac as fe,S as ve,E as x}from"./elementPlus-fsp5CJhs.js";import{r as c,l as O,j as ge,z as w,B as r,R as e,J as t,O as o,K as be,A as g,I as D,P as n,L as V}from"./vendor-DSBWSuTS.js";const ye={class:"recharge-management"},he={class:"amount"},ke={class:"pagination-container"},Ve={key:0,class:"detail-content"},Re={class:"amount"},Ce={key:0,class:"detail-section"},we={key:1,class:"detail-section"},Ee={class:"amount"},ze={class:"dialog-footer"},Te={__name:"RechargeManagement",setup(xe){const E=c(!1),M=c([]),N=c(0),y=c(1),R=c(10),z=c(!1),h=c(!1),T=c(!1),u=c(null),i=O({username:"",status:null,paymentMethod:""}),d=O({id:null,status:null,auditRemark:"",username:"",amount:0}),k=async()=>{try{E.value=!0;const s={current:y.value,size:R.value,username:i.username||void 0,status:i.status!==null?i.status:void 0,paymentMethod:i.paymentMethod||void 0},m=(await Z(s)).data;M.value=m.records,N.value=m.total}catch(s){console.error("查询充值记录失败:",s),x.error("查询充值记录失败")}finally{E.value=!1}},S=()=>{y.value=1,k()},K=()=>{Object.assign(i,{username:"",status:null,paymentMethod:""}),S()},J=s=>{R.value=s,k()},q=s=>{y.value=s,k()},G=s=>{u.value=s,z.value=!0},U=(s,a)=>{d.id=s.id,d.status=a,d.auditRemark="",d.username=s.username,d.amount=s.amount,h.value=!0},H=async()=>{var s,a;try{T.value=!0,await ee({id:d.id,status:d.status,auditRemark:d.auditRemark}),x.success("审核成功"),h.value=!1,k()}catch(m){console.error("审核失败:",m),x.error("审核失败: "+(((a=(s=m.response)==null?void 0:s.data)==null?void 0:a.message)||m.message))}finally{T.value=!1}},I=s=>({0:"warning",1:"success",2:"danger"})[s]||"info",B=s=>({0:"待审核",1:"审核通过",2:"审核拒绝"})[s]||"未知",C=s=>s?new Date(s).toLocaleString("zh-CN"):"-";return ge(()=>{k()}),(s,a)=>{const m=se,f=le,b=ne,L=oe,v=ue,j=te,F=de,p=ie,P=me,Q=re,W=ce,_=fe,X=_e,$=ve,Y=pe;return g(),w("div",ye,[a[17]||(a[17]=r("div",{class:"page-header"},[r("h1",null,"充值管理"),r("p",null,"管理所有商户的充值申请，审核充值记录")],-1)),e(F,{class:"search-card"},{default:t(()=>[e(j,{model:i,inline:""},{default:t(()=>[e(f,{label:"用户名"},{default:t(()=>[e(m,{modelValue:i.username,"onUpdate:modelValue":a[0]||(a[0]=l=>i.username=l),placeholder:"请输入用户名",clearable:"",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),e(f,{label:"状态"},{default:t(()=>[e(L,{modelValue:i.status,"onUpdate:modelValue":a[1]||(a[1]=l=>i.status=l),placeholder:"请选择状态",clearable:"",style:{width:"150px"}},{default:t(()=>[e(b,{label:"待审核",value:0}),e(b,{label:"审核通过",value:1}),e(b,{label:"审核拒绝",value:2})]),_:1},8,["modelValue"])]),_:1}),e(f,{label:"支付方式"},{default:t(()=>[e(L,{modelValue:i.paymentMethod,"onUpdate:modelValue":a[2]||(a[2]=l=>i.paymentMethod=l),placeholder:"请选择支付方式",clearable:"",style:{width:"150px"}},{default:t(()=>[e(b,{label:"支付宝",value:"支付宝"}),e(b,{label:"微信支付",value:"微信支付"}),e(b,{label:"银行转账",value:"银行转账"})]),_:1},8,["modelValue"])]),_:1}),e(f,null,{default:t(()=>[e(v,{type:"primary",onClick:S},{default:t(()=>[...a[9]||(a[9]=[o("搜索",-1)])]),_:1}),e(v,{onClick:K},{default:t(()=>[...a[10]||(a[10]=[o("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),e(F,{class:"table-card"},{default:t(()=>[be((g(),D(Q,{data:M.value,stripe:"",style:{width:"100%"}},{default:t(()=>[e(p,{prop:"id",label:"ID",width:"80"}),e(p,{prop:"username",label:"用户名",width:"120"}),e(p,{prop:"amount",label:"充值金额",width:"120"},{default:t(({row:l})=>[r("span",he,"¥"+n(l.amount),1)]),_:1}),e(p,{prop:"paymentMethod",label:"支付方式",width:"120"}),e(p,{prop:"status",label:"状态",width:"100"},{default:t(({row:l})=>[e(P,{type:I(l.status),size:"small"},{default:t(()=>[o(n(B(l.status)),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"applyTime",label:"申请时间",width:"180"},{default:t(({row:l})=>[o(n(C(l.applyTime)),1)]),_:1}),e(p,{prop:"auditTime",label:"审核时间",width:"180"},{default:t(({row:l})=>[o(n(l.auditTime?C(l.auditTime):"-"),1)]),_:1}),e(p,{prop:"auditorName",label:"审核人",width:"120"},{default:t(({row:l})=>[o(n(l.auditorName||"-"),1)]),_:1}),e(p,{label:"操作",width:"200",fixed:"right"},{default:t(({row:l})=>[e(v,{type:"primary",size:"small",onClick:A=>G(l)},{default:t(()=>[...a[11]||(a[11]=[o(" 查看详情 ",-1)])]),_:1},8,["onClick"]),l.status===0?(g(),D(v,{key:0,type:"success",size:"small",onClick:A=>U(l,1)},{default:t(()=>[...a[12]||(a[12]=[o(" 通过 ",-1)])]),_:1},8,["onClick"])):V("",!0),l.status===0?(g(),D(v,{key:1,type:"danger",size:"small",onClick:A=>U(l,2)},{default:t(()=>[...a[13]||(a[13]=[o(" 拒绝 ",-1)])]),_:1},8,["onClick"])):V("",!0)]),_:1})]),_:1},8,["data"])),[[Y,E.value]]),r("div",ke,[e(W,{"current-page":y.value,"onUpdate:currentPage":a[3]||(a[3]=l=>y.value=l),"page-size":R.value,"onUpdate:pageSize":a[4]||(a[4]=l=>R.value=l),"page-sizes":[10,20,50,100],total:N.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:J,onCurrentChange:q},null,8,["current-page","page-size","total"])])]),_:1}),e($,{modelValue:z.value,"onUpdate:modelValue":a[5]||(a[5]=l=>z.value=l),title:"充值记录详情",width:"600px"},{default:t(()=>[u.value?(g(),w("div",Ve,[e(X,{column:2,border:""},{default:t(()=>[e(_,{label:"记录ID"},{default:t(()=>[o(n(u.value.id),1)]),_:1}),e(_,{label:"用户名"},{default:t(()=>[o(n(u.value.username),1)]),_:1}),e(_,{label:"充值金额"},{default:t(()=>[r("span",Re,"¥"+n(u.value.amount),1)]),_:1}),e(_,{label:"支付方式"},{default:t(()=>[o(n(u.value.paymentMethod),1)]),_:1}),e(_,{label:"状态"},{default:t(()=>[e(P,{type:I(u.value.status)},{default:t(()=>[o(n(B(u.value.status)),1)]),_:1},8,["type"])]),_:1}),e(_,{label:"申请时间"},{default:t(()=>[o(n(C(u.value.applyTime)),1)]),_:1}),e(_,{label:"审核时间"},{default:t(()=>[o(n(u.value.auditTime?C(u.value.auditTime):"-"),1)]),_:1}),e(_,{label:"审核人"},{default:t(()=>[o(n(u.value.auditorName||"-"),1)]),_:1})]),_:1}),u.value.userRemark?(g(),w("div",Ce,[a[14]||(a[14]=r("h4",null,"用户备注",-1)),r("p",null,n(u.value.userRemark),1)])):V("",!0),u.value.auditRemark?(g(),w("div",we,[a[15]||(a[15]=r("h4",null,"审核备注",-1)),r("p",null,n(u.value.auditRemark),1)])):V("",!0)])):V("",!0)]),_:1},8,["modelValue"]),e($,{modelValue:h.value,"onUpdate:modelValue":a[8]||(a[8]=l=>h.value=l),title:d.status===1?"审核通过":"审核拒绝",width:"500px"},{footer:t(()=>[r("span",ze,[e(v,{onClick:a[7]||(a[7]=l=>h.value=!1)},{default:t(()=>[...a[16]||(a[16]=[o("取消",-1)])]),_:1}),e(v,{type:"primary",onClick:H,loading:T.value},{default:t(()=>[o(" 确认"+n(d.status===1?"通过":"拒绝"),1)]),_:1},8,["loading"])])]),default:t(()=>[e(j,{model:d,"label-width":"80px"},{default:t(()=>[e(f,{label:"充值金额"},{default:t(()=>[r("span",Ee,"¥"+n(d.amount),1)]),_:1}),e(f,{label:"用户名"},{default:t(()=>[r("span",null,n(d.username),1)]),_:1}),e(f,{label:"审核备注"},{default:t(()=>[e(m,{modelValue:d.auditRemark,"onUpdate:modelValue":a[6]||(a[6]=l=>d.auditRemark=l),type:"textarea",rows:3,placeholder:"请输入审核备注（可选）"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Qe=ae(Te,[["__scopeId","data-v-3cf0714c"]]);export{Qe as default};
