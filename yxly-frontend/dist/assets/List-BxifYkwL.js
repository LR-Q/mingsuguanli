/* empty css                  *//* empty css                   *//* empty css                *//* empty css                      *//* empty css               *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                    */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css                        */import{aB as W,r as c,l as X,j as Y,z as k,R as o,J as l,B as g,K as Z,A as b,Q as ee,a6 as oe,I as z,O as u,P as N,u as te}from"./vendor-DSBWSuTS.js";import{k as ae,d as le,e as se,L as ne,K as re,a8 as ue,j as de,a5 as ie,a6 as me,_ as pe,ak as ce,a7 as _e,n as fe,p as ge,a0 as be,E as y,a as ye}from"./elementPlus-fsp5CJhs.js";import{g as ve,a as he,d as we}from"./room-Cn3l7vr2.js";import{_ as Ne}from"./index-rlk3mQiZ.js";const Ce={class:"room-list"},Te={class:"card-header"},Ee={class:"search-area"},xe={class:"pagination-wrapper"},Ve={__name:"List",setup(ke){const v=W(),h=c(!1),d=c(1),f=c(10),C=c(0),s=X({roomNumber:"",roomTypeId:null,status:null,floorNumber:null}),T=c([]),w=c([]),I=a=>{const e=w.value.find(m=>m.id===a);return e?e.typeName:"未知"},B=a=>["","success","warning","danger"][a%4]||"",R=a=>({1:"可用",2:"占用",3:"维修",4:"清洁",5:"停用"})[a]||"未知",S=a=>({1:"success",2:"warning",3:"info",4:"primary",5:"danger"})[a]||"",L=()=>{v.push("/admin/rooms/create")},P=a=>{v.push(`/admin/rooms/${a.id}`)},U=a=>{v.push(`/admin/rooms/${a.id}/edit`)},$=async a=>{var e,m;try{await ye.confirm(`确定要删除房间 ${a.roomNumber} 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await we(a.id),y.success("删除成功"),i()}catch(n){(m=(e=n.response)==null?void 0:e.data)!=null&&m.message?y.error(n.response.data.message):n.message!=="cancel"&&y.error("删除失败，请重试")}},j=()=>{d.value=1,i()},F=()=>{Object.assign(s,{roomNumber:"",roomTypeId:null,status:null,floorNumber:null}),d.value=1,i()},D=a=>{f.value=a,i()},M=a=>{d.value=a,i()},i=async()=>{h.value=!0;try{const a={current:d.value,size:f.value,...s},e=await he(a);T.value=e.data.records,C.value=e.data.total}catch(a){console.error("获取房间列表失败:",a),y.error("获取房间列表失败")}finally{h.value=!1}},O=async()=>{try{const a=await ve();w.value=a.data}catch(a){console.error("获取房型列表失败:",a)}};return Y(()=>{O(),i()}),(a,e)=>{const m=fe,n=de,A=se,_=le,p=re,E=ne,K=ue,G=ae,r=me,x=pe,J=ie,Q=_e,q=be,H=ce;return b(),k("div",Ce,[o(q,{shadow:"never"},{header:l(()=>[g("div",Te,[e[7]||(e[7]=g("h3",null,"房间管理",-1)),o(n,{type:"primary",onClick:L},{default:l(()=>[o(m,null,{default:l(()=>[o(te(ge))]),_:1}),e[6]||(e[6]=u(" 添加房间 ",-1))]),_:1})])]),default:l(()=>[g("div",Ee,[o(G,{model:s,inline:""},{default:l(()=>[o(_,{label:"房间号"},{default:l(()=>[o(A,{modelValue:s.roomNumber,"onUpdate:modelValue":e[0]||(e[0]=t=>s.roomNumber=t),placeholder:"请输入房间号",clearable:"",style:{width:"140px"}},null,8,["modelValue"])]),_:1}),o(_,{label:"房间类型"},{default:l(()=>[o(E,{modelValue:s.roomTypeId,"onUpdate:modelValue":e[1]||(e[1]=t=>s.roomTypeId=t),placeholder:"请选择房间类型",clearable:"",style:{width:"160px"}},{default:l(()=>[(b(!0),k(ee,null,oe(w.value,t=>(b(),z(p,{key:t.id,label:t.typeName,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(_,{label:"楼层"},{default:l(()=>[o(K,{modelValue:s.floorNumber,"onUpdate:modelValue":e[2]||(e[2]=t=>s.floorNumber=t),placeholder:"请输入楼层",min:1,max:50,clearable:"",style:{width:"120px"}},null,8,["modelValue"])]),_:1}),o(_,{label:"状态"},{default:l(()=>[o(E,{modelValue:s.status,"onUpdate:modelValue":e[3]||(e[3]=t=>s.status=t),placeholder:"请选择状态",clearable:"",style:{width:"120px"}},{default:l(()=>[o(p,{label:"可用",value:1}),o(p,{label:"占用",value:2}),o(p,{label:"维修",value:3}),o(p,{label:"清洁",value:4}),o(p,{label:"停用",value:5})]),_:1},8,["modelValue"])]),_:1}),o(_,null,{default:l(()=>[o(n,{type:"primary",onClick:j},{default:l(()=>[...e[8]||(e[8]=[u("搜索",-1)])]),_:1}),o(n,{onClick:F},{default:l(()=>[...e[9]||(e[9]=[u("重置",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),Z((b(),z(J,{data:T.value,style:{width:"100%"}},{default:l(()=>[o(r,{prop:"roomNumber",label:"房间号",width:"100"}),o(r,{prop:"roomTypeName",label:"房间类型",width:"120"},{default:l(({row:t})=>[o(x,{type:B(t.roomTypeId)},{default:l(()=>[u(N(t.roomTypeName||I(t.roomTypeId)),1)]),_:2},1032,["type"])]),_:1}),o(r,{prop:"floorNumber",label:"楼层",width:"80"}),o(r,{prop:"currentPrice",label:"价格/晚",width:"100"},{default:l(({row:t})=>[u(" ¥"+N(t.currentPrice),1)]),_:1}),o(r,{prop:"maxGuests",label:"容纳人数",width:"100"}),o(r,{prop:"area",label:"面积(㎡)",width:"100"}),o(r,{prop:"status",label:"状态",width:"100"},{default:l(({row:t})=>[o(x,{type:S(t.status)},{default:l(()=>[u(N(R(t.status)),1)]),_:2},1032,["type"])]),_:1}),o(r,{prop:"description",label:"描述","show-overflow-tooltip":""}),o(r,{label:"操作",width:"200",fixed:"right"},{default:l(({row:t})=>[o(n,{type:"primary",size:"small",onClick:V=>P(t)},{default:l(()=>[...e[10]||(e[10]=[u(" 查看 ",-1)])]),_:1},8,["onClick"]),o(n,{type:"warning",size:"small",onClick:V=>U(t)},{default:l(()=>[...e[11]||(e[11]=[u(" 编辑 ",-1)])]),_:1},8,["onClick"]),o(n,{type:"danger",size:"small",onClick:V=>$(t)},{default:l(()=>[...e[12]||(e[12]=[u(" 删除 ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[H,h.value]]),g("div",xe,[o(Q,{"current-page":d.value,"onUpdate:currentPage":e[4]||(e[4]=t=>d.value=t),"page-size":f.value,"onUpdate:pageSize":e[5]||(e[5]=t=>f.value=t),"page-sizes":[10,20,50,100],total:C.value,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:D,onCurrentChange:M},null,8,["current-page","page-size","total"])])]),_:1})])}}},Je=Ne(Ve,[["__scopeId","data-v-f1d02efc"]]);export{Je as default};
