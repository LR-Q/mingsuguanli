# æ‚¦é‘«ä¹æ€¡æ°‘å®¿ç®¡ç†ç³»ç»Ÿ - å¼€å‘æ–‡æ¡£

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

æ‚¦é‘«ä¹æ€¡æ°‘å®¿ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºå‰åç«¯åˆ†ç¦»æ¶æ„çš„ç°ä»£åŒ–æ°‘å®¿ç®¡ç†å¹³å°ï¼Œæä¾›æˆ¿é—´ç®¡ç†ã€è®¢å•å¤„ç†ã€å®¢æˆ·ç®¡ç†ã€è´¢åŠ¡ç»Ÿè®¡ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- ç”¨æˆ·ç®¡ç†ï¼ˆæ³¨å†Œ/ç™»å½•/æƒé™æ§åˆ¶ï¼‰
- æˆ¿é—´ç®¡ç†ï¼ˆæˆ¿å‹/æˆ¿é—´ä¿¡æ¯/çŠ¶æ€ç®¡ç†ï¼‰
- è®¢å•ç®¡ç†ï¼ˆé¢„è®¢/æ”¯ä»˜/å…¥ä½/é€€æˆ¿ï¼‰
- å®¢æˆ·ç®¡ç†ï¼ˆå®¢æˆ·ä¿¡æ¯/æ¶ˆè´¹è®°å½•ï¼‰
- è¯„è®ºç®¡ç†ï¼ˆè¯„ä»·/å›å¤ï¼‰
- è´¢åŠ¡ç®¡ç†ï¼ˆæ”¶æ”¯ç»Ÿè®¡/æŠ¥è¡¨ï¼‰
- ç³»ç»Ÿç®¡ç†ï¼ˆæ—¥å¿—/é…ç½®ï¼‰

## ğŸ›  æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯æ ˆ
```
Vue 3.x + Composition API
Vite 4.x (æ„å»ºå·¥å…·)
Element Plus (UIç»„ä»¶åº“)
Vue Router 4.x (è·¯ç”±ç®¡ç†)
Pinia (çŠ¶æ€ç®¡ç†)
Axios (HTTPå®¢æˆ·ç«¯)
Sass/SCSS (CSSé¢„å¤„ç†å™¨)
```

### åç«¯æŠ€æœ¯æ ˆ
```
Spring Boot 2.7.x
Spring Security + JWT (å®‰å…¨è®¤è¯)
MyBatis-Plus 3.5.x (æ•°æ®è®¿é—®)
MySQL 8.0+ (æ•°æ®åº“)
Redis 6.0+ (ç¼“å­˜)
Druid (è¿æ¥æ± )
Swagger 3.x (APIæ–‡æ¡£)
Maven 3.8+ (æ„å»ºå·¥å…·)
JDK 11+ (è¿è¡Œç¯å¢ƒ)
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 16+
- JDK 11+
- MySQL 8.0+
- Redis 6.0+
- Maven 3.8+

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd LRminsu
```

### 2. æ•°æ®åº“åˆå§‹åŒ–
```sql
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE yxly_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;

-- å¯¼å…¥æ•°æ®è¡¨ç»“æ„ï¼ˆå‚è€ƒå®Œæ•´è®¾è®¡æ–‡æ¡£ä¸­çš„SQLï¼‰
-- æ ¸å¿ƒè¡¨åŒ…æ‹¬ï¼š
-- sys_user (ç”¨æˆ·è¡¨)
-- sys_role (è§’è‰²è¡¨)
-- room_type (æˆ¿é—´ç±»å‹è¡¨)
-- room_info (æˆ¿é—´ä¿¡æ¯è¡¨)
-- customer_info (å®¢æˆ·è¡¨)
-- booking_order (è®¢å•è¡¨)
-- payment_record (æ”¯ä»˜è®°å½•è¡¨)
-- customer_review (è¯„è®ºè¡¨)
```

### 3. åç«¯å¯åŠ¨
```bash
cd yxly-backend

# é…ç½®æ•°æ®åº“è¿æ¥
# ç¼–è¾‘ src/main/resources/application-dev.yml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/yxly_db
    username: root
    password: root

# å¯åŠ¨é¡¹ç›®
mvn spring-boot:run
```

### 4. å‰ç«¯å¯åŠ¨
```bash
cd yxly-frontend

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 5. è®¿é—®ç³»ç»Ÿ
- å‰ç«¯åœ°å€: http://localhost:5173
- åç«¯API: http://localhost:8080/api
- APIæ–‡æ¡£: http://localhost:8080/swagger-ui.html

## ğŸ“ é¡¹ç›®ç»“æ„

### å‰ç«¯ç»“æ„
```
yxly-frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/              # APIæ¥å£å®šä¹‰
â”‚   â”œâ”€â”€ components/       # å…¬å…±ç»„ä»¶
â”‚   â”œâ”€â”€ pages/           # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ router/          # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ stores/          # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ utils/           # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ assets/          # é™æ€èµ„æº
â”œâ”€â”€ public/              # å…¬å…±èµ„æº
â””â”€â”€ package.json         # é¡¹ç›®é…ç½®
```

### åç«¯ç»“æ„
```
yxly-backend/
â”œâ”€â”€ src/main/java/com/yxly/
â”‚   â”œâ”€â”€ controller/      # æ§åˆ¶å™¨å±‚
â”‚   â”œâ”€â”€ service/         # ä¸šåŠ¡æœåŠ¡å±‚
â”‚   â”œâ”€â”€ mapper/          # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ entity/          # å®ä½“ç±»
â”‚   â”œâ”€â”€ dto/             # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ config/          # é…ç½®ç±»
â”‚   â”œâ”€â”€ security/        # å®‰å…¨ç›¸å…³
â”‚   â””â”€â”€ utils/           # å·¥å…·ç±»
â”œâ”€â”€ src/main/resources/
â”‚   â”œâ”€â”€ mapper/          # MyBatisæ˜ å°„æ–‡ä»¶
â”‚   â””â”€â”€ application.yml  # é…ç½®æ–‡ä»¶
â””â”€â”€ pom.xml              # Mavené…ç½®
```

## ğŸ”‘ æ ¸å¿ƒAPIæ¥å£

### è®¤è¯æ¥å£
```http
# ç”¨æˆ·ç™»å½•
POST /api/v1/auth/login
Content-Type: application/json

{
  "username": "admin",
  "password": "123456"
}

# å“åº”
{
  "code": 200,
  "data": {
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "userInfo": {
      "id": 1,
      "username": "admin",
      "role": "ADMIN"
    }
  }
}
```

### æˆ¿é—´ç®¡ç†
```http
# è·å–æˆ¿é—´åˆ—è¡¨
GET /api/v1/rooms?page=1&size=10&status=1
Authorization: Bearer {token}

# åˆ›å»ºæˆ¿é—´
POST /api/v1/rooms
Authorization: Bearer {token}
Content-Type: application/json

{
  "roomNumber": "101",
  "roomTypeId": 1,
  "basePrice": 168.00,
  "maxGuests": 2
}
```

### è®¢å•ç®¡ç†
```http
# åˆ›å»ºè®¢å•
POST /api/v1/bookings
Authorization: Bearer {token}

{
  "customerId": 123,
  "roomId": 1,
  "checkInDate": "2024-01-15",
  "checkOutDate": "2024-01-17",
  "guestsCount": 2
}

# è®¢å•æ”¯ä»˜
POST /api/v1/bookings/{orderId}/payment
{
  "paymentMethod": "ALIPAY",
  "paymentAmount": 336.00
}
```

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡è¦ç‚¹

### æ ¸å¿ƒè¡¨å…³ç³»
```
sys_user (ç”¨æˆ·) â†â†’ sys_role (è§’è‰²)
room_type (æˆ¿å‹) â†â†’ room_info (æˆ¿é—´)
customer_info (å®¢æˆ·) â†â†’ booking_order (è®¢å•)
booking_order (è®¢å•) â†â†’ payment_record (æ”¯ä»˜)
booking_order (è®¢å•) â†â†’ customer_review (è¯„è®º)
```

### å…³é”®å­—æ®µè¯´æ˜
- **è®¢å•çŠ¶æ€**: 1-å¾…ç¡®è®¤, 2-å·²ç¡®è®¤, 3-å·²å…¥ä½, 4-å·²é€€æˆ¿, 5-å·²å–æ¶ˆ
- **æ”¯ä»˜çŠ¶æ€**: 0-æœªæ”¯ä»˜, 1-å·²æ”¯ä»˜, 2-éƒ¨åˆ†æ”¯ä»˜, 3-å·²é€€æ¬¾
- **æˆ¿é—´çŠ¶æ€**: 1-å¯ç”¨, 2-å ç”¨, 3-ç»´ä¿®, 4-æ¸…æ´, 5-åœç”¨

## ğŸ” å®‰å…¨é…ç½®

### JWTé…ç½®
```yaml
jwt:
  secret: yxly-jwt-secret-key-2024
  expiration: 86400000  # 24å°æ—¶
  refresh-expiration: 604800000  # 7å¤©
```

### æƒé™è§’è‰²
- **ADMIN**: ç³»ç»Ÿç®¡ç†å‘˜ï¼ˆæ‰€æœ‰æƒé™ï¼‰
- **MANAGER**: æ°‘å®¿ç®¡ç†å‘˜ï¼ˆæˆ¿é—´ã€è®¢å•ã€å®¢æˆ·ç®¡ç†ï¼‰
- **RECEPTIONIST**: å‰å°æ¥å¾…ï¼ˆå…¥ä½é€€æˆ¿ã€è®¢å•æŸ¥çœ‹ï¼‰
- **USER**: æ™®é€šç”¨æˆ·ï¼ˆä¸ªäººè®¢å•æŸ¥çœ‹ï¼‰

## ğŸ¨ å‰ç«¯å¼€å‘è§„èŒƒ

### ç»„ä»¶å‘½å
```javascript
// æ–‡ä»¶å‘½åï¼šPascalCase
UserProfile.vue
RoomCard.vue

// æ¨¡æ¿ä½¿ç”¨ï¼škebab-case
<user-profile />
<room-card />
```

### APIè°ƒç”¨ç¤ºä¾‹
```javascript
// api/modules/room.js
import request from '../request'

export const getRoomList = (params) => {
  return request({
    url: '/rooms',
    method: 'GET',
    params
  })
}

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
import { getRoomList } from '@/api/modules/room'

const { data } = await getRoomList({
  page: 1,
  size: 10,
  status: 1
})
```

### çŠ¶æ€ç®¡ç†
```javascript
// stores/modules/auth.js
import { defineStore } from 'pinia'

export const useAuthStore = defineStore('auth', () => {
  const token = ref('')
  const userInfo = ref(null)
  
  const login = async (credentials) => {
    // ç™»å½•é€»è¾‘
  }
  
  return { token, userInfo, login }
})
```

## ğŸ”§ åç«¯å¼€å‘è§„èŒƒ

### æ§åˆ¶å™¨ç¤ºä¾‹
```java
@RestController
@RequestMapping("/api/v1/rooms")
@Api(tags = "æˆ¿é—´ç®¡ç†")
public class RoomController {
    
    @Autowired
    private RoomService roomService;
    
    @GetMapping
    @ApiOperation("è·å–æˆ¿é—´åˆ—è¡¨")
    @PreAuthorize("hasAuthority('room:list')")
    public Result<PageResult<RoomVO>> getRoomList(@Valid RoomQueryRequest request) {
        PageResult<RoomVO> result = roomService.getRoomList(request);
        return Result.success(result);
    }
}
```

### æœåŠ¡å±‚ç¤ºä¾‹
```java
@Service
@Transactional(rollbackFor = Exception.class)
public class RoomServiceImpl implements RoomService {
    
    @Override
    @Transactional(readOnly = true)
    public PageResult<RoomVO> getRoomList(RoomQueryRequest request) {
        // æ„å»ºæŸ¥è¯¢æ¡ä»¶
        LambdaQueryWrapper<RoomInfo> queryWrapper = new LambdaQueryWrapper<>();
        queryWrapper.eq(RoomInfo::getDeleted, 0)
                   .orderByDesc(RoomInfo::getCreateTime);
        
        // åˆ†é¡µæŸ¥è¯¢
        Page<RoomInfo> page = new Page<>(request.getPage(), request.getSize());
        Page<RoomInfo> roomPage = this.page(page, queryWrapper);
        
        return PageResult.of(roomPage.getTotal(), roomVOList);
    }
}
```

## ğŸ“Š éƒ¨ç½²è¯´æ˜

### å¼€å‘ç¯å¢ƒ
```bash
# å‰ç«¯
npm run dev

# åç«¯
mvn spring-boot:run -Dspring.profiles.active=dev
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# å‰ç«¯æ„å»º
npm run build

# åç«¯æ‰“åŒ…
mvn clean package -Dmaven.test.skip=true

# éƒ¨ç½²
java -jar yxly-backend.jar --spring.profiles.active=prod
```

### Dockeréƒ¨ç½²ï¼ˆå¯é€‰ï¼‰
```dockerfile
# Dockerfileç¤ºä¾‹
FROM openjdk:11-jre-slim
COPY target/yxly-backend.jar app.jar
EXPOSE 8080
ENTRYPOINT ["java", "-jar", "/app.jar"]
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
- æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
- ç¡®è®¤æ•°æ®åº“è¿æ¥é…ç½®æ­£ç¡®
- éªŒè¯ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®

### 2. å‰ç«¯è·¨åŸŸé—®é¢˜
```javascript
// vite.config.js
export default {
  server: {
    proxy: {
      '/api': {
        target: 'http://localhost:8080',
        changeOrigin: true
      }
    }
  }
}
```

### 3. JWT Tokenè¿‡æœŸ
- å‰ç«¯éœ€è¦å®ç°Tokenåˆ·æ–°æœºåˆ¶
- åç«¯æä¾›Tokenåˆ·æ–°æ¥å£

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰å¼€å‘é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
1. å®Œæ•´è®¾è®¡æ–‡æ¡£ï¼š`yxly.md`
2. APIæ–‡æ¡£ï¼šhttp://localhost:8080/swagger-ui.html
3. é¡¹ç›®Wikiï¼š[å¾…è¡¥å……]

---

**æ³¨æ„**: è¿™æ˜¯ç®€åŒ–ç‰ˆå¼€å‘æ–‡æ¡£ï¼Œè¯¦ç»†çš„æŠ€æœ¯è§„èŒƒè¯·å‚è€ƒå®Œæ•´çš„è®¾è®¡æ–‡æ¡£ã€‚
