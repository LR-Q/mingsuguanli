2025-10-29 00:01:09.798 [http-nio-8080-exec-2] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-29 00:01:09.803 [http-nio-8080-exec-2] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-10-29 00:01:09.805 [http-nio-8080-exec-2] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 2 ms
2025-10-29 00:01:09.805 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:01:09.805 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-10-29 00:01:09.805 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:01:09.808 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:01:09.813 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:01:09.813 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:01:09.825 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-10-29 00:01:09.825 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-10-29 00:01:09.826 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-10-29 00:01:09.826 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:01:09.827 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-10-29 00:01:09.827 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-10-29 00:01:09.827 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-10-29 00:01:09.830 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-10-29 00:01:09.835 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 0
2025-10-29 00:01:09.839 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-10-29 00:01:09.843 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 0
2025-10-29 00:01:09.849 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:01:09.849 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:01:09.851 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:01:09.853 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:01:09.853 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:01:09.861 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:01:09.861 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:01:09.869 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:01:09.869 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:01:09.873 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:01:09.878 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-10-29 00:01:09.878 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:01:09.879 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-10-29 00:01:09.907 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:16.247 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-3} closing ...
2025-10-29 00:05:16.250 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-3} closed
2025-10-29 00:05:28.422 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 25480 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-10-29 00:05:28.424 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-10-29 00:05:28.425 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-10-29 00:05:28.467 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-10-29 00:05:28.468 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-10-29 00:05:29.161 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-10-29 00:05:29.162 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-10-29 00:05:29.185 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-10-29 00:05:29.805 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-10-29 00:05:29.813 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-10-29 00:05:29.814 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-10-29 00:05:29.878 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-10-29 00:05:29.879 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 1411 ms
2025-10-29 00:05:29.947 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-10-29 00:05:30.276 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-10-29 00:05:30.515 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-10-29 00:05:30.929 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-10-29 00:05:30.930 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-10-29 00:05:30.931 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-10-29 00:05:30.931 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-10-29 00:05:30.931 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-10-29 00:05:30.931 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-10-29 00:05:30.932 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-10-29 00:05:30.932 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-10-29 00:05:30.932 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-10-29 00:05:30.932 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-10-29 00:05:30.932 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-10-29 00:05:30.932 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-10-29 00:05:30.932 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-10-29 00:05:30.932 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-10-29 00:05:30.932 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-10-29 00:05:30.932 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-10-29 00:05:30.932 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-10-29 00:05:30.934 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-10-29 00:05:30.934 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-10-29 00:05:30.934 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-10-29 00:05:30.934 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-10-29 00:05:30.934 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-10-29 00:05:30.938 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@766199a5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@560fce85, org.springframework.security.web.context.SecurityContextPersistenceFilter@5667ddf5, org.springframework.security.web.header.HeaderWriterFilter@3e11da97, org.springframework.web.filter.CorsFilter@6571079e, org.springframework.security.web.authentication.logout.LogoutFilter@48417dfd, com.yxly.security.JwtAuthenticationFilter@12861880, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@722b9d4d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4f29ae46, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6c23abd3, org.springframework.security.web.session.SessionManagementFilter@36ea3715, org.springframework.security.web.access.ExceptionTranslationFilter@3a260151, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5cd4c2c1]
2025-10-29 00:05:31.518 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-10-29 00:05:31.556 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-10-29 00:05:31.565 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 3.462 seconds (JVM running for 3.802)
2025-10-29 00:05:39.139 [http-nio-8080-exec-2] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-29 00:05:39.140 [http-nio-8080-exec-2] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-10-29 00:05:39.141 [http-nio-8080-exec-2] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-10-29 00:05:39.150 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-10-29 00:05:39.154 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:39.199 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:39.296 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-10-29 00:05:39.296 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-10-29 00:05:39.308 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-10-29 00:05:39.314 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-10-29 00:05:39.320 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-10-29 00:05:39.374 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:41.320 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-10-29 00:05:41.322 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-10-29 00:05:41.322 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:41.322 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-10-29 00:05:41.322 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:41.322 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:41.324 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:41.324 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:41.326 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:41.330 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-10-29 00:05:41.330 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-10-29 00:05:41.332 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-10-29 00:05:41.332 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-10-29 00:05:41.332 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-10-29 00:05:41.333 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-10-29 00:05:41.333 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-10-29 00:05:41.333 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-10-29 00:05:41.333 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-10-29 00:05:41.338 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-10-29 00:05:41.342 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-10-29 00:05:41.346 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:41.349 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-10-29 00:05:41.349 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-10-29 00:05:41.358 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:41.421 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-10-29 00:05:41.425 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:41.440 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-10-29 00:05:41.440 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:41.448 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:41.452 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-10-29 00:05:41.452 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-10-29 00:05:41.514 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:05:41.515 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:05:41.516 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:05:41.518 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:05:41.518 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:05:41.542 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:43.441 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-10-29 00:05:43.442 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:43.445 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:43.450 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-10-29 00:05:43.450 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-10-29 00:05:43.453 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-10-29 00:05:43.454 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-10-29 00:05:43.459 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:46.248 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-10-29 00:05:46.250 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:46.258 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:46.264 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-10-29 00:05:46.264 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-10-29 00:05:46.266 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:05:46.267 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:05:46.269 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:05:46.270 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:05:46.271 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:05:46.274 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-10-29 00:05:46.288 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 6 条记录
2025-10-29 00:05:46.294 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:05:46.302 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:05:46.306 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:05:46.310 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:05:46.314 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:05:46.319 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:05:46.324 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:05:46.329 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:46.369 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-10-29 00:05:46.369 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-10-29 00:05:46.370 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:46.370 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:46.370 [http-nio-8080-exec-6] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-10-29 00:05:46.372 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-10-29 00:05:46.373 [http-nio-8080-exec-6] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-10-29 00:05:46.373 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:46.374 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:46.375 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-10-29 00:05:46.376 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:46.376 [http-nio-8080-exec-6] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-10-29 00:05:46.376 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-10-29 00:05:46.381 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-10-29 00:05:46.381 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-10-29 00:05:46.381 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:05:46.381 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:05:46.382 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:05:46.385 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:05:46.385 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:05:46.385 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-10-29 00:05:46.388 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:46.398 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 6 条记录
2025-10-29 00:05:46.399 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:05:46.405 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:05:46.411 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:05:46.418 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:05:46.428 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:05:46.434 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:05:46.439 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:05:46.440 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:47.592 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/balance
2025-10-29 00:05:47.592 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/records?current=1&size=10
2025-10-29 00:05:47.592 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/withdraw/records?current=1&size=10
2025-10-29 00:05:47.592 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:47.592 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:47.592 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:47.596 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:47.596 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:47.596 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:47.601 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/withdraw/records?current=1&size=10] with attributes [authenticated]
2025-10-29 00:05:47.601 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/balance] with attributes [authenticated]
2025-10-29 00:05:47.602 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/withdraw/records?current=1&size=10
2025-10-29 00:05:47.601 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/records?current=1&size=10] with attributes [authenticated]
2025-10-29 00:05:47.602 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/balance
2025-10-29 00:05:47.602 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/records?current=1&size=10
2025-10-29 00:05:47.602 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:05:47.602 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:05:47.603 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:05:47.603 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:05:47.603 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:05:47.603 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:05:47.604 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:05:47.604 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:05:47.605 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:05:47.606 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:05:47.607 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:05:47.607 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:05:47.607 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:05:47.607 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:05:47.607 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:05:47.609 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RechargeServiceImpl] - 分页查询用户充值记录: current=1, size=10, userId=1
2025-10-29 00:05:47.610 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserRechargeController] - 获取用户余额成功，用户ID: 1, 余额: 802.00
2025-10-29 00:05:47.610 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:47.622 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:47.626 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:47.839 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/financial-records/my?current=1&size=1000
2025-10-29 00:05:47.840 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:47.841 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:47.844 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/financial-records/my?current=1&size=1000] with attributes [authenticated]
2025-10-29 00:05:47.845 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/financial-records/my?current=1&size=1000
2025-10-29 00:05:47.846 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:05:47.846 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:05:47.847 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:05:47.850 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:05:47.850 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:05:47.850 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.FinancialRecordController] - 用户获取财务记录: userId=1, current=1, size=1000, category=null
2025-10-29 00:05:47.850 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.FinancialRecordServiceImpl] - 获取用户财务记录: userId=1, current=1, size=1000, category=null
2025-10-29 00:05:47.857 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.FinancialRecordServiceImpl] - 获取用户财务记录成功，共6条
2025-10-29 00:05:47.859 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:55.104 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-10-29 00:05:55.105 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:55.106 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:55.112 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-10-29 00:05:55.112 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-10-29 00:05:55.113 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:05:55.113 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:05:55.114 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:05:55.114 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:05:55.114 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:05:55.114 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-10-29 00:05:55.127 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 6 条记录
2025-10-29 00:05:55.127 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:05:55.131 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:05:55.139 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:05:55.148 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:05:55.156 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:05:55.159 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:05:55.162 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:05:55.166 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:55.417 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-10-29 00:05:55.418 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:55.419 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:55.424 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-10-29 00:05:55.425 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-10-29 00:05:55.425 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:05:55.425 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:05:55.426 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:05:55.427 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:05:55.427 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:05:55.427 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-10-29 00:05:55.435 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 6 条记录
2025-10-29 00:05:55.435 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:05:55.441 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:05:55.446 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:05:55.451 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:05:55.456 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:05:55.461 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:05:55.465 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:05:55.467 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:55.487 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-10-29 00:05:55.488 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:55.488 [http-nio-8080-exec-4] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-10-29 00:05:55.488 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-10-29 00:05:55.489 [http-nio-8080-exec-4] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-10-29 00:05:55.489 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:55.489 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-10-29 00:05:55.489 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:55.489 [http-nio-8080-exec-4] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-10-29 00:05:55.489 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-10-29 00:05:55.492 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:58.410 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-10-29 00:05:58.410 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:58.413 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:58.422 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-10-29 00:05:58.422 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-10-29 00:05:58.424 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-10-29 00:05:58.425 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-10-29 00:05:58.429 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-10-29 00:05:58.430 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:58.711 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-10-29 00:05:58.711 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-10-29 00:05:58.711 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:58.711 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:58.713 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:58.713 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:58.717 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-10-29 00:05:58.717 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-10-29 00:05:58.717 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-10-29 00:05:58.717 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-10-29 00:05:58.717 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-10-29 00:05:58.717 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-10-29 00:05:58.718 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-10-29 00:05:58.718 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-10-29 00:05:58.724 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:58.726 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-10-29 00:05:58.728 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:05:58.738 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-10-29 00:05:58.739 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:05:58.740 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:05:58.748 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-10-29 00:05:58.748 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-10-29 00:05:58.750 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:05:58.750 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:05:58.753 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:05:58.755 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:05:58.755 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:05:58.774 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:01.592 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/4
2025-10-29 00:06:01.592 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:01.596 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:06:01.599 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/4] with attributes [permitAll]
2025-10-29 00:06:01.599 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/4
2025-10-29 00:06:01.599 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=4
2025-10-29 00:06:01.599 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=4
2025-10-29 00:06:01.603 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:17.631 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/bookings
2025-10-29 00:06:17.631 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:17.634 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:06:17.638 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/bookings] with attributes [authenticated]
2025-10-29 00:06:17.638 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/bookings
2025-10-29 00:06:17.651 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:06:17.651 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:06:17.652 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:06:17.653 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:06:17.653 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:06:17.657 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 用户创建订单: userId=1, roomId=4
2025-10-29 00:06:17.665 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 房间可预订: roomId=4, checkIn=2025-10-28, checkOut=2025-10-29
2025-10-29 00:06:17.672 [http-nio-8080-exec-1] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始更新填充...
2025-10-29 00:06:17.677 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 用户余额扣款成功: userId=1, 扣款金额=258.00, 原余额=802.00, 新余额=544.00
2025-10-29 00:06:17.682 [http-nio-8080-exec-1] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始插入填充...
2025-10-29 00:06:17.687 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 订单创建成功: orderId=30, orderNo=YX17616675776771335, 支付金额=258.00，等待管理员确认后创建消费记录
2025-10-29 00:06:17.692 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:18.045 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-10-29 00:06:18.045 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:18.049 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:06:18.052 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-10-29 00:06:18.052 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-10-29 00:06:18.053 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:06:18.053 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:06:18.054 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:06:18.055 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:06:18.055 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:06:18.055 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-10-29 00:06:18.063 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 7 条记录
2025-10-29 00:06:18.064 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:06:18.067 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:06:18.070 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:06:18.074 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:06:18.078 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:06:18.082 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:06:18.086 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:06:18.090 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:06:18.091 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:18.111 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-10-29 00:06:18.112 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:18.112 [http-nio-8080-exec-7] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-10-29 00:06:18.112 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-10-29 00:06:18.112 [http-nio-8080-exec-7] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-10-29 00:06:18.113 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:18.113 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-10-29 00:06:18.113 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:18.113 [http-nio-8080-exec-7] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-10-29 00:06:18.113 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-10-29 00:06:18.116 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:18.306 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-10-29 00:06:18.306 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:18.310 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:06:18.312 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-10-29 00:06:18.312 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-10-29 00:06:18.312 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:06:18.312 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:06:18.314 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:06:18.315 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:06:18.315 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:06:18.315 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-10-29 00:06:18.324 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 7 条记录
2025-10-29 00:06:18.325 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:06:18.329 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:06:18.331 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:06:18.336 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:06:18.338 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:06:18.342 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:06:18.346 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:06:18.349 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:06:18.349 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:22.630 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:06:22.630 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:22.632 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:22.635 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=] with attributes [permitAll]
2025-10-29 00:06:22.635 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:06:22.641 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.BookingController] - 管理员查询订单列表: page=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:06:22.641 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询所有订单: current=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:06:22.656 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 9 条记录
2025-10-29 00:06:22.656 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:06:22.661 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:06:22.666 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=28, orderNo=YX1761655600444402, roomId=1
2025-10-29 00:06:22.671 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=27, orderNo=YX17608493364647835, roomId=1
2025-10-29 00:06:22.674 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:06:22.679 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:06:22.684 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:06:22.687 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:06:22.690 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:06:22.694 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:06:22.694 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.BookingController] - 查询成功，返回 9 条记录，共 9 条
2025-10-29 00:06:22.695 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:26.262 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /admin/bookings/30/confirm
2025-10-29 00:06:26.262 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:26.264 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:26.268 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /admin/bookings/30/confirm] with attributes [permitAll]
2025-10-29 00:06:26.268 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /admin/bookings/30/confirm
2025-10-29 00:06:26.270 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.BookingController] - 管理员确认订单: id=30
2025-10-29 00:06:26.272 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 管理员确认订单: id=30
2025-10-29 00:06:26.285 [http-nio-8080-exec-5] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始更新填充...
2025-10-29 00:06:26.294 [http-nio-8080-exec-5] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始插入填充...
2025-10-29 00:06:26.298 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 订单确认成功，已创建消费交易记录: orderId=30, amount=258.00
2025-10-29 00:06:26.298 [http-nio-8080-exec-5] WARN  [com.yxly.service.impl.BookingOrderServiceImpl] - 订单缺少operatorId（房东/管理员），无法入账: orderId=30
2025-10-29 00:06:26.298 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 管理员确认订单成功: orderId=30
2025-10-29 00:06:26.303 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:26.314 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:06:26.314 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:26.319 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:26.324 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=] with attributes [permitAll]
2025-10-29 00:06:26.325 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:06:26.327 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.BookingController] - 管理员查询订单列表: page=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:06:26.327 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询所有订单: current=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:06:26.337 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 9 条记录
2025-10-29 00:06:26.337 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:06:26.343 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:06:26.348 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=28, orderNo=YX1761655600444402, roomId=1
2025-10-29 00:06:26.355 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=27, orderNo=YX17608493364647835, roomId=1
2025-10-29 00:06:26.362 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:06:26.367 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:06:26.371 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:06:26.375 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:06:26.378 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:06:26.383 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:06:26.383 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.BookingController] - 查询成功，返回 9 条记录，共 9 条
2025-10-29 00:06:26.385 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:29.086 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:06:29.086 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-10-29 00:06:29.087 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:06:29.087 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:29.087 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:29.087 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:29.089 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:29.089 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:29.090 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:29.094 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-10-29 00:06:29.095 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-10-29 00:06:29.095 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-10-29 00:06:29.095 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-10-29 00:06:29.095 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:06:29.095 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:06:29.095 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-10-29 00:06:29.095 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-10-29 00:06:29.097 [http-nio-8080-exec-10] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-10-29 00:06:29.097 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-10-29 00:06:29.100 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-10-29 00:06:29.104 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 1
2025-10-29 00:06:29.106 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-10-29 00:06:29.112 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 258.00
2025-10-29 00:06:29.120 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:06:29.120 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:06:29.123 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:06:29.124 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:06:29.124 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:06:29.125 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:29.127 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:29.130 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:32.105 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-10-29 00:06:32.105 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:32.109 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:32.112 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-10-29 00:06:32.112 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-10-29 00:06:32.114 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-10-29 00:06:32.114 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-10-29 00:06:32.117 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-10-29 00:06:32.120 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 1
2025-10-29 00:06:32.122 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-10-29 00:06:32.125 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 258.00
2025-10-29 00:06:32.129 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:06:32.129 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:06:32.130 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:06:32.131 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:06:32.131 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:06:32.135 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:32.223 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:06:32.223 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:32.225 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:32.227 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-10-29 00:06:32.227 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:06:32.228 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-10-29 00:06:32.240 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:06:32.240 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:32.244 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:32.244 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:32.246 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-10-29 00:06:32.246 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:06:32.248 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-10-29 00:06:32.264 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:33.978 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/customers?current=1&size=10
2025-10-29 00:06:33.979 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:33.980 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:33.983 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/customers?current=1&size=10] with attributes [authenticated]
2025-10-29 00:06:33.983 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/customers?current=1&size=10
2025-10-29 00:06:33.984 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.CustomerController] - 管理员查询客户列表: current=1, size=10, keyword=null
2025-10-29 00:06:33.986 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.CustomerServiceImpl] - 分页查询客户列表: current=1, size=10, keyword=null
2025-10-29 00:06:34.016 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.CustomerServiceImpl] - 查询到客户数量: 14
2025-10-29 00:06:34.019 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:35.030 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-10-29 00:06:35.030 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-10-29 00:06:35.030 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-10-29 00:06:35.030 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:35.030 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:35.030 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:35.032 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:35.032 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:35.032 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:35.037 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-10-29 00:06:35.037 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-10-29 00:06:35.037 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-10-29 00:06:35.037 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-10-29 00:06:35.037 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-10-29 00:06:35.037 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-10-29 00:06:35.056 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-10-29 00:06:35.056 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-10-29 00:06:35.058 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-10-29 00:06:35.056 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-10-29 00:06:35.058 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-10-29 00:06:35.058 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-10-29 00:06:35.060 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-10-29 00:06:35.065 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-10-29 00:06:35.068 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:35.070 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-10-29 00:06:35.070 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:35.075 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-10-29 00:06:35.076 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:35.495 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:06:35.495 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:35.498 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:35.502 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=] with attributes [permitAll]
2025-10-29 00:06:35.502 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:06:35.504 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.BookingController] - 管理员查询订单列表: page=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:06:35.504 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询所有订单: current=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:06:35.512 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 9 条记录
2025-10-29 00:06:35.514 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:06:35.520 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:06:35.525 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=28, orderNo=YX1761655600444402, roomId=1
2025-10-29 00:06:35.531 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=27, orderNo=YX17608493364647835, roomId=1
2025-10-29 00:06:35.536 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:06:35.541 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:06:35.545 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:06:35.549 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:06:35.552 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:06:35.557 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:06:35.557 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.BookingController] - 查询成功，返回 9 条记录，共 9 条
2025-10-29 00:06:35.559 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:37.238 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /admin/bookings/30/check-in
2025-10-29 00:06:37.238 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:37.240 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:37.243 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /admin/bookings/30/check-in] with attributes [permitAll]
2025-10-29 00:06:37.243 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /admin/bookings/30/check-in
2025-10-29 00:06:37.244 [http-nio-8080-exec-10] INFO  [com.yxly.controller.admin.BookingController] - 办理入住: id=30
2025-10-29 00:06:37.244 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 办理入住: id=30
2025-10-29 00:06:37.247 [http-nio-8080-exec-10] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始更新填充...
2025-10-29 00:06:37.248 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 办理入住成功: orderId=30
2025-10-29 00:06:37.250 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:37.572 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:06:37.572 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:37.573 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:37.578 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=] with attributes [permitAll]
2025-10-29 00:06:37.578 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:06:37.578 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.BookingController] - 管理员查询订单列表: page=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:06:37.578 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询所有订单: current=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:06:37.585 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 9 条记录
2025-10-29 00:06:37.585 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:06:37.591 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:06:37.597 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=28, orderNo=YX1761655600444402, roomId=1
2025-10-29 00:06:37.601 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=27, orderNo=YX17608493364647835, roomId=1
2025-10-29 00:06:37.605 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:06:37.609 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:06:37.613 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:06:37.616 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:06:37.620 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:06:37.624 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:06:37.624 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.BookingController] - 查询成功，返回 9 条记录，共 9 条
2025-10-29 00:06:37.625 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:39.504 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/customers?current=1&size=10
2025-10-29 00:06:39.504 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:39.506 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:39.510 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/customers?current=1&size=10] with attributes [authenticated]
2025-10-29 00:06:39.510 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/customers?current=1&size=10
2025-10-29 00:06:39.511 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.CustomerController] - 管理员查询客户列表: current=1, size=10, keyword=null
2025-10-29 00:06:39.511 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.CustomerServiceImpl] - 分页查询客户列表: current=1, size=10, keyword=null
2025-10-29 00:06:39.518 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.CustomerServiceImpl] - 查询到客户数量: 14
2025-10-29 00:06:39.521 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:40.494 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-10-29 00:06:40.494 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:40.497 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:40.500 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-10-29 00:06:40.502 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-10-29 00:06:40.502 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-10-29 00:06:40.502 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-10-29 00:06:40.506 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-10-29 00:06:40.508 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 1
2025-10-29 00:06:40.510 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-10-29 00:06:40.512 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 258.00
2025-10-29 00:06:40.514 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:06:40.515 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:06:40.516 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:06:40.517 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:06:40.517 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:06:40.520 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:40.804 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:06:40.804 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:06:40.804 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:40.804 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:40.806 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:40.806 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:40.809 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-10-29 00:06:40.809 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-10-29 00:06:40.809 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:06:40.810 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:06:40.810 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-10-29 00:06:40.810 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-10-29 00:06:40.825 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:40.826 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:41.640 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/customers?current=1&size=10
2025-10-29 00:06:41.641 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:41.642 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:41.646 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/customers?current=1&size=10] with attributes [authenticated]
2025-10-29 00:06:41.647 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/customers?current=1&size=10
2025-10-29 00:06:41.647 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.CustomerController] - 管理员查询客户列表: current=1, size=10, keyword=null
2025-10-29 00:06:41.648 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.CustomerServiceImpl] - 分页查询客户列表: current=1, size=10, keyword=null
2025-10-29 00:06:41.658 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.CustomerServiceImpl] - 查询到客户数量: 14
2025-10-29 00:06:41.660 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:42.073 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-10-29 00:06:42.073 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:42.074 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:42.078 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-10-29 00:06:42.078 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-10-29 00:06:42.080 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-10-29 00:06:42.080 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-10-29 00:06:42.080 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-10-29 00:06:42.082 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-10-29 00:06:42.086 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-10-29 00:06:42.089 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-10-29 00:06:42.090 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:42.386 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-10-29 00:06:42.386 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-10-29 00:06:42.386 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:42.386 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:42.388 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:42.388 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:42.390 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-10-29 00:06:42.390 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-10-29 00:06:42.390 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-10-29 00:06:42.390 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-10-29 00:06:42.390 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-10-29 00:06:42.390 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-10-29 00:06:42.392 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-10-29 00:06:42.392 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-10-29 00:06:42.396 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:42.399 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:43.439 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-10-29 00:06:43.441 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:43.444 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:43.447 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-10-29 00:06:43.448 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-10-29 00:06:43.448 [http-nio-8080-exec-10] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-10-29 00:06:43.448 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-10-29 00:06:43.450 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-10-29 00:06:43.453 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 1
2025-10-29 00:06:43.455 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-10-29 00:06:43.458 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 258.00
2025-10-29 00:06:43.461 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:06:43.461 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:06:43.462 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:06:43.462 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:06:43.462 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:06:43.467 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:43.747 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:06:43.747 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:06:43.747 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:43.747 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:43.749 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:43.749 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:43.753 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-10-29 00:06:43.753 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-10-29 00:06:43.753 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:06:43.753 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:06:43.754 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-10-29 00:06:43.754 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-10-29 00:06:43.771 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:43.773 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:45.767 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-10-29 00:06:45.768 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:45.772 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:45.776 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-10-29 00:06:45.776 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-10-29 00:06:45.777 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-10-29 00:06:45.777 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-10-29 00:06:45.781 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-10-29 00:06:45.784 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 1
2025-10-29 00:06:45.785 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-10-29 00:06:45.788 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 258.00
2025-10-29 00:06:45.791 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:06:45.792 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:06:45.793 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:06:45.796 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:06:45.796 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:06:45.801 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:45.993 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:06:45.993 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:06:45.993 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:45.993 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:06:45.995 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:45.995 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:06:45.998 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-10-29 00:06:45.998 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-10-29 00:06:45.998 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:06:45.998 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:06:46.000 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-10-29 00:06:46.000 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-10-29 00:06:46.017 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:06:46.020 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:08:39.302 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-29 00:08:39.316 [Thread-5] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-10-29 00:08:39.317 [Thread-5] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2025-10-29 00:08:39.328 [Thread-5] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-1330416146] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-10-29 00:08:39.328 [Thread-5] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-1330416146] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-10-29 00:08:39.341 [Thread-5] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closing ...
2025-10-29 00:08:39.344 [Thread-5] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closed
2025-10-29 00:08:39.409 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 25480 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-10-29 00:08:39.409 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-10-29 00:08:39.409 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-10-29 00:08:39.566 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-10-29 00:08:39.566 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-10-29 00:08:39.576 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-10-29 00:08:39.681 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-10-29 00:08:39.682 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-10-29 00:08:39.682 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-10-29 00:08:39.697 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-10-29 00:08:39.698 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 288 ms
2025-10-29 00:08:39.727 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-10-29 00:08:39.807 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-2} inited
2025-10-29 00:08:39.871 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-10-29 00:08:40.079 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-10-29 00:08:40.079 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-10-29 00:08:40.079 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-10-29 00:08:40.079 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-10-29 00:08:40.079 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-10-29 00:08:40.080 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-10-29 00:08:40.080 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-10-29 00:08:40.080 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-10-29 00:08:40.080 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-10-29 00:08:40.080 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-10-29 00:08:40.080 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-10-29 00:08:40.080 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-10-29 00:08:40.080 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-10-29 00:08:40.080 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-10-29 00:08:40.080 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-10-29 00:08:40.080 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-10-29 00:08:40.081 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-10-29 00:08:40.081 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-10-29 00:08:40.081 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-10-29 00:08:40.081 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-10-29 00:08:40.081 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-10-29 00:08:40.081 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-10-29 00:08:40.084 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@4209bc6c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7482cc57, org.springframework.security.web.context.SecurityContextPersistenceFilter@47dca6d7, org.springframework.security.web.header.HeaderWriterFilter@d2f2528, org.springframework.web.filter.CorsFilter@acde0ec, org.springframework.security.web.authentication.logout.LogoutFilter@24c563c0, com.yxly.security.JwtAuthenticationFilter@23aa909, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@554f23f3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@21bd4a17, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1caab153, org.springframework.security.web.session.SessionManagementFilter@34627ea6, org.springframework.security.web.access.ExceptionTranslationFilter@e238443, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6ebf19c7]
2025-10-29 00:08:40.279 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-10-29 00:08:40.302 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-10-29 00:08:40.305 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.922 seconds (JVM running for 192.543)
2025-10-29 00:08:40.308 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-10-29 00:09:00.508 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-29 00:09:00.518 [Thread-7] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-10-29 00:09:00.520 [Thread-7] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-71843404] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-10-29 00:09:00.520 [Thread-7] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-71843404] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-10-29 00:09:00.524 [Thread-7] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-2} closing ...
2025-10-29 00:09:00.526 [Thread-7] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-2} closed
2025-10-29 00:09:00.581 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 25480 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-10-29 00:09:00.582 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-10-29 00:09:00.582 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-10-29 00:09:00.728 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-10-29 00:09:00.728 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-10-29 00:09:00.740 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 11 ms. Found 0 Redis repository interfaces.
2025-10-29 00:09:00.829 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-10-29 00:09:00.829 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-10-29 00:09:00.829 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-10-29 00:09:00.845 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-10-29 00:09:00.845 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 262 ms
2025-10-29 00:09:00.872 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-10-29 00:09:00.942 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-3} inited
2025-10-29 00:09:01.003 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-10-29 00:09:01.179 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-10-29 00:09:01.180 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-10-29 00:09:01.180 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-10-29 00:09:01.180 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-10-29 00:09:01.180 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-10-29 00:09:01.181 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-10-29 00:09:01.183 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@11808f41, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5ee112a5, org.springframework.security.web.context.SecurityContextPersistenceFilter@251f71e2, org.springframework.security.web.header.HeaderWriterFilter@1bee4122, org.springframework.web.filter.CorsFilter@328f8396, org.springframework.security.web.authentication.logout.LogoutFilter@73ed1a55, com.yxly.security.JwtAuthenticationFilter@7b8bfa14, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7ab9c7f1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@13376ed5, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4d25a780, org.springframework.security.web.session.SessionManagementFilter@71a9f069, org.springframework.security.web.access.ExceptionTranslationFilter@4fe2137b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@38e8e7a0]
2025-10-29 00:09:01.334 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-10-29 00:09:01.350 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-10-29 00:09:01.354 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.793 seconds (JVM running for 213.591)
2025-10-29 00:09:01.354 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-10-29 00:15:26.691 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-29 00:15:26.704 [Thread-11] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-10-29 00:15:26.705 [Thread-11] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-1878193403] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-10-29 00:15:26.705 [Thread-11] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-1878193403] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-10-29 00:15:26.708 [Thread-11] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-3} closing ...
2025-10-29 00:15:26.711 [Thread-11] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-3} closed
2025-10-29 00:15:26.779 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 25480 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-10-29 00:15:26.779 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-10-29 00:15:26.779 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-10-29 00:15:26.923 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-10-29 00:15:26.924 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-10-29 00:15:26.934 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-10-29 00:15:27.025 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-10-29 00:15:27.026 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-10-29 00:15:27.026 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-10-29 00:15:27.041 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-10-29 00:15:27.041 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 259 ms
2025-10-29 00:15:27.069 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-10-29 00:15:27.141 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-4} inited
2025-10-29 00:15:27.201 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-10-29 00:15:27.384 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-10-29 00:15:27.384 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-10-29 00:15:27.385 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-10-29 00:15:27.385 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-10-29 00:15:27.385 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-10-29 00:15:27.385 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-10-29 00:15:27.386 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-10-29 00:15:27.386 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-10-29 00:15:27.386 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-10-29 00:15:27.386 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-10-29 00:15:27.386 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-10-29 00:15:27.386 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-10-29 00:15:27.386 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-10-29 00:15:27.386 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-10-29 00:15:27.386 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-10-29 00:15:27.386 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-10-29 00:15:27.386 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-10-29 00:15:27.387 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-10-29 00:15:27.387 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-10-29 00:15:27.387 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-10-29 00:15:27.387 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-10-29 00:15:27.387 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-10-29 00:15:27.389 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@241c013f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@50fd8da3, org.springframework.security.web.context.SecurityContextPersistenceFilter@3392feff, org.springframework.security.web.header.HeaderWriterFilter@251277d2, org.springframework.web.filter.CorsFilter@3c0b4288, org.springframework.security.web.authentication.logout.LogoutFilter@55adec4f, com.yxly.security.JwtAuthenticationFilter@a6d0b36, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@28f04eca, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1e6a10e1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@45179057, org.springframework.security.web.session.SessionManagementFilter@73338b4c, org.springframework.security.web.access.ExceptionTranslationFilter@33851f98, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4f66d07e]
2025-10-29 00:15:27.580 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-10-29 00:15:27.598 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-10-29 00:15:27.601 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.85 seconds (JVM running for 599.838)
2025-10-29 00:15:27.603 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-10-29 00:15:43.631 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-10-29 00:15:43.644 [Thread-15] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-10-29 00:15:43.647 [Thread-15] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-927565418] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-10-29 00:15:43.647 [Thread-15] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-927565418] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-10-29 00:15:43.651 [Thread-15] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-4} closing ...
2025-10-29 00:15:43.652 [Thread-15] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-4} closed
2025-10-29 00:15:43.718 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 25480 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-10-29 00:15:43.718 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-10-29 00:15:43.718 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-10-29 00:15:43.896 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-10-29 00:15:43.896 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-10-29 00:15:43.904 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-10-29 00:15:43.988 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-10-29 00:15:43.989 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-10-29 00:15:43.989 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-10-29 00:15:44.008 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-10-29 00:15:44.009 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 289 ms
2025-10-29 00:15:44.038 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-10-29 00:15:44.108 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-5} inited
2025-10-29 00:15:44.163 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-10-29 00:15:44.311 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-10-29 00:15:44.311 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-10-29 00:15:44.311 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-10-29 00:15:44.312 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-10-29 00:15:44.315 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@292bbe81, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@64293519, org.springframework.security.web.context.SecurityContextPersistenceFilter@7c86f695, org.springframework.security.web.header.HeaderWriterFilter@73689a15, org.springframework.web.filter.CorsFilter@21fb445f, org.springframework.security.web.authentication.logout.LogoutFilter@8beecd5, com.yxly.security.JwtAuthenticationFilter@4706e609, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@31f4e529, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6fb7930, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@49458354, org.springframework.security.web.session.SessionManagementFilter@29fd8091, org.springframework.security.web.access.ExceptionTranslationFilter@7367cb1f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@103f1d21]
2025-10-29 00:15:44.460 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-10-29 00:15:44.477 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-10-29 00:15:44.480 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.782 seconds (JVM running for 616.717)
2025-10-29 00:15:44.481 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-10-29 00:17:26.052 [http-nio-8080-exec-1] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-29 00:17:26.053 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-10-29 00:17:26.054 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-10-29 00:17:26.055 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/merchant/withdraw/my-records?current=1&size=10
2025-10-29 00:17:26.055 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:17:26.058 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:17:26.079 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/merchant/withdraw/my-records?current=1&size=10] with attributes [authenticated]
2025-10-29 00:17:26.079 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/merchant/withdraw/my-records?current=1&size=10
2025-10-29 00:17:26.082 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:17:26.082 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:17:26.084 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:17:26.085 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:17:26.085 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:17:26.085 [http-nio-8080-exec-1] INFO  [c.yxly.controller.merchant.WithdrawApplyController] - 民宿主查询自己的提现记录: userId=29, current=1, size=10
2025-10-29 00:17:26.088 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.WithdrawServiceImpl] - 查询用户提现记录: userId=29, current=1, size=10, status=null
2025-10-29 00:17:26.100 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:17:26.286 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:17:26.286 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:17:26.289 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:17:26.293 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=] with attributes [permitAll]
2025-10-29 00:17:26.294 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:17:26.296 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.BookingController] - 管理员查询订单列表: page=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:17:26.299 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询所有订单: current=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:17:26.309 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 9 条记录
2025-10-29 00:17:26.317 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:17:26.322 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:17:26.327 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=28, orderNo=YX1761655600444402, roomId=1
2025-10-29 00:17:26.330 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=27, orderNo=YX17608493364647835, roomId=1
2025-10-29 00:17:26.333 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:17:26.337 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:17:26.340 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:17:26.342 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:17:26.346 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:17:26.348 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:17:26.348 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.BookingController] - 查询成功，返回 9 条记录，共 9 条
2025-10-29 00:17:26.354 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:17:30.176 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-10-29 00:17:30.177 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:17:30.180 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:17:30.182 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-10-29 00:17:30.184 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-10-29 00:17:30.186 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:17:30.186 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:17:30.187 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:17:30.187 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:17:30.188 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:17:30.188 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-10-29 00:17:30.199 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 7 条记录
2025-10-29 00:17:30.199 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:17:30.204 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:17:30.208 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:17:30.211 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:17:30.214 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:17:30.218 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:17:30.225 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:17:30.233 [http-nio-8080-exec-3] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:17:30.236 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:17:30.265 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-10-29 00:17:30.265 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-10-29 00:17:30.266 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:17:30.266 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:17:30.266 [http-nio-8080-exec-4] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-10-29 00:17:30.266 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-10-29 00:17:30.267 [http-nio-8080-exec-4] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-10-29 00:17:30.267 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:17:30.268 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-10-29 00:17:30.269 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:17:30.270 [http-nio-8080-exec-4] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-10-29 00:17:30.271 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-10-29 00:17:30.271 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:17:30.276 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-10-29 00:17:30.276 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-10-29 00:17:30.278 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:17:30.278 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:17:30.279 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:17:30.280 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:17:30.282 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:17:30.282 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:17:30.284 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-10-29 00:17:30.291 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 7 条记录
2025-10-29 00:17:30.292 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:17:30.295 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:17:30.298 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:17:30.302 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:17:30.305 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:17:30.308 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:17:30.312 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:17:30.315 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:17:30.316 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:17:32.545 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/balance
2025-10-29 00:17:32.545 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/records?current=1&size=10
2025-10-29 00:17:32.545 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/withdraw/records?current=1&size=10
2025-10-29 00:17:32.546 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:17:32.546 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:17:32.546 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:17:32.548 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:17:32.548 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:17:32.548 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:17:32.552 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/records?current=1&size=10] with attributes [authenticated]
2025-10-29 00:17:32.552 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/records?current=1&size=10
2025-10-29 00:17:32.554 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/withdraw/records?current=1&size=10] with attributes [authenticated]
2025-10-29 00:17:32.554 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/withdraw/records?current=1&size=10
2025-10-29 00:17:32.554 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/balance] with attributes [authenticated]
2025-10-29 00:17:32.554 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:17:32.555 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:17:32.555 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:17:32.555 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/balance
2025-10-29 00:17:32.555 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:17:32.555 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:17:32.556 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:17:32.556 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:17:32.556 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:17:32.557 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:17:32.557 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:17:32.557 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:17:32.557 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:17:32.557 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:17:32.557 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:17:32.559 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:17:32.561 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RechargeServiceImpl] - 分页查询用户充值记录: current=1, size=10, userId=1
2025-10-29 00:17:32.561 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRechargeController] - 获取用户余额成功，用户ID: 1, 余额: 544.00
2025-10-29 00:17:32.562 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:17:32.570 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:17:32.572 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:17:32.800 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/financial-records/my?current=1&size=1000
2025-10-29 00:17:32.800 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:17:32.802 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:17:32.806 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/financial-records/my?current=1&size=1000] with attributes [authenticated]
2025-10-29 00:17:32.806 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/financial-records/my?current=1&size=1000
2025-10-29 00:17:32.809 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:17:32.810 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:17:32.812 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:17:32.812 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:17:32.813 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:17:32.813 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.FinancialRecordController] - 用户获取财务记录: userId=1, current=1, size=1000, category=null
2025-10-29 00:17:32.814 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.FinancialRecordServiceImpl] - 获取用户财务记录: userId=1, current=1, size=1000, category=null
2025-10-29 00:17:32.824 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.FinancialRecordServiceImpl] - 获取用户财务记录成功，共7条
2025-10-29 00:17:32.835 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:17:47.008 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-5} closing ...
2025-10-29 00:17:47.014 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-5} closed
2025-10-29 00:17:59.399 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 26720 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-10-29 00:17:59.401 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-10-29 00:17:59.402 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-10-29 00:17:59.453 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-10-29 00:17:59.454 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-10-29 00:17:59.967 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-10-29 00:17:59.969 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-10-29 00:17:59.990 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-10-29 00:18:00.832 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-10-29 00:18:00.839 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-10-29 00:18:00.839 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-10-29 00:18:00.902 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-10-29 00:18:00.903 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 1449 ms
2025-10-29 00:18:00.977 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-10-29 00:18:01.304 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-10-29 00:18:01.545 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-10-29 00:18:01.963 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-10-29 00:18:01.964 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-10-29 00:18:01.965 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-10-29 00:18:01.965 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-10-29 00:18:01.965 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-10-29 00:18:01.965 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-10-29 00:18:01.965 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-10-29 00:18:01.965 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-10-29 00:18:01.966 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-10-29 00:18:01.967 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-10-29 00:18:01.967 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-10-29 00:18:01.967 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-10-29 00:18:01.967 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-10-29 00:18:01.967 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-10-29 00:18:01.967 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-10-29 00:18:01.967 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-10-29 00:18:01.968 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-10-29 00:18:01.968 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-10-29 00:18:01.968 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-10-29 00:18:01.968 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-10-29 00:18:01.968 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-10-29 00:18:01.968 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-10-29 00:18:01.973 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6e682d4d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@97e2283, org.springframework.security.web.context.SecurityContextPersistenceFilter@70fce64d, org.springframework.security.web.header.HeaderWriterFilter@136ad997, org.springframework.web.filter.CorsFilter@2ad54b1, org.springframework.security.web.authentication.logout.LogoutFilter@2f29af9c, com.yxly.security.JwtAuthenticationFilter@671b67fb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@63c2058b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@cd4bf9d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4d16c323, org.springframework.security.web.session.SessionManagementFilter@48bf1abd, org.springframework.security.web.access.ExceptionTranslationFilter@41e7969a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@b359bc1]
2025-10-29 00:18:02.545 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-10-29 00:18:02.581 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-10-29 00:18:02.589 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 3.518 seconds (JVM running for 3.805)
2025-10-29 00:18:09.942 [http-nio-8080-exec-1] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-10-29 00:18:09.942 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-10-29 00:18:09.944 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 2 ms
2025-10-29 00:18:09.952 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-10-29 00:18:09.955 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:09.992 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:18:10.096 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-10-29 00:18:10.096 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-10-29 00:18:10.110 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-10-29 00:18:10.115 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-10-29 00:18:10.123 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-10-29 00:18:10.175 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:11.394 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-10-29 00:18:11.395 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-10-29 00:18:11.396 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:11.395 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-10-29 00:18:11.396 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:11.395 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:11.399 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:18:11.399 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:18:11.400 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:18:11.408 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-10-29 00:18:11.408 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-10-29 00:18:11.408 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-10-29 00:18:11.408 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-10-29 00:18:11.409 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-10-29 00:18:11.409 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-10-29 00:18:11.409 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-10-29 00:18:11.409 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-10-29 00:18:11.409 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-10-29 00:18:11.415 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-10-29 00:18:11.418 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-10-29 00:18:11.421 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:11.426 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-10-29 00:18:11.427 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-10-29 00:18:11.441 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:11.500 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-10-29 00:18:11.505 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:11.520 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-10-29 00:18:11.520 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:11.528 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:18:11.534 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-10-29 00:18:11.534 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-10-29 00:18:11.597 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:18:11.597 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:18:11.598 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:18:11.600 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:18:11.600 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:18:11.630 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:13.059 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-10-29 00:18:13.059 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:13.061 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:18:13.066 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-10-29 00:18:13.066 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-10-29 00:18:13.069 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-10-29 00:18:13.069 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-10-29 00:18:13.074 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:30.009 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/bookings
2025-10-29 00:18:30.009 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:30.011 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:18:30.015 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/bookings] with attributes [authenticated]
2025-10-29 00:18:30.015 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/bookings
2025-10-29 00:18:30.025 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:18:30.025 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:18:30.027 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:18:30.027 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:18:30.028 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:18:30.034 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 用户创建订单: userId=1, roomId=7
2025-10-29 00:18:30.042 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 房间可预订: roomId=7, checkIn=2025-10-28, checkOut=2025-10-29
2025-10-29 00:18:30.051 [http-nio-8080-exec-7] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始更新填充...
2025-10-29 00:18:30.057 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 用户余额扣款成功: userId=1, 扣款金额=88.00, 原余额=544.00, 新余额=456.00
2025-10-29 00:18:30.062 [http-nio-8080-exec-7] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始插入填充...
2025-10-29 00:18:30.070 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 订单创建成功: orderId=31, orderNo=YX17616683100571238, 支付金额=88.00，等待管理员确认后创建消费记录
2025-10-29 00:18:30.076 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:30.296 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-10-29 00:18:30.297 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:30.301 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:18:30.307 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-10-29 00:18:30.307 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-10-29 00:18:30.308 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:18:30.308 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:18:30.309 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:18:30.310 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:18:30.310 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:18:30.311 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-10-29 00:18:30.329 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-10-29 00:18:30.335 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-10-29 00:18:30.342 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:18:30.349 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:18:30.355 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:18:30.361 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:18:30.367 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:18:30.371 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:18:30.377 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:18:30.382 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:18:30.387 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:30.422 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-10-29 00:18:30.422 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:30.424 [http-nio-8080-exec-9] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-10-29 00:18:30.424 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-10-29 00:18:30.425 [http-nio-8080-exec-9] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-10-29 00:18:30.425 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:30.434 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-10-29 00:18:30.434 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:30.434 [http-nio-8080-exec-9] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-10-29 00:18:30.434 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-10-29 00:18:30.448 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:30.452 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-10-29 00:18:30.454 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:30.455 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-10-29 00:18:30.459 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-10-29 00:18:30.459 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-10-29 00:18:30.459 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:18:30.461 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:18:30.462 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:18:30.462 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-10-29 00:18:30.462 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-10-29 00:18:30.463 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-10-29 00:18:30.475 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-10-29 00:18:30.476 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-10-29 00:18:30.481 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:18:30.487 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:18:30.491 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:18:30.496 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:18:30.502 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:18:30.508 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:18:30.515 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:18:30.521 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:18:30.525 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:38.655 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:18:38.655 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:18:38.655 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-10-29 00:18:38.656 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:38.656 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:38.656 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:38.659 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:18:38.659 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:18:38.659 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:18:38.665 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-10-29 00:18:38.665 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-10-29 00:18:38.665 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-10-29 00:18:38.665 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:18:38.665 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-10-29 00:18:38.666 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:18:38.666 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-10-29 00:18:38.667 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-10-29 00:18:38.667 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-10-29 00:18:38.667 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-10-29 00:18:38.671 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-10-29 00:18:38.675 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 2
2025-10-29 00:18:38.678 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-10-29 00:18:38.684 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 346.00
2025-10-29 00:18:38.690 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:18:38.690 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:18:38.691 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:18:38.691 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:18:38.691 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:18:38.692 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:38.697 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:38.697 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:40.947 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/merchant/withdraw/my-records?current=1&size=10
2025-10-29 00:18:40.947 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:40.950 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:18:40.956 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/merchant/withdraw/my-records?current=1&size=10] with attributes [authenticated]
2025-10-29 00:18:40.956 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/merchant/withdraw/my-records?current=1&size=10
2025-10-29 00:18:40.958 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:18:40.959 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:18:40.960 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:18:40.961 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:18:40.961 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:18:40.961 [http-nio-8080-exec-5] INFO  [c.yxly.controller.merchant.WithdrawApplyController] - 民宿主查询自己的提现记录: userId=29, current=1, size=10
2025-10-29 00:18:40.964 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.WithdrawServiceImpl] - 查询用户提现记录: userId=29, current=1, size=10, status=null
2025-10-29 00:18:40.973 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:41.242 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:18:41.243 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:41.244 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:18:41.252 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=] with attributes [permitAll]
2025-10-29 00:18:41.252 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:18:41.260 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.BookingController] - 管理员查询订单列表: page=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:18:41.260 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询所有订单: current=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:18:41.268 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 10 条记录
2025-10-29 00:18:41.268 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-10-29 00:18:41.273 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:18:41.278 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:18:41.281 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=28, orderNo=YX1761655600444402, roomId=1
2025-10-29 00:18:41.285 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=27, orderNo=YX17608493364647835, roomId=1
2025-10-29 00:18:41.289 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:18:41.291 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:18:41.295 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:18:41.298 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:18:41.302 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:18:41.305 [http-nio-8080-exec-4] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:18:41.305 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.BookingController] - 查询成功，返回 10 条记录，共 10 条
2025-10-29 00:18:41.307 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:44.010 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /admin/bookings/30/check-out
2025-10-29 00:18:44.010 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:44.012 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:18:44.016 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /admin/bookings/30/check-out] with attributes [permitAll]
2025-10-29 00:18:44.016 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /admin/bookings/30/check-out
2025-10-29 00:18:44.017 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.BookingController] - 办理退房: id=30
2025-10-29 00:18:44.018 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 办理退房: id=30
2025-10-29 00:18:44.023 [http-nio-8080-exec-6] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始更新填充...
2025-10-29 00:18:44.025 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 办理退房成功: orderId=30，订单已完成
2025-10-29 00:18:44.028 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:18:44.035 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:18:44.036 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:18:44.039 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:18:44.045 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=] with attributes [permitAll]
2025-10-29 00:18:44.045 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:18:44.046 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.BookingController] - 管理员查询订单列表: page=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:18:44.046 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询所有订单: current=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:18:44.052 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 10 条记录
2025-10-29 00:18:44.052 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-10-29 00:18:44.058 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:18:44.061 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:18:44.065 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=28, orderNo=YX1761655600444402, roomId=1
2025-10-29 00:18:44.070 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=27, orderNo=YX17608493364647835, roomId=1
2025-10-29 00:18:44.074 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:18:44.078 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:18:44.084 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:18:44.089 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:18:44.093 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:18:44.098 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:18:44.098 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.BookingController] - 查询成功，返回 10 条记录，共 10 条
2025-10-29 00:18:44.101 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:20:01.029 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /admin/bookings/31/confirm
2025-10-29 00:20:01.029 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:20:01.034 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:20:01.044 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /admin/bookings/31/confirm] with attributes [permitAll]
2025-10-29 00:20:01.044 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /admin/bookings/31/confirm
2025-10-29 00:20:01.046 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.BookingController] - 管理员确认订单: id=31
2025-10-29 00:20:01.047 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 管理员确认订单: id=31
2025-10-29 00:20:01.051 [http-nio-8080-exec-8] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始更新填充...
2025-10-29 00:20:01.057 [http-nio-8080-exec-8] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始插入填充...
2025-10-29 00:20:01.061 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 订单确认成功，已创建消费交易记录: orderId=31, amount=88.00
2025-10-29 00:20:01.061 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:20:01.061 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:20:01.062 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:20:01.063 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:20:01.063 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:20:01.064 [http-nio-8080-exec-8] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始更新填充...
2025-10-29 00:20:01.066 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 订单缺少operatorId，已回填为当前确认人: orderId=31, adminUserId=29
2025-10-29 00:20:01.069 [http-nio-8080-exec-8] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始更新填充...
2025-10-29 00:20:01.072 [http-nio-8080-exec-8] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始插入填充...
2025-10-29 00:20:01.074 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 订单确认后结算成功: adminUserId=29, +88.00 => 90.00
2025-10-29 00:20:01.074 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 管理员确认订单成功: orderId=31
2025-10-29 00:20:01.079 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:20:01.275 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:20:01.275 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:20:01.277 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:20:01.279 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=] with attributes [permitAll]
2025-10-29 00:20:01.279 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /admin/bookings?page=1&size=10&orderNo=&customerName=&roomNumber=&status=
2025-10-29 00:20:01.280 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.BookingController] - 管理员查询订单列表: page=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:20:01.280 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询所有订单: current=1, size=10, orderNo=, customerName=, roomNumber=, status=null
2025-10-29 00:20:01.288 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 10 条记录
2025-10-29 00:20:01.288 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-10-29 00:20:01.292 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-10-29 00:20:01.295 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-10-29 00:20:01.297 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=28, orderNo=YX1761655600444402, roomId=1
2025-10-29 00:20:01.301 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=27, orderNo=YX17608493364647835, roomId=1
2025-10-29 00:20:01.304 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-10-29 00:20:01.307 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-10-29 00:20:01.309 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-10-29 00:20:01.314 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-10-29 00:20:01.316 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-10-29 00:20:01.320 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-10-29 00:20:01.320 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.BookingController] - 查询成功，返回 10 条记录，共 10 条
2025-10-29 00:20:01.321 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:20:02.830 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/customers?current=1&size=10
2025-10-29 00:20:02.830 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:20:02.832 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:20:02.839 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/customers?current=1&size=10] with attributes [authenticated]
2025-10-29 00:20:02.839 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/customers?current=1&size=10
2025-10-29 00:20:02.841 [http-nio-8080-exec-10] INFO  [com.yxly.controller.admin.CustomerController] - 管理员查询客户列表: current=1, size=10, keyword=null
2025-10-29 00:20:02.844 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.CustomerServiceImpl] - 分页查询客户列表: current=1, size=10, keyword=null
2025-10-29 00:20:02.874 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.CustomerServiceImpl] - 查询到客户数量: 14
2025-10-29 00:20:02.878 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:20:03.694 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-10-29 00:20:03.694 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:20:03.695 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:20:03.695 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:20:03.695 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:20:03.695 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:20:03.698 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:20:03.698 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:20:03.698 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:20:03.703 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-10-29 00:20:03.703 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:20:03.704 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-10-29 00:20:03.704 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-10-29 00:20:03.704 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-10-29 00:20:03.704 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-10-29 00:20:03.705 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-10-29 00:20:03.705 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-10-29 00:20:03.705 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-10-29 00:20:03.706 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-10-29 00:20:03.708 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-10-29 00:20:03.710 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 2
2025-10-29 00:20:03.714 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-10-29 00:20:03.716 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 346.00
2025-10-29 00:20:03.721 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:20:03.721 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:20:03.724 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:20:03.725 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:20:03.725 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:20:03.725 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:20:03.728 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:20:03.729 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:20:04.824 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-10-29 00:20:04.825 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-10-29 00:20:04.828 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-10-29 00:20:04.830 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-10-29 00:20:04.831 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-10-29 00:20:04.831 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-10-29 00:20:04.831 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-10-29 00:20:04.833 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-10-29 00:20:04.835 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 2
2025-10-29 00:20:04.837 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-10-29 00:20:04.840 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 346.00
2025-10-29 00:20:04.843 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-10-29 00:20:04.843 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-10-29 00:20:04.844 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-10-29 00:20:04.845 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-10-29 00:20:04.845 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-10-29 00:20:04.848 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-10-29 00:20:05.010 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-10-29 00:20:05.011 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
