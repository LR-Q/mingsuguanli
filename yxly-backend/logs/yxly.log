2025-11-26 10:19:36.433 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 2604 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-26 10:19:36.448 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-26 10:19:36.448 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-26 10:19:36.523 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-26 10:19:36.524 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-26 10:19:37.470 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-26 10:19:37.472 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-26 10:19:37.513 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 22 ms. Found 0 Redis repository interfaces.
2025-11-26 10:19:38.620 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-26 10:19:38.627 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-26 10:19:38.627 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-26 10:19:38.730 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-26 10:19:38.731 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 2206 ms
2025-11-26 10:19:38.828 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-26 10:19:39.459 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-11-26 10:19:39.903 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-26 10:19:40.720 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-26 10:19:40.720 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-26 10:19:40.720 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-26 10:19:40.721 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-26 10:19:40.721 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-26 10:19:40.721 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-26 10:19:40.721 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-26 10:19:40.721 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-26 10:19:40.721 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-26 10:19:40.722 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-26 10:19:40.722 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-26 10:19:40.722 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-26 10:19:40.722 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-26 10:19:40.722 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-26 10:19:40.722 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-26 10:19:40.722 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-26 10:19:40.723 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-26 10:19:40.723 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-26 10:19:40.723 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-26 10:19:40.723 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-26 10:19:40.723 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-26 10:19:40.723 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-26 10:19:40.730 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@58354a1c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4d9ea23c, org.springframework.security.web.context.SecurityContextPersistenceFilter@4a4dc533, org.springframework.security.web.header.HeaderWriterFilter@ab2bb72, org.springframework.web.filter.CorsFilter@5a89150f, org.springframework.security.web.authentication.logout.LogoutFilter@2ec8d193, com.yxly.security.JwtAuthenticationFilter@494af7ff, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@29edc71, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4ec8cbca, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@77562c72, org.springframework.security.web.session.SessionManagementFilter@103fd112, org.springframework.security.web.access.ExceptionTranslationFilter@2060cb1c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@74bd2488]
2025-11-26 10:19:41.827 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-26 10:19:41.884 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-26 10:19:41.896 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 5.959 seconds (JVM running for 6.602)
2025-11-26 10:21:50.098 [http-nio-8080-exec-1] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-26 10:21:50.098 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-26 10:21:50.099 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-11-26 10:21:50.112 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 10:21:50.115 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 10:21:50.170 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 10:21:50.333 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 10:21:50.333 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 10:21:50.348 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 10:21:50.354 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 10:21:50.365 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 10:21:50.431 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 10:22:01.216 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 10:22:01.216 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 10:22:01.219 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 10:22:01.225 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 10:22:01.226 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 10:22:01.226 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 10:22:01.226 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 10:22:01.232 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 10:22:01.235 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 10:22:01.296 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-26 10:22:01.297 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 10:22:01.303 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 10:22:01.308 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-26 10:22:01.308 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-26 10:22:01.308 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-26 10:22:01.313 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-26 10:22:01.334 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 10:22:01.420 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-26 10:22:01.420 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 10:22:01.423 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 10:22:01.428 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-26 10:22:01.428 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-26 10:22:01.442 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 10:22:01.442 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 10:22:01.528 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=8, records=6
2025-11-26 10:22:01.538 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 10:22:01.551 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-26 10:22:01.552 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 10:22:01.561 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 10:22:01.565 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-26 10:22:01.565 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-26 10:22:01.637 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-26 10:22:01.638 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-26 10:22:01.639 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-26 10:22:01.640 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-26 10:22:01.640 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-26 10:22:01.663 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 10:22:03.966 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 10:22:03.966 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 10:22:03.970 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 10:22:03.975 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 10:22:03.975 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 10:22:03.976 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 10:22:03.976 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 10:22:03.979 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 10:22:03.981 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 10:22:17.193 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 10:22:17.193 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-26 10:22:17.193 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 10:22:17.193 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 10:22:17.198 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 10:22:17.199 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 10:22:17.204 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 10:22:17.204 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 10:22:17.205 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 10:22:17.205 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 10:22:17.205 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-26 10:22:17.205 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-26 10:22:17.206 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-26 10:22:17.206 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-26 10:22:17.212 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 10:22:17.217 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 10:22:17.218 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 10:22:17.500 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-26 10:22:17.501 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 10:22:17.503 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 10:22:17.508 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-26 10:22:17.508 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-26 10:22:17.509 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 10:22:17.509 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 10:22:17.520 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=8, records=6
2025-11-26 10:22:17.521 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 10:22:17.531 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-26 10:22:17.531 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 10:22:17.536 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 10:22:17.539 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-26 10:22:17.539 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-26 10:22:17.541 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-26 10:22:17.541 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-26 10:22:17.542 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-26 10:22:17.543 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-26 10:22:17.544 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-26 10:22:17.553 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:23:57.766 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 16320 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-26 14:23:57.768 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-26 14:23:57.768 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-26 14:23:57.813 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-26 14:23:57.814 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-26 14:23:58.452 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-26 14:23:58.454 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-26 14:23:58.483 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
2025-11-26 14:23:59.206 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-26 14:23:59.217 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-26 14:23:59.218 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-26 14:23:59.293 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-26 14:23:59.293 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 1478 ms
2025-11-26 14:23:59.367 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-26 14:23:59.801 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-11-26 14:24:00.082 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-26 14:24:00.571 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-26 14:24:00.572 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-26 14:24:00.572 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-26 14:24:00.572 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-26 14:24:00.572 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-26 14:24:00.572 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-26 14:24:00.573 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-26 14:24:00.573 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-26 14:24:00.573 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-26 14:24:00.573 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-26 14:24:00.574 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-26 14:24:00.574 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-26 14:24:00.574 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-26 14:24:00.574 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-26 14:24:00.575 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-26 14:24:00.575 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-26 14:24:00.575 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-26 14:24:00.575 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-26 14:24:00.576 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-26 14:24:00.576 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-26 14:24:00.576 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-26 14:24:00.576 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-26 14:24:00.581 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@480b7ab5, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1978ff3e, org.springframework.security.web.context.SecurityContextPersistenceFilter@c7eed48, org.springframework.security.web.header.HeaderWriterFilter@31808bed, org.springframework.web.filter.CorsFilter@23713847, org.springframework.security.web.authentication.logout.LogoutFilter@189387cd, com.yxly.security.JwtAuthenticationFilter@622ba478, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1f39d6d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2dbddb46, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@606217d, org.springframework.security.web.session.SessionManagementFilter@5a9fff8c, org.springframework.security.web.access.ExceptionTranslationFilter@265a50e8, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@28f6894a]
2025-11-26 14:24:01.219 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-26 14:24:01.263 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-26 14:24:01.272 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 3.845 seconds (JVM running for 4.169)
2025-11-26 14:24:31.879 [http-nio-8080-exec-2] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-26 14:24:31.880 [http-nio-8080-exec-2] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-26 14:24:31.881 [http-nio-8080-exec-2] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-11-26 14:24:31.891 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:24:31.893 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:24:31.943 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:24:32.091 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:24:32.092 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:24:32.104 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:24:32.109 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:24:32.123 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:24:32.189 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:14.331 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:25:14.332 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:14.341 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:14.353 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:25:14.353 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:25:14.354 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:25:14.354 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:25:14.364 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:25:14.365 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-26 14:25:14.366 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:14.366 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:14.372 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:14.380 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-26 14:25:14.380 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-26 14:25:14.381 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-26 14:25:14.385 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-26 14:25:14.408 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:14.524 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-26 14:25:14.524 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:14.526 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:14.532 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-26 14:25:14.533 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-26 14:25:14.540 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:25:14.540 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:25:14.622 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=8, records=6
2025-11-26 14:25:14.629 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:14.642 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-26 14:25:14.642 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:14.653 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:14.658 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-26 14:25:14.660 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-26 14:25:14.726 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-26 14:25:14.726 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-26 14:25:14.727 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-26 14:25:14.729 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-26 14:25:14.729 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-26 14:25:14.754 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:15.457 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:25:15.458 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:15.460 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:15.467 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:25:15.467 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:25:15.467 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:25:15.468 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:25:15.471 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:25:15.473 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:24.085 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-26 14:25:24.085 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:25:24.085 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-26 14:25:24.085 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:24.086 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:24.086 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:24.088 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:24.089 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:24.089 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:24.095 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:25:24.095 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:25:24.096 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:25:24.096 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:25:24.101 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:25:24.103 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:24.110 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-26 14:25:24.110 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-26 14:25:24.110 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-26 14:25:24.110 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-26 14:25:24.110 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-26 14:25:24.110 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-26 14:25:24.112 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:25:24.112 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:25:24.122 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:24.125 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=8, records=6
2025-11-26 14:25:24.126 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:24.136 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-26 14:25:24.137 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:24.139 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:24.144 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-26 14:25:24.144 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-26 14:25:24.146 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-26 14:25:24.147 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-26 14:25:24.148 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-26 14:25:24.149 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-26 14:25:24.149 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-26 14:25:24.162 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:25.387 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:25:25.387 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:25.390 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:25.394 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:25:25.394 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:25:25.395 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:25:25.395 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:25:25.399 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:25:25.401 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:28.668 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:25:28.668 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:28.670 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:28.678 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:25:28.679 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:25:28.679 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:25:28.679 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:25:28.689 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:25:28.696 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:28.982 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-26 14:25:28.982 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:28.982 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-26 14:25:28.982 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:28.984 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:28.984 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:28.989 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-26 14:25:28.989 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-26 14:25:28.989 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-26 14:25:28.989 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-26 14:25:28.989 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-26 14:25:28.989 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-26 14:25:28.989 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:25:28.989 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:25:29.000 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:29.005 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=8, records=6
2025-11-26 14:25:29.009 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:29.019 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-26 14:25:29.019 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:29.021 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:29.025 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-26 14:25:29.025 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-26 14:25:29.027 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-26 14:25:29.027 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-26 14:25:29.028 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-26 14:25:29.029 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-26 14:25:29.029 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-26 14:25:29.040 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:25:31.096 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:25:31.098 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:25:31.101 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:25:31.107 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:25:31.107 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:25:31.107 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:25:31.107 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:25:31.110 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:25:31.112 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:26:16.253 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-26 14:26:16.253 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:26:16.253 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-26 14:26:16.254 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:26:16.254 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:26:16.254 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:26:16.258 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:26:16.258 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:26:16.258 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:26:16.263 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:26:16.263 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-26 14:26:16.263 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-26 14:26:16.263 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:26:16.263 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-26 14:26:16.263 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-26 14:26:16.263 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:26:16.263 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-26 14:26:16.265 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:26:16.265 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-26 14:26:16.265 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:26:16.265 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:26:16.268 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:26:16.271 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:26:16.271 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:26:16.276 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=8, records=6
2025-11-26 14:26:16.278 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:26:16.287 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-26 14:26:16.287 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:26:16.290 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:26:16.294 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-26 14:26:16.294 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-26 14:26:16.295 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-26 14:26:16.296 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-26 14:26:16.297 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-26 14:26:16.298 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-26 14:26:16.298 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-26 14:26:16.311 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:26:17.671 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:26:17.671 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:26:17.673 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:26:17.679 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:26:17.679 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:26:17.680 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:26:17.680 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:26:17.683 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:26:17.684 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:26:52.886 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-26 14:26:52.886 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-26 14:26:52.886 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:26:52.886 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:26:52.886 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:26:52.886 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:26:52.889 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:26:52.889 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:26:52.889 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:26:52.892 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:26:52.892 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-26 14:26:52.892 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-26 14:26:52.893 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:26:52.893 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-26 14:26:52.893 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-26 14:26:52.893 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:26:52.893 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-26 14:26:52.893 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:26:52.893 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-26 14:26:52.893 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:26:52.893 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:26:52.898 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:26:52.899 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:26:52.899 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:26:52.905 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=8, records=6
2025-11-26 14:26:52.906 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:26:52.916 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-26 14:26:52.916 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:26:52.919 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:26:52.923 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-26 14:26:52.925 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-26 14:26:52.925 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-26 14:26:52.926 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-26 14:26:52.928 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-26 14:26:52.929 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-26 14:26:52.929 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-26 14:26:52.941 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:26:54.656 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:26:54.656 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:26:54.659 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:26:54.664 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:26:54.664 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:26:54.665 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:26:54.665 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:26:54.670 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:26:54.672 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:28:16.585 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-26 14:28:16.585 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-26 14:28:16.585 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-26 14:28:16.585 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:28:16.585 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:28:16.585 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:28:16.588 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:28:16.588 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:28:16.588 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:28:16.594 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-26 14:28:16.594 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-26 14:28:16.594 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-26 14:28:16.594 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-26 14:28:16.594 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-26 14:28:16.594 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-26 14:28:16.596 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-26 14:28:16.596 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-26 14:28:16.596 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:28:16.596 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-26 14:28:16.596 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-26 14:28:16.596 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-26 14:28:16.600 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-26 14:28:16.602 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:28:16.603 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:28:16.605 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=8, records=6
2025-11-26 14:28:16.607 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:28:16.616 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-26 14:28:16.616 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-26 14:28:16.619 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-26 14:28:16.623 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-26 14:28:16.623 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-26 14:28:16.624 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-26 14:28:16.624 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-26 14:28:16.626 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-26 14:28:16.627 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-26 14:28:16.627 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-26 14:28:16.636 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-26 14:28:20.798 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
