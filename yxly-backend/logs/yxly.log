2025-11-03 17:09:55.701 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 27772 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:09:55.706 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:09:55.708 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:09:55.748 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 17:09:55.748 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 17:09:56.307 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:09:56.310 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:09:56.338 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
2025-11-03 17:09:57.056 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:09:57.065 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:09:57.065 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:09:57.145 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:09:57.145 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 1396 ms
2025-11-03 17:09:57.218 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:09:57.625 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-11-03 17:09:57.908 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:09:58.353 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:09:58.359 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:09:58.360 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:09:58.361 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:09:58.361 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:09:58.362 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:09:58.362 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:09:58.362 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:09:58.362 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:09:58.363 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:09:58.363 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:09:58.363 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:09:58.363 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:09:58.363 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:09:58.363 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:09:58.363 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:09:58.365 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:09:58.365 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:09:58.365 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:09:58.365 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:09:58.365 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:09:58.365 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:09:58.373 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@f8f10aa, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@604cea5a, org.springframework.security.web.context.SecurityContextPersistenceFilter@436b818a, org.springframework.security.web.header.HeaderWriterFilter@4ee6b66a, org.springframework.web.filter.CorsFilter@4813d6db, org.springframework.security.web.authentication.logout.LogoutFilter@53783041, com.yxly.security.JwtAuthenticationFilter@1f6d6691, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1f71db02, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3a260151, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@75635237, org.springframework.security.web.session.SessionManagementFilter@78905fa, org.springframework.security.web.access.ExceptionTranslationFilter@6c203837, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@35c1073f]
2025-11-03 17:09:59.031 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:09:59.072 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:09:59.082 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 3.673 seconds (JVM running for 3.965)
2025-11-03 17:10:18.882 [http-nio-8080-exec-1] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:10:18.882 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:10:18.883 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-11-03 17:10:18.891 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:10:18.893 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:10:18.897 [http-nio-8080-exec-1] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:10:18.902 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:10:18.902 [http-nio-8080-exec-1] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-11-03 17:10:18.903 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:10:18.904 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-11-03 17:10:18.904 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:10:18.904 [http-nio-8080-exec-1] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:10:18.905 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-11-03 17:10:18.959 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:10:43.681 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /v1/auth/login
2025-11-03 17:10:43.681 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:10:43.687 [http-nio-8080-exec-2] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:10:43.687 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /v1/auth/login] with attributes [permitAll]
2025-11-03 17:10:43.689 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /v1/auth/login
2025-11-03 17:10:43.782 [http-nio-8080-exec-2] INFO  [com.yxly.controller.auth.AuthController] - 用户登录请求: account=WYH, userType=user
2025-11-03 17:10:43.785 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户登录: WYH, 登录类型: user
2025-11-03 17:10:43.972 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.AuthServiceImpl] - 密码验证结果: true
2025-11-03 17:10:44.001 [http-nio-8080-exec-2] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始更新填充...
2025-11-03 17:10:44.025 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.AuthServiceImpl] - === 构建登录响应 ===
2025-11-03 17:10:44.025 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户ID: 3
2025-11-03 17:10:44.026 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户名: WYH
2025-11-03 17:10:44.026 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.AuthServiceImpl] - 真实姓名: 
2025-11-03 17:10:44.026 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.AuthServiceImpl] - 角色ID: 2
2025-11-03 17:10:44.026 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.AuthServiceImpl] - 角色代码: USER
2025-11-03 17:10:44.027 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.AuthServiceImpl] - 商户ID: null
2025-11-03 17:10:44.027 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.AuthServiceImpl] - ===================
2025-11-03 17:10:44.028 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户登录成功: WYH
2025-11-03 17:10:44.041 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:10:44.081 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:10:44.082 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:10:44.110 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:10:44.119 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:10:44.120 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:10:44.121 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:10:44.123 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:10:44.134 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:10:44.146 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:10:49.937 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:10:49.937 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:10:49.937 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:10:49.937 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:10:49.937 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:10:49.937 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:10:49.941 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:10:49.941 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:10:49.942 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:10:49.948 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:10:49.948 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:10:49.949 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:10:49.949 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:10:49.949 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:10:49.953 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:10:49.953 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:10:49.953 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:10:49.954 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:10:49.954 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:10:49.957 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:10:49.957 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:10:49.960 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:10:49.963 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:10:49.973 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:10:50.050 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:10:50.056 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:10:50.124 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:10:50.125 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:10:50.129 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:10:50.135 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:10:50.135 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:10:50.141 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:10:50.142 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:10:50.143 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:10:50.144 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:10:50.144 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:10:50.181 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:16.363 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /v1/auth/login
2025-11-03 17:12:16.363 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:16.364 [http-nio-8080-exec-8] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:12:16.364 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /v1/auth/login] with attributes [permitAll]
2025-11-03 17:12:16.364 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /v1/auth/login
2025-11-03 17:12:16.366 [http-nio-8080-exec-8] INFO  [com.yxly.controller.auth.AuthController] - 用户登录请求: account=XHH, userType=user
2025-11-03 17:12:16.366 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户登录: XHH, 登录类型: user
2025-11-03 17:12:16.450 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 密码验证结果: true
2025-11-03 17:12:16.457 [http-nio-8080-exec-8] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始更新填充...
2025-11-03 17:12:16.464 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - === 构建登录响应 ===
2025-11-03 17:12:16.464 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户ID: 29
2025-11-03 17:12:16.464 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户名: XHH
2025-11-03 17:12:16.464 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 真实姓名: 小灰灰
2025-11-03 17:12:16.464 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 角色ID: 1
2025-11-03 17:12:16.464 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 角色代码: HOMESTAY_ADMIN
2025-11-03 17:12:16.464 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 商户ID: 1
2025-11-03 17:12:16.465 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - ===================
2025-11-03 17:12:16.465 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户登录成功: XHH
2025-11-03 17:12:16.466 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:16.734 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 17:12:16.734 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-11-03 17:12:16.734 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:16.734 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:16.739 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:16.739 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:16.744 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-11-03 17:12:16.744 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-11-03 17:12:16.744 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 17:12:16.744 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-11-03 17:12:16.746 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-11-03 17:12:16.746 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-11-03 17:12:16.746 [http-nio-8080-exec-10] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-11-03 17:12:16.750 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-11-03 17:12:16.758 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 0
2025-11-03 17:12:16.763 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-11-03 17:12:16.767 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 0
2025-11-03 17:12:16.773 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:12:16.773 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:12:16.775 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:12:16.778 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-11-03 17:12:16.778 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-11-03 17:12:16.781 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:16.785 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:16.836 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 17:12:16.836 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:16.840 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:16.845 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-11-03 17:12:16.845 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 17:12:16.846 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-11-03 17:12:16.873 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:19.138 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 17:12:19.138 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 17:12:19.138 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 17:12:19.138 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:19.138 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:19.139 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:19.141 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:19.142 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:19.142 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:19.147 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 17:12:19.147 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 17:12:19.147 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 17:12:19.147 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 17:12:19.148 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-11-03 17:12:19.148 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 17:12:19.165 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 17:12:19.165 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 17:12:19.165 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 17:12:19.165 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 17:12:19.165 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 17:12:19.165 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 17:12:19.169 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 17:12:19.175 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:19.176 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 17:12:19.178 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:19.184 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 17:12:19.189 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 17:12:19.192 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:21.868 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 17:12:21.868 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 17:12:21.868 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/7
2025-11-03 17:12:21.868 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:21.868 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:21.868 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:21.872 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:21.873 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:21.873 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:21.881 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/7] with attributes [authenticated]
2025-11-03 17:12:21.881 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 17:12:21.881 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 17:12:21.882 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/7
2025-11-03 17:12:21.882 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 17:12:21.882 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 17:12:21.884 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 17:12:21.884 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 17:12:21.884 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 17:12:21.884 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 17:12:21.884 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 17:12:21.886 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.RoomController] - 查询房间详情: id=7
2025-11-03 17:12:21.887 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:12:21.888 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 17:12:21.893 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 17:12:21.893 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:21.897 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 17:12:21.899 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:21.899 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:22.465 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 17:12:22.465 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 17:12:22.465 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:22.465 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:22.465 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-11-03 17:12:22.465 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:22.469 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:22.469 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:22.469 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:22.474 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-11-03 17:12:22.474 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-11-03 17:12:22.474 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 17:12:22.474 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-11-03 17:12:22.475 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-11-03 17:12:22.475 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-11-03 17:12:22.475 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-11-03 17:12:22.475 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-11-03 17:12:22.475 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 17:12:22.475 [http-nio-8080-exec-10] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-11-03 17:12:22.478 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-11-03 17:12:22.481 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 0
2025-11-03 17:12:22.484 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-11-03 17:12:22.486 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 0
2025-11-03 17:12:22.491 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:12:22.491 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:12:22.492 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:12:22.493 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-11-03 17:12:22.494 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-11-03 17:12:22.497 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:22.497 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:22.498 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:24.790 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 17:12:24.790 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 17:12:24.790 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 17:12:24.790 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:24.790 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:24.790 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:24.795 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:24.795 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:24.795 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:24.800 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-11-03 17:12:24.800 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 17:12:24.800 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 17:12:24.800 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 17:12:24.800 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 17:12:24.800 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 17:12:24.801 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 17:12:24.801 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 17:12:24.801 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 17:12:24.801 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 17:12:24.801 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 17:12:24.804 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 17:12:24.804 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 17:12:24.809 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 17:12:24.811 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:24.814 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 17:12:24.818 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 17:12:24.821 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:24.825 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:26.525 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 17:12:26.525 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 17:12:26.526 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/7
2025-11-03 17:12:26.526 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:26.526 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:26.526 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:12:26.528 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:26.530 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:26.530 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:12:26.537 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 17:12:26.537 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 17:12:26.537 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 17:12:26.537 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/7] with attributes [authenticated]
2025-11-03 17:12:26.537 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 17:12:26.537 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/7
2025-11-03 17:12:26.537 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 17:12:26.538 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 17:12:26.538 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 17:12:26.538 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 17:12:26.538 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 17:12:26.538 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.RoomController] - 查询房间详情: id=7
2025-11-03 17:12:26.538 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:12:26.543 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 17:12:26.545 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:26.545 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:12:26.548 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 17:12:26.551 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 17:12:26.552 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:13:46.054 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:13:46.055 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:13:46.059 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:13:46.064 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:13:46.064 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:13:46.065 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:13:46.067 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:13:46.071 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:34.526 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:16:34.527 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:34.530 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:16:34.537 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:16:34.537 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:16:34.538 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:16:34.538 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:16:34.542 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:39.006 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:16:39.006 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:16:39.006 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:16:39.006 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:39.006 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:39.006 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:39.010 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:16:39.010 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:16:39.010 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:16:39.017 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:16:39.017 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:16:39.017 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:16:39.017 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:16:39.018 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:16:39.018 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:16:39.018 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:16:39.018 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:16:39.018 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:16:39.019 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:16:39.020 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:16:39.020 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:16:39.026 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:39.027 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:16:39.029 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:39.032 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:16:39.033 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:39.044 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:16:39.044 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:39.047 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:16:39.051 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:16:39.051 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:16:39.052 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:16:39.053 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:16:39.053 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:16:39.054 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:16:39.055 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:16:39.066 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:42.639 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 17:16:42.639 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 17:16:42.639 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 17:16:42.639 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:42.639 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:42.639 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:42.641 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:42.642 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:42.642 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:42.645 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 17:16:42.647 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 17:16:42.647 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 17:16:42.647 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 17:16:42.647 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-11-03 17:16:42.647 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 17:16:42.651 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 17:16:42.651 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 17:16:42.651 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 17:16:42.651 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 17:16:42.651 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 17:16:42.651 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 17:16:42.651 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 17:16:42.655 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 17:16:42.658 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:42.659 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 17:16:42.662 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:42.664 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 17:16:42.665 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:46.971 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 17:16:46.971 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/7
2025-11-03 17:16:46.971 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:46.971 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:46.975 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:46.975 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:46.981 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/7] with attributes [authenticated]
2025-11-03 17:16:46.981 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 17:16:46.981 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/7
2025-11-03 17:16:46.981 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 17:16:46.981 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 17:16:46.981 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 17:16:46.982 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.RoomController] - 查询房间详情: id=7
2025-11-03 17:16:46.982 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:16:46.987 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:46.988 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:47.588 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-11-03 17:16:47.588 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 17:16:47.589 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:47.589 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:47.589 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 17:16:47.589 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:47.591 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:47.591 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:47.591 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:47.597 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-11-03 17:16:47.597 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-11-03 17:16:47.597 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-11-03 17:16:47.597 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-11-03 17:16:47.597 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 17:16:47.597 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 17:16:47.597 [http-nio-8080-exec-10] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-11-03 17:16:47.597 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-11-03 17:16:47.597 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-11-03 17:16:47.597 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-11-03 17:16:47.599 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-11-03 17:16:47.601 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 0
2025-11-03 17:16:47.604 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-11-03 17:16:47.607 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 0
2025-11-03 17:16:47.611 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:16:47.611 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:16:47.614 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:16:47.616 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-11-03 17:16:47.616 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-11-03 17:16:47.619 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:47.619 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:47.619 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:50.526 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/customers?current=1&size=10
2025-11-03 17:16:50.527 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:50.529 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:50.532 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/customers?current=1&size=10] with attributes [authenticated]
2025-11-03 17:16:50.533 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/customers?current=1&size=10
2025-11-03 17:16:50.535 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.CustomerController] - 管理员查询客户列表: current=1, size=10, keyword=null
2025-11-03 17:16:50.537 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.CustomerServiceImpl] - 分页查询客户列表: current=1, size=10, keyword=null
2025-11-03 17:16:50.564 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.CustomerServiceImpl] - 查询到客户数量: 14
2025-11-03 17:16:50.567 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:53.107 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 17:16:53.107 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 17:16:53.108 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 17:16:53.108 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:53.108 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:53.108 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:53.112 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:53.112 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:53.112 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:53.118 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 17:16:53.118 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 17:16:53.118 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-11-03 17:16:53.118 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 17:16:53.118 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 17:16:53.118 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 17:16:53.119 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 17:16:53.119 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 17:16:53.119 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 17:16:53.120 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 17:16:53.120 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 17:16:53.120 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 17:16:53.120 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 17:16:53.124 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 17:16:53.127 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:53.128 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 17:16:53.132 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:53.134 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 17:16:53.135 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:56.206 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 17:16:56.206 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/7
2025-11-03 17:16:56.206 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:56.206 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:16:56.209 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:56.209 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 17:16:56.213 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/7] with attributes [authenticated]
2025-11-03 17:16:56.213 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 17:16:56.214 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/7
2025-11-03 17:16:56.214 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 17:16:56.214 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 17:16:56.214 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 17:16:56.214 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.RoomController] - 查询房间详情: id=7
2025-11-03 17:16:56.216 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:16:56.219 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:16:56.219 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:17:21.338 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:17:21.338 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:17:21.341 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:17:21.344 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:17:21.344 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:17:21.345 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:17:21.345 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:17:21.348 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:20:04.199 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:20:04.199 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:20:04.201 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:20:04.204 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:20:04.204 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:20:04.204 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:20:04.204 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:20:04.208 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:22:56.574 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:22:56.574 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:22:56.576 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:22:56.585 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:22:56.585 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:22:56.586 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:22:56.586 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:22:56.591 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:22:56.593 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:23:05.140 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:23:05.140 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:23:05.140 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:23:05.141 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:23:05.141 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:23:05.141 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:23:05.142 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:23:05.142 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:23:05.142 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:23:05.147 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:23:05.147 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:23:05.148 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:23:05.148 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:23:05.148 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:23:05.148 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:23:05.148 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:23:05.148 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:23:05.148 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:23:05.149 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:23:05.149 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:23:05.149 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:23:05.154 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:23:05.157 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:23:05.157 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:23:05.159 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:23:05.161 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:23:05.177 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:23:05.177 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:23:05.179 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:23:05.186 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:23:05.186 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:23:05.189 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:23:05.189 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:23:05.191 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:23:05.193 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:23:05.193 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:23:05.208 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:23:47.392 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:23:47.393 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:23:47.394 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:23:47.398 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:23:47.399 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:23:47.399 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:23:47.400 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:23:47.402 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:26:50.207 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:26:50.207 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:26:50.207 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:26:50.207 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:26:50.207 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:26:50.207 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:26:50.209 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:26:50.210 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:26:50.211 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:26:50.215 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:26:50.215 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:26:50.215 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:26:50.215 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:26:50.215 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:26:50.216 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:26:50.216 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:26:50.217 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:26:50.217 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:26:50.217 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:26:50.217 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:26:50.217 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:26:50.221 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:26:50.224 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:26:50.227 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:26:50.228 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:26:50.228 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:26:50.239 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:26:50.240 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:26:50.244 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:26:50.248 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:26:50.248 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:26:50.249 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:26:50.249 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:26:50.251 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:26:50.251 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:26:50.252 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:26:50.266 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:27:25.451 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:27:25.452 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:27:25.456 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:27:25.459 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:27:25.461 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:27:25.461 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:27:25.461 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:27:25.464 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:27:45.168 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-11-03 17:27:45.182 [Thread-5] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:27:45.183 [Thread-5] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2025-11-03 17:27:45.198 [Thread-5] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-593277052] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:27:45.198 [Thread-5] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-593277052] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:27:45.214 [Thread-5] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closing ...
2025-11-03 17:27:45.219 [Thread-5] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closed
2025-11-03 17:27:45.296 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 27772 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:27:45.296 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:27:45.296 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:27:45.473 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:27:45.473 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:27:45.483 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-11-03 17:27:45.589 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:27:45.589 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:27:45.589 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:27:45.605 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:27:45.606 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 309 ms
2025-11-03 17:27:45.634 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:27:45.722 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-2} inited
2025-11-03 17:27:45.792 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:27:46.036 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:27:46.036 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:27:46.036 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:27:46.036 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:27:46.036 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:27:46.036 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:27:46.036 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:27:46.036 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:27:46.036 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:27:46.036 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:27:46.038 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:27:46.040 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7ab13845, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1953c9a3, org.springframework.security.web.context.SecurityContextPersistenceFilter@452fb037, org.springframework.security.web.header.HeaderWriterFilter@61389922, org.springframework.web.filter.CorsFilter@61330874, org.springframework.security.web.authentication.logout.LogoutFilter@1a913dde, com.yxly.security.JwtAuthenticationFilter@6b032e9d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@78bf7eff, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5deb0943, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7d7175f7, org.springframework.security.web.session.SessionManagementFilter@73a18651, org.springframework.security.web.access.ExceptionTranslationFilter@17755b06, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2fa66f1a]
2025-11-03 17:27:46.232 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:27:46.259 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:27:46.262 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 1.0 seconds (JVM running for 1071.146)
2025-11-03 17:27:46.263 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:28:21.129 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-11-03 17:28:21.142 [Thread-7] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:28:21.143 [Thread-7] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-13247620] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:28:21.144 [Thread-7] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-13247620] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:28:21.148 [Thread-7] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-2} closing ...
2025-11-03 17:28:21.150 [Thread-7] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-2} closed
2025-11-03 17:28:21.221 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 27772 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:28:21.222 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:28:21.222 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:28:21.373 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:28:21.373 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:28:21.382 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-03 17:28:21.466 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:28:21.466 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:28:21.466 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:28:21.484 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:28:21.484 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 260 ms
2025-11-03 17:28:21.512 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:28:21.594 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-3} inited
2025-11-03 17:28:21.654 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:28:21.827 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:28:21.827 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:28:21.827 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:28:21.827 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:28:21.827 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:28:21.827 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:28:21.827 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:28:21.827 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:28:21.828 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:28:21.829 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:28:21.829 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:28:21.830 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2e8abf7, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@d63fa75, org.springframework.security.web.context.SecurityContextPersistenceFilter@28bd307d, org.springframework.security.web.header.HeaderWriterFilter@1873d038, org.springframework.web.filter.CorsFilter@160625fa, org.springframework.security.web.authentication.logout.LogoutFilter@2b416556, com.yxly.security.JwtAuthenticationFilter@1c5bcc54, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4fc4a9ce, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4930421e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@10bac4f8, org.springframework.security.web.session.SessionManagementFilter@756ad8f4, org.springframework.security.web.access.ExceptionTranslationFilter@3a8ba2b6, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@1632011b]
2025-11-03 17:28:22.026 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:28:22.043 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:28:22.045 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.851 seconds (JVM running for 1106.93)
2025-11-03 17:28:22.047 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:28:31.831 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-11-03 17:28:31.843 [Thread-11] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:28:31.845 [Thread-11] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-1071724972] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:28:31.846 [Thread-11] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-1071724972] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:28:31.849 [Thread-11] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-3} closing ...
2025-11-03 17:28:31.852 [Thread-11] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-3} closed
2025-11-03 17:28:31.914 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 27772 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:28:31.914 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:28:31.914 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:28:32.043 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:28:32.044 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:28:32.053 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 9 ms. Found 0 Redis repository interfaces.
2025-11-03 17:28:32.161 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:28:32.161 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:28:32.161 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:28:32.181 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:28:32.181 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 266 ms
2025-11-03 17:28:32.215 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:28:32.301 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-4} inited
2025-11-03 17:28:32.371 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:28:32.587 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:28:32.587 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:28:32.587 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:28:32.587 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:28:32.588 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:28:32.589 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:28:32.589 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:28:32.589 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:28:32.589 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:28:32.589 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:28:32.589 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:28:32.590 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5d1cb8af, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3061ba2a, org.springframework.security.web.context.SecurityContextPersistenceFilter@507da009, org.springframework.security.web.header.HeaderWriterFilter@31a76367, org.springframework.web.filter.CorsFilter@e2cca55, org.springframework.security.web.authentication.logout.LogoutFilter@6c9698c3, com.yxly.security.JwtAuthenticationFilter@3414c84, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@63ea518a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@695cbacb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6f3de06c, org.springframework.security.web.session.SessionManagementFilter@1625d2fa, org.springframework.security.web.access.ExceptionTranslationFilter@459ed743, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@2a697337]
2025-11-03 17:28:32.768 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:28:32.788 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:28:32.791 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.903 seconds (JVM running for 1117.674)
2025-11-03 17:28:32.792 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:28:42.578 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-11-03 17:28:42.590 [Thread-15] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:28:42.591 [Thread-15] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-1581649421] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:28:42.591 [Thread-15] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-1581649421] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:28:42.597 [Thread-15] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-4} closing ...
2025-11-03 17:28:42.600 [Thread-15] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-4} closed
2025-11-03 17:28:42.674 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 27772 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:28:42.674 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:28:42.674 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:28:42.812 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:28:42.812 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:28:42.821 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-03 17:28:42.903 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:28:42.904 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:28:42.904 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:28:42.921 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:28:42.921 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 246 ms
2025-11-03 17:28:42.951 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:28:43.028 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-5} inited
2025-11-03 17:28:43.087 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:28:43.247 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:28:43.247 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:28:43.247 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:28:43.247 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:28:43.247 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:28:43.248 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:28:43.250 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:28:43.250 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:28:43.250 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:28:43.250 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:28:43.251 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@71fafccd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3f51bee9, org.springframework.security.web.context.SecurityContextPersistenceFilter@c96aea3, org.springframework.security.web.header.HeaderWriterFilter@5fd82343, org.springframework.web.filter.CorsFilter@7fb234ad, org.springframework.security.web.authentication.logout.LogoutFilter@7fbc577e, com.yxly.security.JwtAuthenticationFilter@48413649, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@517a225e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4f26d109, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@760ffda, org.springframework.security.web.session.SessionManagementFilter@11531341, org.springframework.security.web.access.ExceptionTranslationFilter@4093a453, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@101d16ef]
2025-11-03 17:28:43.403 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:28:43.420 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:28:43.423 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.776 seconds (JVM running for 1128.307)
2025-11-03 17:28:43.425 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:28:54.730 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-11-03 17:28:54.741 [Thread-19] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:28:54.744 [Thread-19] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-509739363] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:28:54.744 [Thread-19] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-509739363] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:28:54.747 [Thread-19] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-5} closing ...
2025-11-03 17:28:54.748 [Thread-19] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-5} closed
2025-11-03 17:28:54.814 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 27772 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:28:54.815 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:28:54.815 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:28:54.945 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:28:54.945 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:28:54.953 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-03 17:28:55.037 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:28:55.038 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:28:55.038 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:28:55.053 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:28:55.054 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 238 ms
2025-11-03 17:28:55.081 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:28:55.152 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-6} inited
2025-11-03 17:28:55.209 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:28:55.367 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:28:55.367 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:28:55.367 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:28:55.367 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:28:55.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:28:55.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:28:55.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:28:55.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:28:55.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:28:55.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:28:55.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:28:55.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:28:55.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:28:55.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:28:55.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:28:55.369 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:28:55.369 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:28:55.369 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:28:55.369 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:28:55.369 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:28:55.369 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:28:55.369 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:28:55.370 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@63ad7ed2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@67734e72, org.springframework.security.web.context.SecurityContextPersistenceFilter@74b8bf13, org.springframework.security.web.header.HeaderWriterFilter@4cdf4a96, org.springframework.web.filter.CorsFilter@69658fa3, org.springframework.security.web.authentication.logout.LogoutFilter@1ea892ea, com.yxly.security.JwtAuthenticationFilter@2656dff8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5cb23bb0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6a0f414a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@714c1595, org.springframework.security.web.session.SessionManagementFilter@3c2f2791, org.springframework.security.web.access.ExceptionTranslationFilter@1a66489c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3a0446bc]
2025-11-03 17:28:55.533 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:28:55.547 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:28:55.550 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.754 seconds (JVM running for 1140.434)
2025-11-03 17:28:55.551 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:29:54.381 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-11-03 17:29:54.395 [Thread-23] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:29:54.397 [Thread-23] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-1728427957] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:29:54.397 [Thread-23] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-1728427957] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:29:54.402 [Thread-23] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-6} closing ...
2025-11-03 17:29:54.405 [Thread-23] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-6} closed
2025-11-03 17:29:54.478 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 27772 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:29:54.478 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:29:54.479 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:29:54.614 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:29:54.614 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:29:54.623 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-03 17:29:54.706 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:29:54.708 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:29:54.708 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:29:54.725 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:29:54.725 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 244 ms
2025-11-03 17:29:54.754 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:29:54.834 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-7} inited
2025-11-03 17:29:54.889 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:29:55.057 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:29:55.057 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:29:55.057 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:29:55.057 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:29:55.057 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:29:55.057 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:29:55.058 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:29:55.059 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:29:55.059 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:29:55.059 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:29:55.059 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:29:55.060 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@65bcc941, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5ae28b15, org.springframework.security.web.context.SecurityContextPersistenceFilter@15f4399e, org.springframework.security.web.header.HeaderWriterFilter@27553e47, org.springframework.web.filter.CorsFilter@488c18fc, org.springframework.security.web.authentication.logout.LogoutFilter@21a63ff4, com.yxly.security.JwtAuthenticationFilter@f1a3024, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a4d8c39, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@14642e31, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@38d12981, org.springframework.security.web.session.SessionManagementFilter@39370f14, org.springframework.security.web.access.ExceptionTranslationFilter@79bec118, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@66c2cde9]
2025-11-03 17:29:55.208 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:29:55.224 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:29:55.227 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.773 seconds (JVM running for 1200.111)
2025-11-03 17:29:55.228 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:30:17.683 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-11-03 17:30:17.698 [Thread-27] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:30:17.706 [Thread-27] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-1304089349] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:30:17.707 [Thread-27] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-1304089349] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:30:17.713 [Thread-27] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-7} closing ...
2025-11-03 17:30:17.715 [Thread-27] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-7} closed
2025-11-03 17:30:17.790 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 27772 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:30:17.791 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:30:17.791 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:30:17.925 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:30:17.925 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:30:17.933 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 7 ms. Found 0 Redis repository interfaces.
2025-11-03 17:30:18.015 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:30:18.015 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:30:18.016 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:30:18.032 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:30:18.032 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 240 ms
2025-11-03 17:30:18.061 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:30:18.146 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-8} inited
2025-11-03 17:30:18.209 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:30:18.368 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:30:18.369 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:30:18.369 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:30:18.369 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:30:18.370 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:30:18.370 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:30:18.370 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:30:18.370 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:30:18.370 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:30:18.370 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:30:18.370 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:30:18.370 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:30:18.370 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:30:18.370 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:30:18.370 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:30:18.371 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:30:18.371 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:30:18.371 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:30:18.371 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:30:18.371 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:30:18.371 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:30:18.371 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:30:18.372 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@502390e9, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@19e88f67, org.springframework.security.web.context.SecurityContextPersistenceFilter@4a7326da, org.springframework.security.web.header.HeaderWriterFilter@15bc09a2, org.springframework.web.filter.CorsFilter@6895dbef, org.springframework.security.web.authentication.logout.LogoutFilter@7d759628, com.yxly.security.JwtAuthenticationFilter@5891374b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4d15f098, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@38910181, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7c48cb67, org.springframework.security.web.session.SessionManagementFilter@16301a99, org.springframework.security.web.access.ExceptionTranslationFilter@290ae32, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4d6b345e]
2025-11-03 17:30:18.543 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:30:18.562 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:30:18.569 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.804 seconds (JVM running for 1223.453)
2025-11-03 17:30:18.570 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:31:18.393 [http-nio-8080-exec-1] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:31:18.393 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:31:18.394 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-11-03 17:31:18.394 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:31:18.394 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:31:18.397 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:31:18.407 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:31:18.407 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:31:18.408 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:31:18.410 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:31:18.419 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:31:56.627 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:31:56.627 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:31:56.628 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:31:56.633 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:31:56.634 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:31:56.634 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:31:56.634 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:31:56.638 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:31:56.897 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:31:56.898 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:31:56.899 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:31:56.904 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 17:31:56.904 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:31:56.907 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:31:56.908 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error?current=1&size=5
2025-11-03 17:31:56.908 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:31:56.908 [http-nio-8080-exec-3] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:31:56.908 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error?current=1&size=5
2025-11-03 17:31:56.910 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:31:57.136 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:31:57.136 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:31:57.136 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:31:57.136 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:31:57.137 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:31:57.137 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:31:57.138 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:31:57.138 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:31:57.138 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:31:57.140 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:31:57.140 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:31:57.140 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:31:57.142 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:31:57.142 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:31:57.142 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:31:57.142 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:31:57.142 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:31:57.142 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:31:57.142 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:31:57.144 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:31:57.144 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:31:57.147 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:31:57.153 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:31:57.154 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:31:57.155 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:31:57.156 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:31:57.183 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:31:57.183 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:31:57.184 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:31:57.186 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:31:57.186 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:31:57.191 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:31:57.191 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:31:57.192 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:31:57.193 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:31:57.193 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:31:57.206 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:33:12.344 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/search?current=1&size=6&locationId=10
2025-11-03 17:33:12.345 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:33:12.351 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:33:12.357 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/search?current=1&size=6&locationId=10] with attributes [permitAll]
2025-11-03 17:33:12.357 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/search?current=1&size=6&locationId=10
2025-11-03 17:33:12.358 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户搜索房间: locationId=10, checkIn=null, checkOut=null, guests=null, roomTypeId=null
2025-11-03 17:33:12.358 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=10, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:33:12.361 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=0, records=0
2025-11-03 17:33:12.362 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:34:11.131 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 7 class path changes (0 additions, 0 deletions, 7 modifications)
2025-11-03 17:34:11.145 [Thread-31] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:34:11.145 [Thread-31] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2025-11-03 17:34:11.147 [Thread-31] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-197332062] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:34:11.147 [Thread-31] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-197332062] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:34:11.154 [Thread-31] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-8} closing ...
2025-11-03 17:34:11.157 [Thread-31] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-8} closed
2025-11-03 17:34:11.254 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 27772 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:34:11.254 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:34:11.254 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:34:11.536 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:34:11.537 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:34:11.546 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-03 17:34:11.701 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:34:11.701 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:34:11.701 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:34:11.727 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:34:11.728 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 471 ms
2025-11-03 17:34:11.772 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:34:11.884 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-9} inited
2025-11-03 17:34:11.993 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:34:12.253 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:34:12.254 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:34:12.255 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:34:12.255 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:34:12.255 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:34:12.255 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:34:12.256 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:34:12.256 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:34:12.257 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:34:12.257 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:34:12.257 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:34:12.258 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:34:12.258 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:34:12.259 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:34:12.259 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:34:12.259 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:34:12.259 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:34:12.260 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:34:12.260 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:34:12.261 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:34:12.261 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:34:12.261 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:34:12.264 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@583772ed, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@175265c7, org.springframework.security.web.context.SecurityContextPersistenceFilter@55788008, org.springframework.security.web.header.HeaderWriterFilter@6832141e, org.springframework.web.filter.CorsFilter@3555dbb1, org.springframework.security.web.authentication.logout.LogoutFilter@223810b3, com.yxly.security.JwtAuthenticationFilter@154fb97f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3b63598a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4309281c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@470e7713, org.springframework.security.web.session.SessionManagementFilter@271af65a, org.springframework.security.web.access.ExceptionTranslationFilter@6181fe8b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@58754b9b]
2025-11-03 17:34:12.551 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:34:12.579 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:34:12.584 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 1.367 seconds (JVM running for 1457.468)
2025-11-03 17:34:12.586 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:35:04.699 [http-nio-8080-exec-3] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:35:04.699 [http-nio-8080-exec-3] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:35:04.700 [http-nio-8080-exec-3] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-11-03 17:35:04.700 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:35:04.700 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:35:04.700 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:04.700 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:35:04.700 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:04.701 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:04.705 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:04.705 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:04.705 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:04.715 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:35:04.715 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:35:04.715 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:35:04.715 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:35:04.715 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:35:04.715 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:35:04.716 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:35:04.716 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:35:04.718 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:35:04.720 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:35:04.720 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:35:04.720 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:35:04.723 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:35:04.730 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:35:04.735 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:04.735 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:04.735 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:04.759 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:35:04.759 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:04.761 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:04.764 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:35:04.764 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:35:04.768 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:35:04.769 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:35:04.769 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:35:04.770 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:35:04.770 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:35:04.784 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:06.147 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:35:06.147 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:06.149 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:06.153 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:35:06.153 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:35:06.154 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:35:06.155 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:35:06.158 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:06.164 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:35:06.165 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:06.167 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:06.171 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 17:35:06.171 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:35:06.173 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:06.173 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error?current=1&size=5
2025-11-03 17:35:06.174 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:06.174 [http-nio-8080-exec-6] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:35:06.174 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error?current=1&size=5
2025-11-03 17:35:06.176 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:06.428 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:35:06.428 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:35:06.428 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:35:06.429 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:06.429 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:06.429 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:06.430 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:06.430 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:06.430 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:06.434 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:35:06.434 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:35:06.434 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:35:06.434 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:35:06.434 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:35:06.434 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:35:06.434 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:35:06.434 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:35:06.435 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:35:06.435 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:35:06.435 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:35:06.435 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:35:06.440 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:35:06.441 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:06.442 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:06.446 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:35:06.447 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:06.457 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:35:06.458 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:06.459 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:06.464 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:35:06.464 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:35:06.465 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:35:06.465 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:35:06.466 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:35:06.466 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:35:06.466 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:35:06.476 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:10.218 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:35:10.219 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:10.221 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:10.225 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:35:10.225 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:35:10.226 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:35:10.226 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:35:10.230 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:10.234 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:35:10.234 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:10.237 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:10.241 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 17:35:10.241 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:35:10.243 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:10.243 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error?current=1&size=5
2025-11-03 17:35:10.243 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:10.243 [http-nio-8080-exec-3] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:35:10.243 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error?current=1&size=5
2025-11-03 17:35:10.245 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:10.631 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:35:10.631 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:35:10.632 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:10.632 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:10.633 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:35:10.633 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:10.634 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:10.635 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:10.637 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:10.641 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:35:10.641 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:35:10.641 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:35:10.641 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:35:10.642 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:35:10.642 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:35:10.642 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:35:10.642 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:35:10.643 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:35:10.643 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:35:10.645 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:35:10.645 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:35:10.651 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:35:10.652 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:10.656 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:35:10.658 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:10.659 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:10.669 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:35:10.670 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:35:10.672 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:35:10.678 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:35:10.678 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:35:10.679 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:35:10.679 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:35:10.680 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:35:10.682 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:35:10.682 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:35:10.691 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:35:17.746 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-9} closing ...
2025-11-03 17:35:17.750 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-9} closed
2025-11-03 17:36:59.829 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 8484 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:36:59.830 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:36:59.831 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:36:59.871 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 17:36:59.871 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 17:37:00.541 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:37:00.543 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:37:00.567 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
2025-11-03 17:37:01.204 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:37:01.211 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:37:01.211 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:37:01.281 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:37:01.282 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 1410 ms
2025-11-03 17:37:01.351 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:37:01.701 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-11-03 17:37:01.968 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:37:02.420 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:37:02.421 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:37:02.421 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:37:02.423 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:37:02.423 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:37:02.423 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:37:02.423 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:37:02.423 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:37:02.423 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:37:02.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:37:02.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:37:02.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:37:02.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:37:02.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:37:02.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:37:02.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:37:02.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:37:02.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:37:02.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:37:02.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:37:02.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:37:02.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:37:02.431 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2ba0d82b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@8c86739, org.springframework.security.web.context.SecurityContextPersistenceFilter@14a79a83, org.springframework.security.web.header.HeaderWriterFilter@27661941, org.springframework.web.filter.CorsFilter@6636f6a6, org.springframework.security.web.authentication.logout.LogoutFilter@159ff5cb, com.yxly.security.JwtAuthenticationFilter@3851cb3b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74917b7e, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@55185f0, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@43595e20, org.springframework.security.web.session.SessionManagementFilter@7272b715, org.springframework.security.web.access.ExceptionTranslationFilter@2d73f95a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4eeb0ac0]
2025-11-03 17:37:03.020 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:37:03.056 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:37:03.066 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 3.544 seconds (JVM running for 3.842)
2025-11-03 17:37:14.571 [http-nio-8080-exec-1] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:37:14.571 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:37:14.572 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-11-03 17:37:14.580 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:37:14.581 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:37:14.622 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:37:14.712 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:37:14.713 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:37:14.725 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:37:14.729 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:37:14.736 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:37:14.791 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:37:16.779 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:37:16.779 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:37:16.781 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:37:16.781 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:37:16.781 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:37:16.782 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:37:16.786 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:37:16.786 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:37:16.787 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:37:16.795 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:37:16.796 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:37:16.796 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:37:16.796 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:37:16.796 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:37:16.796 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:37:16.797 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:37:16.797 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:37:16.797 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:37:16.801 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:37:16.806 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:37:16.808 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:37:16.810 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:37:16.810 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:37:16.819 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:37:16.872 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:37:16.876 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:37:16.890 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:37:16.890 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:37:16.897 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:37:16.901 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:37:16.901 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:37:16.956 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:37:16.956 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:37:16.958 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:37:16.959 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:37:16.959 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:37:16.990 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:37:19.161 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:37:19.161 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:37:19.164 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:37:19.170 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:37:19.170 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:37:19.173 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:37:19.174 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:37:19.180 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:37:19.184 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:37:19.184 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:37:19.188 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:37:19.192 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 17:37:19.192 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:37:19.210 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:37:42.121 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closing ...
2025-11-03 17:37:42.126 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closed
2025-11-03 17:37:54.771 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 16556 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:37:54.773 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:37:54.774 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:37:54.812 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 17:37:54.812 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 17:37:55.336 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:37:55.338 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:37:55.359 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-11-03 17:37:56.000 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:37:56.024 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:37:56.024 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:37:56.108 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:37:56.108 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 1295 ms
2025-11-03 17:37:56.203 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:37:56.541 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-11-03 17:37:56.791 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:37:57.224 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:37:57.225 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:37:57.225 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:37:57.226 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:37:57.226 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:37:57.226 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:37:57.226 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:37:57.226 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:37:57.226 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:37:57.226 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:37:57.228 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:37:57.228 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:37:57.228 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:37:57.228 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:37:57.228 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:37:57.228 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:37:57.229 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:37:57.229 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:37:57.229 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:37:57.229 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:37:57.229 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:37:57.229 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:37:57.234 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5ab63ca, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6e751348, org.springframework.security.web.context.SecurityContextPersistenceFilter@73770153, org.springframework.security.web.header.HeaderWriterFilter@36565317, org.springframework.web.filter.CorsFilter@7c684ab6, org.springframework.security.web.authentication.logout.LogoutFilter@4f0ccbd3, com.yxly.security.JwtAuthenticationFilter@619cd454, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4edec20c, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@63bc5b04, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@579f0dd4, org.springframework.security.web.session.SessionManagementFilter@472ce07c, org.springframework.security.web.access.ExceptionTranslationFilter@4d424a45, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@53068943]
2025-11-03 17:37:57.816 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:37:57.853 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:37:57.863 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 3.379 seconds (JVM running for 3.672)
2025-11-03 17:38:03.332 [http-nio-8080-exec-2] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:38:03.332 [http-nio-8080-exec-2] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:38:03.333 [http-nio-8080-exec-2] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-11-03 17:38:03.341 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:38:03.343 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:38:03.383 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:38:03.479 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:38:03.479 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:38:03.490 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:38:03.493 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:38:03.501 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:38:03.549 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:38:07.002 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:38:07.003 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:38:07.003 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:38:07.003 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:38:07.003 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:38:07.003 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:38:07.008 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:38:07.008 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:38:07.010 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:38:07.016 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:38:07.018 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:38:07.018 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:38:07.019 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:38:07.019 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:38:07.019 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:38:07.019 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:38:07.020 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:38:07.020 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:38:07.025 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:38:07.030 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:38:07.034 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:38:07.039 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:38:07.039 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:38:07.059 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:38:07.114 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:38:07.119 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:38:07.133 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:38:07.133 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:38:07.149 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:38:07.157 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:38:07.158 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:38:07.235 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:38:07.235 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:38:07.236 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:38:07.237 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:38:07.238 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:38:07.261 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:38:08.354 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:38:08.354 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:38:08.356 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:38:08.362 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:38:08.362 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:38:08.364 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:38:08.365 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:38:08.369 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:38:08.376 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:38:08.376 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:38:08.379 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:38:08.383 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 17:38:08.383 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:38:08.400 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:02.036 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:39:02.036 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:39:02.036 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:39:02.036 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:02.036 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:02.036 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:02.038 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:02.040 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:02.040 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:02.045 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:39:02.045 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:39:02.046 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:39:02.046 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:39:02.046 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:39:02.046 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:39:02.047 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:39:02.047 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:39:02.047 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:39:02.047 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:39:02.047 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:39:02.047 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:39:02.054 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:39:02.056 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:02.056 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:02.060 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:39:02.062 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:02.073 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:39:02.073 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:02.076 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:02.080 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:39:02.080 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:39:02.081 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:39:02.081 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:39:02.083 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:39:02.083 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:39:02.083 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:39:02.094 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:04.271 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:39:04.272 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:04.274 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:04.280 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:39:04.280 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:39:04.281 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:39:04.281 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:39:04.287 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:04.290 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:39:04.291 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:04.293 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:04.297 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 17:39:04.298 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:39:04.308 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:17.356 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:39:17.357 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:39:17.357 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:39:17.357 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:17.357 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:17.357 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:17.362 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:17.363 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:17.363 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:17.370 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:39:17.372 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:39:17.372 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:39:17.372 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:39:17.372 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:39:17.372 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:39:17.373 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:39:17.373 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:39:17.377 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:39:17.377 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:39:17.379 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:39:17.379 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:39:17.380 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:39:17.381 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:17.390 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:39:17.391 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:17.395 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:17.404 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:39:17.405 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:17.407 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:17.415 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:39:17.415 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:39:17.416 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:39:17.416 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:39:17.417 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:39:17.419 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:39:17.419 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:39:17.435 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:23.859 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/records?current=1&size=10
2025-11-03 17:39:23.859 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/balance
2025-11-03 17:39:23.859 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/withdraw/records?current=1&size=10
2025-11-03 17:39:23.859 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:23.859 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/financial-records/my?current=1&size=1000
2025-11-03 17:39:23.859 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:23.859 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:23.859 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:23.863 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:23.863 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:23.863 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:23.863 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:23.867 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/records?current=1&size=10] with attributes [authenticated]
2025-11-03 17:39:23.867 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/withdraw/records?current=1&size=10] with attributes [authenticated]
2025-11-03 17:39:23.869 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/withdraw/records?current=1&size=10
2025-11-03 17:39:23.867 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/financial-records/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 17:39:23.869 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/records?current=1&size=10
2025-11-03 17:39:23.870 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/financial-records/my?current=1&size=1000
2025-11-03 17:39:23.870 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:39:23.871 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:39:23.871 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:39:23.871 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:39:23.877 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:39:23.877 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:39:23.878 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:39:23.879 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:39:23.879 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:39:23.882 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:39:23.882 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:39:23.882 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:39:23.883 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:39:23.883 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:39:23.883 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:39:23.884 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.FinancialRecordController] - 用户获取财务记录: userId=3, current=1, size=1000, category=null
2025-11-03 17:39:23.884 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.FinancialRecordServiceImpl] - 获取用户财务记录: userId=3, current=1, size=1000, category=null
2025-11-03 17:39:23.887 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/balance] with attributes [authenticated]
2025-11-03 17:39:23.887 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/balance
2025-11-03 17:39:23.888 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:39:23.888 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:39:23.888 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RechargeServiceImpl] - 分页查询用户充值记录: current=1, size=10, userId=3
2025-11-03 17:39:23.890 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:39:23.894 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:39:23.894 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:39:23.898 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.FinancialRecordServiceImpl] - 获取用户财务记录成功，共0条
2025-11-03 17:39:23.898 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRechargeController] - 获取用户余额成功，用户ID: 3, 余额: 0.00
2025-11-03 17:39:23.899 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:23.899 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:23.899 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:23.902 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:26.178 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/records?current=1&size=10
2025-11-03 17:39:26.178 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/balance
2025-11-03 17:39:26.178 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:26.178 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:26.180 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:26.180 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:26.187 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/records?current=1&size=10] with attributes [authenticated]
2025-11-03 17:39:26.187 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/balance] with attributes [authenticated]
2025-11-03 17:39:26.188 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/balance
2025-11-03 17:39:26.187 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/records?current=1&size=10
2025-11-03 17:39:26.189 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:39:26.189 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:39:26.189 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:39:26.189 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:39:26.191 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:39:26.191 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:39:26.193 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:39:26.193 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:39:26.193 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:39:26.193 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:39:26.194 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RechargeServiceImpl] - 分页查询用户充值记录: current=1, size=10, userId=3
2025-11-03 17:39:26.196 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRechargeController] - 获取用户余额成功，用户ID: 3, 余额: 0.00
2025-11-03 17:39:26.197 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:26.200 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:26.360 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/withdraw/records?current=1&size=10
2025-11-03 17:39:26.360 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/financial-records/my?current=1&size=1000
2025-11-03 17:39:26.360 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:26.360 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:26.362 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:26.362 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:26.366 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/financial-records/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 17:39:26.366 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/financial-records/my?current=1&size=1000
2025-11-03 17:39:26.366 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:39:26.366 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:39:26.368 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/withdraw/records?current=1&size=10] with attributes [authenticated]
2025-11-03 17:39:26.368 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/withdraw/records?current=1&size=10
2025-11-03 17:39:26.368 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:39:26.368 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:39:26.368 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:39:26.368 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:39:26.369 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:39:26.369 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:39:26.369 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.FinancialRecordController] - 用户获取财务记录: userId=3, current=1, size=1000, category=null
2025-11-03 17:39:26.369 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.FinancialRecordServiceImpl] - 获取用户财务记录: userId=3, current=1, size=1000, category=null
2025-11-03 17:39:26.369 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:39:26.369 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:39:26.376 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.FinancialRecordServiceImpl] - 获取用户财务记录成功，共0条
2025-11-03 17:39:26.378 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:26.378 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:39:28.331 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/favorites
2025-11-03 17:39:28.331 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:39:28.335 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:39:28.340 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/favorites] with attributes [authenticated]
2025-11-03 17:39:28.340 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/favorites
2025-11-03 17:39:28.341 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:39:28.341 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:39:28.342 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:39:28.343 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:39:28.343 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:39:28.348 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:40:01.843 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/favorites
2025-11-03 17:40:01.843 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:40:01.847 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:40:01.854 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/favorites] with attributes [authenticated]
2025-11-03 17:40:01.854 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/favorites
2025-11-03 17:40:01.855 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:40:01.855 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:40:01.857 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:40:01.858 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:40:01.858 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:40:01.861 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:17.631 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/favorites
2025-11-03 17:42:17.631 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:17.633 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:17.637 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/favorites] with attributes [authenticated]
2025-11-03 17:42:17.637 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/favorites
2025-11-03 17:42:17.638 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:42:17.638 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:42:17.639 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:42:17.639 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:42:17.639 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:42:17.643 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:18.962 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-11-03 17:42:18.963 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:18.965 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:18.970 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-11-03 17:42:18.971 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-11-03 17:42:18.972 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:42:18.972 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:42:18.972 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:42:18.973 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:42:18.973 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:42:18.977 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=3, current=1, size=10, status=null
2025-11-03 17:42:18.989 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 0 条记录
2025-11-03 17:42:18.989 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:42:18.991 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:18.996 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-11-03 17:42:18.996 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:18.997 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:19.001 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 17:42:19.001 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-11-03 17:42:19.001 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:42:19.001 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:42:19.002 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:42:19.004 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:42:19.004 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:42:19.004 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=3, current=1, size=1000, status=null
2025-11-03 17:42:19.007 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 0 条记录
2025-11-03 17:42:19.007 [http-nio-8080-exec-10] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:42:19.008 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:22.205 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/balance
2025-11-03 17:42:22.206 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:22.206 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/withdraw/records?current=1&size=10
2025-11-03 17:42:22.206 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/recharge/records?current=1&size=10
2025-11-03 17:42:22.206 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:22.206 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/user/financial-records/my?current=1&size=1000
2025-11-03 17:42:22.206 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:22.206 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:22.210 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:22.210 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:22.210 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:22.210 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:22.217 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/financial-records/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 17:42:22.217 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/financial-records/my?current=1&size=1000
2025-11-03 17:42:22.218 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/balance] with attributes [authenticated]
2025-11-03 17:42:22.218 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/records?current=1&size=10] with attributes [authenticated]
2025-11-03 17:42:22.218 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/balance
2025-11-03 17:42:22.218 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/user/recharge/withdraw/records?current=1&size=10] with attributes [authenticated]
2025-11-03 17:42:22.218 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:42:22.218 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/records?current=1&size=10
2025-11-03 17:42:22.218 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/user/recharge/withdraw/records?current=1&size=10
2025-11-03 17:42:22.218 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:42:22.219 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:42:22.219 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:42:22.219 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:42:22.219 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:42:22.219 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:42:22.219 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:42:22.220 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:42:22.220 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:42:22.220 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:42:22.220 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:42:22.222 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:42:22.222 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:42:22.222 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.FinancialRecordController] - 用户获取财务记录: userId=3, current=1, size=1000, category=null
2025-11-03 17:42:22.222 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.FinancialRecordServiceImpl] - 获取用户财务记录: userId=3, current=1, size=1000, category=null
2025-11-03 17:42:22.222 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:42:22.223 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:42:22.223 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:42:22.223 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:42:22.223 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:42:22.223 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:42:22.223 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RechargeServiceImpl] - 分页查询用户充值记录: current=1, size=10, userId=3
2025-11-03 17:42:22.226 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRechargeController] - 获取用户余额成功，用户ID: 3, 余额: 0.00
2025-11-03 17:42:22.227 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.FinancialRecordServiceImpl] - 获取用户财务记录成功，共0条
2025-11-03 17:42:22.228 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:22.228 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:22.228 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:22.228 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:22.567 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-11-03 17:42:22.568 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:22.572 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:22.578 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-11-03 17:42:22.578 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-11-03 17:42:22.578 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:42:22.578 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:42:22.579 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:42:22.580 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:42:22.580 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:42:22.581 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=3, current=1, size=10, status=null
2025-11-03 17:42:22.586 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 0 条记录
2025-11-03 17:42:22.586 [http-nio-8080-exec-5] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:42:22.587 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:22.592 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-11-03 17:42:22.592 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:22.593 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:22.596 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 17:42:22.598 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-11-03 17:42:22.598 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:42:22.598 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:42:22.599 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:42:22.600 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:42:22.600 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:42:22.600 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=3, current=1, size=1000, status=null
2025-11-03 17:42:22.604 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 0 条记录
2025-11-03 17:42:22.604 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:42:22.605 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:24.638 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:42:24.638 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:42:24.638 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:24.638 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:24.640 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:24.640 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:24.648 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:42:24.649 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:42:24.649 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:42:24.649 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:42:24.649 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:42:24.650 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:42:24.650 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:42:24.650 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:42:24.654 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:42:24.655 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:24.657 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:24.852 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:42:24.852 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:24.853 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:24.858 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:42:24.858 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:42:24.858 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:42:24.859 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:42:24.865 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:42:24.868 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:24.897 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:42:24.897 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:24.900 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:24.903 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:42:24.903 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:42:24.904 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:42:24.904 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:42:24.905 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:42:24.906 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:42:24.906 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:42:24.914 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:25.775 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:42:25.775 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:25.778 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:25.782 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:42:25.782 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:42:25.782 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:42:25.784 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:42:25.786 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:25.791 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:42:25.791 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:25.794 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:25.798 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 17:42:25.798 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:42:25.805 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:36.662 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:42:36.662 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:36.664 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:36.668 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:42:36.668 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:42:36.668 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:42:36.668 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:42:36.676 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:42:36.680 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:36.973 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:42:36.973 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:42:36.973 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:36.973 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:36.974 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:36.974 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:36.978 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:42:36.978 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:42:36.979 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:42:36.979 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:42:36.979 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:42:36.979 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:42:36.979 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:42:36.979 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:42:36.984 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:36.986 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:42:36.988 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:37.001 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:42:37.002 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:37.008 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:37.016 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:42:37.016 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:42:37.017 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:42:37.018 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:42:37.020 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:42:37.021 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 3
2025-11-03 17:42:37.022 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 3 ===
2025-11-03 17:42:37.037 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:38.760 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:42:38.762 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:38.764 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:38.767 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:42:38.767 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:42:38.767 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:42:38.767 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:42:38.771 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:38.773 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:42:38.775 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:38.777 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:38.779 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 17:42:38.779 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:42:38.785 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:49.469 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /v1/auth/logout
2025-11-03 17:42:49.469 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:49.471 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: WYH
2025-11-03 17:42:49.475 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /v1/auth/logout] with attributes [permitAll]
2025-11-03 17:42:49.475 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /v1/auth/logout
2025-11-03 17:42:49.483 [http-nio-8080-exec-2] INFO  [com.yxly.controller.auth.AuthController] - 用户登出
2025-11-03 17:42:49.485 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:49.861 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:42:49.861 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:49.861 [http-nio-8080-exec-10] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:42:49.861 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:42:49.862 [http-nio-8080-exec-10] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-11-03 17:42:49.862 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:49.866 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-11-03 17:42:49.867 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:49.867 [http-nio-8080-exec-10] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:42:49.867 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-11-03 17:42:49.881 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:57.534 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /v1/auth/login
2025-11-03 17:42:57.534 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:57.535 [http-nio-8080-exec-8] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:42:57.535 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /v1/auth/login] with attributes [permitAll]
2025-11-03 17:42:57.535 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /v1/auth/login
2025-11-03 17:42:57.541 [http-nio-8080-exec-8] INFO  [com.yxly.controller.auth.AuthController] - 用户登录请求: account=LLL, userType=user
2025-11-03 17:42:57.543 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户登录: LLL, 登录类型: user
2025-11-03 17:42:57.622 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 密码验证结果: true
2025-11-03 17:42:57.633 [http-nio-8080-exec-8] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始更新填充...
2025-11-03 17:42:57.642 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - === 构建登录响应 ===
2025-11-03 17:42:57.642 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户ID: 1
2025-11-03 17:42:57.642 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户名: LLL
2025-11-03 17:42:57.642 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 真实姓名: null
2025-11-03 17:42:57.643 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 角色ID: 2
2025-11-03 17:42:57.643 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 角色代码: USER
2025-11-03 17:42:57.643 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 商户ID: null
2025-11-03 17:42:57.643 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - ===================
2025-11-03 17:42:57.644 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.AuthServiceImpl] - 用户登录成功: LLL
2025-11-03 17:42:57.646 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:42:57.677 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:42:57.678 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:42:57.680 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:42:57.685 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:42:57.685 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:42:57.685 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:42:57.685 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:42:57.690 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:42:57.692 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:00.419 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:43:00.419 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:00.420 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:00.424 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:43:00.424 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:43:00.424 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:43:00.424 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:43:00.428 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:43:00.429 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:00.731 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:43:00.731 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:43:00.731 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:00.731 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:00.732 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:00.734 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:00.736 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:43:00.736 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:43:00.736 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:43:00.736 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:43:00.736 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:43:00.736 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:43:00.736 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:43:00.737 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:43:00.741 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:00.743 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:43:00.746 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:00.756 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:43:00.756 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:00.758 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:00.762 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:43:00.762 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:43:00.764 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:43:00.764 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:43:00.765 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:43:00.766 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:43:00.767 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:43:00.779 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:07.016 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-11-03 17:43:07.017 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:07.019 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:07.023 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-11-03 17:43:07.024 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-11-03 17:43:07.025 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:43:07.025 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:43:07.026 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:43:07.027 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:43:07.027 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:43:07.027 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-11-03 17:43:07.038 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:43:07.044 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:43:07.052 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:43:07.059 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:43:07.063 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:43:07.069 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:43:07.075 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:43:07.081 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:43:07.087 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:43:07.092 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:43:07.095 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:07.128 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-11-03 17:43:07.128 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:07.128 [http-nio-8080-exec-9] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:43:07.129 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-11-03 17:43:07.129 [http-nio-8080-exec-9] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-11-03 17:43:07.129 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:07.129 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-11-03 17:43:07.129 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:07.129 [http-nio-8080-exec-9] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:43:07.130 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-11-03 17:43:07.134 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:07.281 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-11-03 17:43:07.281 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:07.282 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:07.287 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 17:43:07.287 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-11-03 17:43:07.287 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:43:07.287 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:43:07.288 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:43:07.288 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:43:07.290 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:43:07.290 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-11-03 17:43:07.300 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:43:07.300 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:43:07.306 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:43:07.310 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:43:07.314 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:43:07.318 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:43:07.323 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:43:07.327 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:43:07.334 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:43:07.340 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:43:07.343 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:32.554 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:43:32.555 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:32.557 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:32.562 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:43:32.562 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:43:32.562 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:43:32.562 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:43:32.566 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:43:32.567 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:32.867 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:43:32.867 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:43:32.867 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:32.867 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:32.869 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:32.869 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:32.872 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:43:32.872 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:43:32.872 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:43:32.872 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:43:32.873 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:43:32.873 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:43:32.873 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:43:32.873 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:43:32.879 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:32.882 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:43:32.884 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:32.893 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:43:32.894 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:32.897 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:32.901 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:43:32.901 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:43:32.902 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:43:32.902 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:43:32.904 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:43:32.905 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:43:32.905 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:43:32.917 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:34.373 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:43:34.373 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:34.376 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:34.378 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:43:34.378 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:43:34.379 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:43:34.379 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:43:34.384 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:43:34.388 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:43:34.388 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:43:34.390 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:43:34.393 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 17:43:34.394 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:43:34.398 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:48:39.664 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-03 17:48:39.681 [Thread-5] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:48:39.681 [Thread-5] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Destroying Spring FrameworkServlet 'dispatcherServlet'
2025-11-03 17:48:39.693 [Thread-5] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-1523851887] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:48:39.693 [Thread-5] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-1523851887] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:48:39.705 [Thread-5] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closing ...
2025-11-03 17:48:39.711 [Thread-5] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closed
2025-11-03 17:48:39.776 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 16556 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:48:39.777 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:48:39.777 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:48:39.934 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:48:39.934 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:48:39.943 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-03 17:48:40.044 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:48:40.044 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:48:40.044 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:48:40.060 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:48:40.060 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 282 ms
2025-11-03 17:48:40.088 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:48:40.170 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-2} inited
2025-11-03 17:48:40.237 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:48:40.453 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:48:40.453 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:48:40.453 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:48:40.454 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:48:40.454 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:48:40.454 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:48:40.454 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:48:40.454 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:48:40.455 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:48:40.455 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:48:40.455 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:48:40.455 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:48:40.455 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:48:40.455 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:48:40.455 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:48:40.456 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:48:40.456 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:48:40.456 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:48:40.456 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:48:40.456 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:48:40.456 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:48:40.456 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:48:40.459 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1ff58dbd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7135b575, org.springframework.security.web.context.SecurityContextPersistenceFilter@63bf44eb, org.springframework.security.web.header.HeaderWriterFilter@47248971, org.springframework.web.filter.CorsFilter@66ed421e, org.springframework.security.web.authentication.logout.LogoutFilter@330cfe36, com.yxly.security.JwtAuthenticationFilter@470752c3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@333deae2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1b57ba19, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@289792a3, org.springframework.security.web.session.SessionManagementFilter@3b8f7a01, org.springframework.security.web.access.ExceptionTranslationFilter@2aeabd5d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6ff42808]
2025-11-03 17:48:40.651 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:48:40.677 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:48:40.682 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.932 seconds (JVM running for 646.491)
2025-11-03 17:48:40.684 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:48:47.304 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-03 17:48:47.316 [Thread-7] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:48:47.317 [Thread-7] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-2052369958] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:48:47.317 [Thread-7] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-2052369958] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:48:47.321 [Thread-7] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-2} closing ...
2025-11-03 17:48:47.324 [Thread-7] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-2} closed
2025-11-03 17:48:47.382 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 16556 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:48:47.383 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:48:47.383 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:48:47.518 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:48:47.518 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:48:47.527 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-03 17:48:47.608 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:48:47.608 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:48:47.609 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:48:47.626 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:48:47.627 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 243 ms
2025-11-03 17:48:47.655 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:48:47.729 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-3} inited
2025-11-03 17:48:47.786 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:48:47.992 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:48:47.993 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:48:47.993 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:48:47.993 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:48:47.993 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:48:47.993 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:48:47.993 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:48:47.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:48:47.997 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6c30eb13, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@201b297b, org.springframework.security.web.context.SecurityContextPersistenceFilter@3fbf8285, org.springframework.security.web.header.HeaderWriterFilter@6a7c1142, org.springframework.web.filter.CorsFilter@25081e1f, org.springframework.security.web.authentication.logout.LogoutFilter@24d11fdd, com.yxly.security.JwtAuthenticationFilter@5fddb088, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@68c234b, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@c70d4d9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@539ade8e, org.springframework.security.web.session.SessionManagementFilter@154fcda7, org.springframework.security.web.access.ExceptionTranslationFilter@492e0495, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@73e0b080]
2025-11-03 17:48:48.160 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:48:48.179 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:48:48.183 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.822 seconds (JVM running for 653.992)
2025-11-03 17:48:48.184 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:49:31.332 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-03 17:49:31.343 [Thread-11] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:49:31.345 [Thread-11] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-481846027] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:49:31.345 [Thread-11] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-481846027] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:49:31.349 [Thread-11] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-3} closing ...
2025-11-03 17:49:31.352 [Thread-11] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-3} closed
2025-11-03 17:49:31.407 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 16556 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:49:31.408 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:49:31.408 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:49:31.537 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:49:31.538 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:49:31.547 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 8 ms. Found 0 Redis repository interfaces.
2025-11-03 17:49:31.636 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:49:31.637 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:49:31.637 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:49:31.651 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:49:31.651 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 242 ms
2025-11-03 17:49:31.678 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:49:31.751 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-4} inited
2025-11-03 17:49:31.812 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:49:31.993 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:49:31.994 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:49:31.995 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:49:31.995 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:49:31.995 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:49:31.995 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:49:31.995 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:49:31.995 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:49:31.995 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:49:31.995 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:49:31.996 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7ddd439d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4f19d23, org.springframework.security.web.context.SecurityContextPersistenceFilter@38eaea0a, org.springframework.security.web.header.HeaderWriterFilter@1ba58830, org.springframework.web.filter.CorsFilter@23fe04f2, org.springframework.security.web.authentication.logout.LogoutFilter@61818174, com.yxly.security.JwtAuthenticationFilter@55c41220, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@20ce71ce, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@179d99ef, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@55a9b78f, org.springframework.security.web.session.SessionManagementFilter@694e13d9, org.springframework.security.web.access.ExceptionTranslationFilter@437b78e9, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@5f953694]
2025-11-03 17:49:32.152 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:49:32.170 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:49:32.173 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.784 seconds (JVM running for 697.982)
2025-11-03 17:49:32.174 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:49:42.998 [File Watcher] INFO  [o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener] - Restarting due to 3 class path changes (0 additions, 0 deletions, 3 modifications)
2025-11-03 17:49:43.010 [Thread-15] INFO  [org.apache.catalina.core.StandardService] - Stopping service [Tomcat]
2025-11-03 17:49:43.012 [Thread-15] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Create-1778248744] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/jdk.internal.misc.Unsafe.park(Native Method)
 java.base@17.0.12/java.util.concurrent.locks.LockSupport.park(LockSupport.java:341)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionNode.block(AbstractQueuedSynchronizer.java:506)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.unmanagedBlock(ForkJoinPool.java:3465)
 java.base@17.0.12/java.util.concurrent.ForkJoinPool.managedBlock(ForkJoinPool.java:3436)
 java.base@17.0.12/java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:1623)
 app//com.alibaba.druid.pool.DruidDataSource$CreateConnectionThread.run(DruidDataSource.java:2921)
2025-11-03 17:49:43.012 [Thread-15] WARN  [org.apache.catalina.loader.WebappClassLoaderBase] - The web application [api] appears to have started a thread named [Druid-ConnectionPool-Destroy-1778248744] but has failed to stop it. This is very likely to create a memory leak. Stack trace of thread:
 java.base@17.0.12/java.lang.Thread.sleep(Native Method)
 app//com.alibaba.druid.pool.DruidDataSource$DestroyConnectionThread.run(DruidDataSource.java:3020)
2025-11-03 17:49:43.015 [Thread-15] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-4} closing ...
2025-11-03 17:49:43.017 [Thread-15] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-4} closed
2025-11-03 17:49:43.072 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 16556 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:49:43.072 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:49:43.072 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:49:43.212 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:49:43.212 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:49:43.225 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 12 ms. Found 0 Redis repository interfaces.
2025-11-03 17:49:43.299 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:49:43.300 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:49:43.300 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:49:43.316 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:49:43.316 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 242 ms
2025-11-03 17:49:43.341 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:49:43.421 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-5} inited
2025-11-03 17:49:43.473 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:49:43.645 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:49:43.645 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:49:43.645 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:49:43.645 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:49:43.646 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:49:43.647 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:49:43.647 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:49:43.647 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:49:43.647 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:49:43.647 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:49:43.648 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@48e4e54e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2adc8af0, org.springframework.security.web.context.SecurityContextPersistenceFilter@131de1b7, org.springframework.security.web.header.HeaderWriterFilter@3389c3a3, org.springframework.web.filter.CorsFilter@4fdb021b, org.springframework.security.web.authentication.logout.LogoutFilter@5ce4ef5b, com.yxly.security.JwtAuthenticationFilter@53c07deb, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@64996c20, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@19702fcb, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2685b81c, org.springframework.security.web.session.SessionManagementFilter@70b92f0e, org.springframework.security.web.access.ExceptionTranslationFilter@4e173c88, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4f94d468]
2025-11-03 17:49:43.799 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:49:43.817 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:49:43.819 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 0.764 seconds (JVM running for 709.628)
2025-11-03 17:49:43.820 [restartedMain] INFO  [o.s.b.d.a.ConditionEvaluationDeltaLoggingListener] - Condition evaluation unchanged
2025-11-03 17:52:19.731 [http-nio-8080-exec-3] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:52:19.732 [http-nio-8080-exec-3] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:52:19.734 [http-nio-8080-exec-3] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 2 ms
2025-11-03 17:52:19.734 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:52:19.734 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:52:19.737 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:52:19.747 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:52:19.747 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:52:19.750 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:52:19.752 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:52:19.763 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:52:19.768 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:52:19.768 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:52:19.769 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:52:19.774 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 17:52:19.774 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:52:19.792 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:52:46.218 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-5} closing ...
2025-11-03 17:52:46.221 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-5} closed
2025-11-03 17:52:57.412 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 28608 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:52:57.413 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:52:57.414 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:52:57.459 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 17:52:57.459 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 17:52:58.045 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:52:58.062 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:52:58.098 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 17 ms. Found 0 Redis repository interfaces.
2025-11-03 17:52:58.741 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:52:58.749 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:52:58.749 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:52:58.815 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:52:58.815 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 1355 ms
2025-11-03 17:52:58.884 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:52:59.220 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-11-03 17:52:59.474 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:52:59.927 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:52:59.928 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:52:59.928 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:52:59.928 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:52:59.928 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:52:59.928 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:52:59.928 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:52:59.928 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:52:59.929 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:52:59.929 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:52:59.929 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:52:59.929 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:52:59.929 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:52:59.929 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:52:59.930 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:52:59.930 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:52:59.930 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:52:59.930 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:52:59.930 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:52:59.930 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:52:59.930 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:52:59.931 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:52:59.936 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@35369f11, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@356d8773, org.springframework.security.web.context.SecurityContextPersistenceFilter@7b07d08f, org.springframework.security.web.header.HeaderWriterFilter@334164c4, org.springframework.web.filter.CorsFilter@598ed206, org.springframework.security.web.authentication.logout.LogoutFilter@69ac851c, com.yxly.security.JwtAuthenticationFilter@2c835a32, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3e012047, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6ee1e94f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3aaf4743, org.springframework.security.web.session.SessionManagementFilter@581fe342, org.springframework.security.web.access.ExceptionTranslationFilter@4082aa23, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4fd47e87]
2025-11-03 17:53:00.527 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:53:00.562 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:53:00.571 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 3.467 seconds (JVM running for 3.76)
2025-11-03 17:53:28.073 [http-nio-8080-exec-1] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:53:28.074 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:53:28.075 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-11-03 17:53:28.081 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:53:28.084 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:53:28.120 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:53:28.202 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:53:28.202 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:53:28.212 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:53:28.216 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:53:28.222 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:53:28.267 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:53:59.894 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:53:59.894 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:53:59.894 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:53:59.895 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:53:59.895 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:53:59.895 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:53:59.901 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:53:59.901 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:53:59.902 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:53:59.908 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:53:59.908 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:53:59.909 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:53:59.913 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:53:59.920 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:53:59.920 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:53:59.920 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:53:59.920 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:53:59.921 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:53:59.921 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:53:59.929 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:53:59.933 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:53:59.935 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:53:59.936 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:53:59.938 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:00.006 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:54:00.014 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:00.104 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:54:00.104 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:00.112 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:00.115 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:54:00.116 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:54:00.171 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:54:00.171 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:54:00.173 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:54:00.173 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:54:00.174 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:54:00.200 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:02.003 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-11-03 17:54:02.004 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:02.012 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:02.021 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-11-03 17:54:02.021 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-11-03 17:54:02.022 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:54:02.022 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:54:02.024 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:54:02.026 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:54:02.027 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:54:02.029 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-11-03 17:54:02.046 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:54:02.049 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:54:02.055 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:54:02.060 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:54:02.066 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:54:02.070 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:54:02.076 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:54:02.081 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:54:02.085 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:54:02.090 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:54:02.096 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:02.134 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-11-03 17:54:02.134 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-11-03 17:54:02.134 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:02.134 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:02.134 [http-nio-8080-exec-4] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:54:02.135 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-11-03 17:54:02.136 [http-nio-8080-exec-4] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-11-03 17:54:02.136 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:02.137 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:02.137 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-11-03 17:54:02.138 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:02.138 [http-nio-8080-exec-4] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:54:02.138 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-11-03 17:54:02.142 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 17:54:02.142 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-11-03 17:54:02.143 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:54:02.144 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:54:02.146 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:54:02.147 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:54:02.148 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:54:02.148 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-11-03 17:54:02.151 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:02.165 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:54:02.165 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:54:02.171 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:54:02.176 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:54:02.182 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:54:02.187 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:54:02.192 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:54:02.195 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:54:02.202 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:54:02.208 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:54:02.213 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:21.272 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:21.273 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:21.276 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:21.282 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:21.282 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:21.324 [http-nio-8080-exec-10] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:21.327 [http-nio-8080-exec-10] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:21.327 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:24.235 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:24.236 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:24.237 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:24.242 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:24.242 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:24.243 [http-nio-8080-exec-9] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:24.244 [http-nio-8080-exec-9] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:24.245 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:25.074 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:25.075 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:25.077 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:25.081 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:25.082 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:25.083 [http-nio-8080-exec-1] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:25.083 [http-nio-8080-exec-1] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:25.084 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:25.582 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:25.582 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:25.584 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:25.588 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:25.588 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:25.589 [http-nio-8080-exec-3] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:25.590 [http-nio-8080-exec-3] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:25.590 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:25.846 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:25.846 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:25.848 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:25.853 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:25.853 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:25.857 [http-nio-8080-exec-2] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:25.860 [http-nio-8080-exec-2] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:25.861 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:25.924 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:25.924 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:25.926 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:25.930 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:25.930 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:25.931 [http-nio-8080-exec-5] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:25.932 [http-nio-8080-exec-5] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:25.934 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:26.094 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:26.094 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:26.096 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:26.100 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:26.100 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:26.102 [http-nio-8080-exec-6] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:26.103 [http-nio-8080-exec-6] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:26.103 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:26.278 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:26.279 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:26.282 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:26.285 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:26.285 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:26.285 [http-nio-8080-exec-7] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:26.287 [http-nio-8080-exec-7] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:26.288 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:26.451 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:26.451 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:26.453 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:26.459 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:26.459 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:26.461 [http-nio-8080-exec-4] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:26.464 [http-nio-8080-exec-4] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:26.465 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:26.606 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:26.606 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:26.608 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:26.614 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:26.614 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:26.616 [http-nio-8080-exec-8] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:26.617 [http-nio-8080-exec-8] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:26.617 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:32.136 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:32.137 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:32.139 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:32.143 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:32.143 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:32.144 [http-nio-8080-exec-10] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:32.144 [http-nio-8080-exec-10] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:32.145 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:35.114 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:54:35.114 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:54:35.114 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:54:35.114 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:35.114 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:35.114 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:35.118 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:35.118 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:35.118 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:35.122 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:54:35.122 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:54:35.122 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:54:35.122 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:54:35.122 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:54:35.122 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:54:35.123 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:54:35.123 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:54:35.123 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:54:35.125 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:54:35.125 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:54:35.125 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:54:35.129 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:54:35.133 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:35.133 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:35.141 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:54:35.143 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:35.154 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:54:35.154 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:35.158 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:35.164 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:54:35.164 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:54:35.165 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:54:35.165 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:54:35.167 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:54:35.169 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:54:35.169 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:54:35.185 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:36.163 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 17:54:36.163 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:36.165 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:36.168 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 17:54:36.169 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 17:54:36.171 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 17:54:36.172 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 17:54:36.175 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:36.362 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:54:36.362 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:36.363 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:36.368 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 17:54:36.368 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 17:54:36.383 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:40.814 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-11-03 17:54:40.814 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:40.817 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:40.822 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-11-03 17:54:40.822 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-11-03 17:54:40.823 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:54:40.823 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:54:40.824 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:54:40.825 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:54:40.825 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:54:40.825 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-11-03 17:54:40.836 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:54:40.836 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:54:40.841 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:54:40.847 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:54:40.851 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:54:40.856 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:54:40.862 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:54:40.867 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:54:40.872 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:54:40.879 [http-nio-8080-exec-7] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:54:40.880 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:40.902 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-11-03 17:54:40.902 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-11-03 17:54:40.902 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:40.902 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:40.903 [http-nio-8080-exec-4] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:54:40.903 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-11-03 17:54:40.903 [http-nio-8080-exec-4] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-11-03 17:54:40.903 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:40.903 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-11-03 17:54:40.903 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:40.903 [http-nio-8080-exec-4] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:54:40.905 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-11-03 17:54:40.908 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:40.908 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:40.916 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 17:54:40.916 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-11-03 17:54:40.917 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:54:40.918 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:54:40.920 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:54:40.922 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:54:40.922 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:54:40.923 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-11-03 17:54:40.943 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:54:40.943 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:54:40.949 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:54:40.956 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:54:40.961 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:54:40.967 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:54:40.973 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:54:40.978 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:54:40.984 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:54:40.989 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:54:40.991 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:54:48.721 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:54:48.722 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:54:48.726 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:54:48.729 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:54:48.729 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:54:48.731 [http-nio-8080-exec-10] WARN  [com.yxly.exception.GlobalExceptionHandler] - 参数验证失败：不能为null
2025-11-03 17:54:48.732 [http-nio-8080-exec-10] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.web.bind.MethodArgumentNotValidException: Validation failed for argument [0] in public com.yxly.common.Result<java.lang.Void> com.yxly.controller.user.UserReviewController.submit(com.yxly.dto.request.ReviewCreateRequest): [Field error in object 'reviewCreateRequest' on field 'roomId': rejected value [null]; codes [NotNull.reviewCreateRequest.roomId,NotNull.roomId,NotNull.java.lang.Long,NotNull]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [reviewCreateRequest.roomId,roomId]; arguments []; default message [roomId]]; default message [不能为null]] ]
2025-11-03 17:54:48.732 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:56:12.912 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-11-03 17:56:12.913 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:56:12.916 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:56:12.920 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-11-03 17:56:12.920 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-11-03 17:56:12.921 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:56:12.921 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:56:12.922 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:56:12.923 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:56:12.923 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:56:12.923 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-11-03 17:56:12.933 [http-nio-8080-exec-1] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:56:12.933 [http-nio-8080-exec-1] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:56:12.938 [http-nio-8080-exec-1] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:56:12.943 [http-nio-8080-exec-1] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:56:12.949 [http-nio-8080-exec-1] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:56:12.953 [http-nio-8080-exec-1] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:56:12.957 [http-nio-8080-exec-1] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:56:12.961 [http-nio-8080-exec-1] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:56:12.965 [http-nio-8080-exec-1] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:56:12.970 [http-nio-8080-exec-1] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:56:12.971 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:56:13.056 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-11-03 17:56:13.056 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:56:13.058 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:56:13.060 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 17:56:13.060 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-11-03 17:56:13.061 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:56:13.061 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:56:13.063 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:56:13.064 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:56:13.064 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:56:13.064 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-11-03 17:56:13.071 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:56:13.072 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:56:13.075 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:56:13.079 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:56:13.083 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:56:13.087 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:56:13.090 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:56:13.093 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:56:13.096 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:56:13.101 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:56:13.102 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:56:13.164 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-11-03 17:56:13.164 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:56:13.164 [http-nio-8080-exec-3] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:56:13.164 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-11-03 17:56:13.165 [http-nio-8080-exec-3] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-11-03 17:56:13.165 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:56:13.165 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-11-03 17:56:13.166 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:56:13.166 [http-nio-8080-exec-3] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:56:13.166 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-11-03 17:56:13.167 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:02.394 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-11-03 17:57:02.395 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:02.396 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:02.401 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-11-03 17:57:02.401 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-11-03 17:57:02.401 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:57:02.402 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:57:02.403 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:57:02.404 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:57:02.404 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:57:02.404 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-11-03 17:57:02.414 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:57:02.414 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:57:02.418 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:57:02.423 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:57:02.429 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:57:02.434 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:57:02.439 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:57:02.444 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:57:02.448 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:57:02.453 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:57:02.456 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:02.481 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-11-03 17:57:02.481 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-11-03 17:57:02.481 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:02.481 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:02.482 [http-nio-8080-exec-5] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:57:02.482 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-11-03 17:57:02.482 [http-nio-8080-exec-5] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-11-03 17:57:02.482 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:02.482 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-11-03 17:57:02.483 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:02.483 [http-nio-8080-exec-5] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:57:02.483 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-11-03 17:57:02.483 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:02.493 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:02.496 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 17:57:02.496 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-11-03 17:57:02.496 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:57:02.497 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:57:02.498 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:57:02.500 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:57:02.500 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:57:02.500 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-11-03 17:57:02.510 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:57:02.510 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:57:02.515 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:57:02.520 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:57:02.525 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:57:02.531 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:57:02.537 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:57:02.541 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:57:02.546 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:57:02.551 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:57:02.553 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:10.076 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:57:10.076 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:10.078 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:10.082 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:57:10.082 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:57:10.086 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:57:10.086 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:57:10.087 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:57:10.089 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:57:10.089 [http-nio-8080-exec-7] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:57:10.158 [http-nio-8080-exec-7] ERROR [com.yxly.exception.GlobalExceptionHandler] - 系统异常
org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:236)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:73)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy95.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectList(Unknown Source)
	at com.baomidou.mybatisplus.core.mapper.BaseMapper.selectOne(BaseMapper.java:222)
	at java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:732)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$DefaultMethodInvoker.invoke(MybatisMapperProxy.java:166)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectOne(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.impl.ServiceImpl.getOne(ServiceImpl.java:242)
	at com.yxly.service.impl.RoomReviewServiceImpl.submitReview(RoomReviewServiceImpl.java:50)
	at com.yxly.service.impl.RoomReviewServiceImpl$$FastClassBySpringCGLIB$$4dc73aa2.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.yxly.service.impl.RoomReviewServiceImpl$$EnhancerBySpringCGLIB$$a5b2b489.submitReview(<generated>)
	at com.yxly.controller.user.UserReviewController.submit(UserReviewController.java:31)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:114)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.yxly.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at jdk.internal.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy4/jdk.proxy4.$Proxy140.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80)
	at jdk.internal.reflect.GeneratedMethodAccessor20.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:61)
	at jdk.proxy2/jdk.proxy2.$Proxy138.query(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor.intercept(MybatisPlusInterceptor.java:81)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:59)
	at jdk.proxy2/jdk.proxy2.$Proxy137.query(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at jdk.internal.reflect.GeneratedMethodAccessor147.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 127 common frames omitted
2025-11-03 17:57:10.162 [http-nio-8080-exec-7] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.jdbc.BadSqlGrammarException: <EOL><EOL>### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL><EOL>### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)<EOL><EOL>### The error may involve defaultParameterMap<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)<EOL><EOL>### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL>; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list']
2025-11-03 17:57:10.162 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:11.265 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:57:11.265 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:11.267 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:11.271 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:57:11.271 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:57:11.272 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:57:11.272 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:57:11.272 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:57:11.273 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:57:11.273 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:57:11.282 [http-nio-8080-exec-4] ERROR [com.yxly.exception.GlobalExceptionHandler] - 系统异常
org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:236)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:73)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy95.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectList(Unknown Source)
	at com.baomidou.mybatisplus.core.mapper.BaseMapper.selectOne(BaseMapper.java:222)
	at java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:732)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$DefaultMethodInvoker.invoke(MybatisMapperProxy.java:166)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectOne(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.impl.ServiceImpl.getOne(ServiceImpl.java:242)
	at com.yxly.service.impl.RoomReviewServiceImpl.submitReview(RoomReviewServiceImpl.java:50)
	at com.yxly.service.impl.RoomReviewServiceImpl$$FastClassBySpringCGLIB$$4dc73aa2.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.yxly.service.impl.RoomReviewServiceImpl$$EnhancerBySpringCGLIB$$a5b2b489.submitReview(<generated>)
	at com.yxly.controller.user.UserReviewController.submit(UserReviewController.java:31)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:114)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.yxly.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at jdk.internal.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy4/jdk.proxy4.$Proxy140.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80)
	at jdk.internal.reflect.GeneratedMethodAccessor20.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:61)
	at jdk.proxy2/jdk.proxy2.$Proxy138.query(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor.intercept(MybatisPlusInterceptor.java:81)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:59)
	at jdk.proxy2/jdk.proxy2.$Proxy137.query(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at jdk.internal.reflect.GeneratedMethodAccessor147.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 127 common frames omitted
2025-11-03 17:57:11.285 [http-nio-8080-exec-4] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.jdbc.BadSqlGrammarException: <EOL><EOL>### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL><EOL>### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)<EOL><EOL>### The error may involve defaultParameterMap<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)<EOL><EOL>### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL>; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list']
2025-11-03 17:57:11.285 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:11.813 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:57:11.813 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:11.815 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:11.819 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:57:11.820 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:57:11.820 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:57:11.821 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:57:11.821 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:57:11.822 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:57:11.822 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:57:11.830 [http-nio-8080-exec-8] ERROR [com.yxly.exception.GlobalExceptionHandler] - 系统异常
org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:236)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:73)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy95.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectList(Unknown Source)
	at com.baomidou.mybatisplus.core.mapper.BaseMapper.selectOne(BaseMapper.java:222)
	at java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:732)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$DefaultMethodInvoker.invoke(MybatisMapperProxy.java:166)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectOne(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.impl.ServiceImpl.getOne(ServiceImpl.java:242)
	at com.yxly.service.impl.RoomReviewServiceImpl.submitReview(RoomReviewServiceImpl.java:50)
	at com.yxly.service.impl.RoomReviewServiceImpl$$FastClassBySpringCGLIB$$4dc73aa2.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.yxly.service.impl.RoomReviewServiceImpl$$EnhancerBySpringCGLIB$$a5b2b489.submitReview(<generated>)
	at com.yxly.controller.user.UserReviewController.submit(UserReviewController.java:31)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:114)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.yxly.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at jdk.internal.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy4/jdk.proxy4.$Proxy140.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80)
	at jdk.internal.reflect.GeneratedMethodAccessor20.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:61)
	at jdk.proxy2/jdk.proxy2.$Proxy138.query(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor.intercept(MybatisPlusInterceptor.java:81)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:59)
	at jdk.proxy2/jdk.proxy2.$Proxy137.query(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at jdk.internal.reflect.GeneratedMethodAccessor147.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 127 common frames omitted
2025-11-03 17:57:11.834 [http-nio-8080-exec-8] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.jdbc.BadSqlGrammarException: <EOL><EOL>### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL><EOL>### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)<EOL><EOL>### The error may involve defaultParameterMap<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)<EOL><EOL>### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL>; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list']
2025-11-03 17:57:11.834 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:11.967 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:57:11.968 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:11.970 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:11.974 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:57:11.974 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:57:11.976 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:57:11.976 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:57:11.976 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:57:11.978 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:57:11.978 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:57:11.988 [http-nio-8080-exec-10] ERROR [com.yxly.exception.GlobalExceptionHandler] - 系统异常
org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:236)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:73)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy95.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectList(Unknown Source)
	at com.baomidou.mybatisplus.core.mapper.BaseMapper.selectOne(BaseMapper.java:222)
	at java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:732)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$DefaultMethodInvoker.invoke(MybatisMapperProxy.java:166)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectOne(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.impl.ServiceImpl.getOne(ServiceImpl.java:242)
	at com.yxly.service.impl.RoomReviewServiceImpl.submitReview(RoomReviewServiceImpl.java:50)
	at com.yxly.service.impl.RoomReviewServiceImpl$$FastClassBySpringCGLIB$$4dc73aa2.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.yxly.service.impl.RoomReviewServiceImpl$$EnhancerBySpringCGLIB$$a5b2b489.submitReview(<generated>)
	at com.yxly.controller.user.UserReviewController.submit(UserReviewController.java:31)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:114)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.yxly.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at jdk.internal.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy4/jdk.proxy4.$Proxy140.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80)
	at jdk.internal.reflect.GeneratedMethodAccessor20.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:61)
	at jdk.proxy2/jdk.proxy2.$Proxy138.query(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor.intercept(MybatisPlusInterceptor.java:81)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:59)
	at jdk.proxy2/jdk.proxy2.$Proxy137.query(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at jdk.internal.reflect.GeneratedMethodAccessor147.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 127 common frames omitted
2025-11-03 17:57:11.990 [http-nio-8080-exec-10] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.jdbc.BadSqlGrammarException: <EOL><EOL>### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL><EOL>### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)<EOL><EOL>### The error may involve defaultParameterMap<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)<EOL><EOL>### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL>; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list']
2025-11-03 17:57:11.992 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:12.076 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:57:12.076 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:12.078 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:12.083 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:57:12.083 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:57:12.083 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:57:12.083 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:57:12.084 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:57:12.085 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:57:12.085 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:57:12.094 [http-nio-8080-exec-1] ERROR [com.yxly.exception.GlobalExceptionHandler] - 系统异常
org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:236)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:73)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy95.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectList(Unknown Source)
	at com.baomidou.mybatisplus.core.mapper.BaseMapper.selectOne(BaseMapper.java:222)
	at java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:732)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$DefaultMethodInvoker.invoke(MybatisMapperProxy.java:166)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectOne(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.impl.ServiceImpl.getOne(ServiceImpl.java:242)
	at com.yxly.service.impl.RoomReviewServiceImpl.submitReview(RoomReviewServiceImpl.java:50)
	at com.yxly.service.impl.RoomReviewServiceImpl$$FastClassBySpringCGLIB$$4dc73aa2.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.yxly.service.impl.RoomReviewServiceImpl$$EnhancerBySpringCGLIB$$a5b2b489.submitReview(<generated>)
	at com.yxly.controller.user.UserReviewController.submit(UserReviewController.java:31)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:114)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.yxly.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at jdk.internal.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy4/jdk.proxy4.$Proxy140.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80)
	at jdk.internal.reflect.GeneratedMethodAccessor20.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:61)
	at jdk.proxy2/jdk.proxy2.$Proxy138.query(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor.intercept(MybatisPlusInterceptor.java:81)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:59)
	at jdk.proxy2/jdk.proxy2.$Proxy137.query(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at jdk.internal.reflect.GeneratedMethodAccessor147.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 127 common frames omitted
2025-11-03 17:57:12.098 [http-nio-8080-exec-1] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.jdbc.BadSqlGrammarException: <EOL><EOL>### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL><EOL>### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)<EOL><EOL>### The error may involve defaultParameterMap<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)<EOL><EOL>### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL>; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list']
2025-11-03 17:57:12.098 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:18.839 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closing ...
2025-11-03 17:57:18.843 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closed
2025-11-03 17:57:24.131 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 11300 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 17:57:24.133 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 17:57:24.134 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 17:57:24.172 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 17:57:24.173 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 17:57:24.716 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 17:57:24.718 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 17:57:24.741 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
2025-11-03 17:57:25.371 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 17:57:25.379 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 17:57:25.379 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 17:57:25.449 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 17:57:25.450 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 1277 ms
2025-11-03 17:57:25.524 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 17:57:25.852 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-11-03 17:57:26.168 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 17:57:26.637 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 17:57:26.639 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 17:57:26.639 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 17:57:26.639 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 17:57:26.640 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 17:57:26.640 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 17:57:26.640 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 17:57:26.640 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 17:57:26.640 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 17:57:26.640 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 17:57:26.641 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 17:57:26.641 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 17:57:26.641 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 17:57:26.641 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 17:57:26.641 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 17:57:26.641 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 17:57:26.641 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 17:57:26.642 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 17:57:26.642 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 17:57:26.642 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 17:57:26.642 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 17:57:26.642 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 17:57:26.647 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@378f7140, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3f9e7a74, org.springframework.security.web.context.SecurityContextPersistenceFilter@6fcefb24, org.springframework.security.web.header.HeaderWriterFilter@17ad47c5, org.springframework.web.filter.CorsFilter@40d59803, org.springframework.security.web.authentication.logout.LogoutFilter@55185f0, com.yxly.security.JwtAuthenticationFilter@6bc9396f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7752e923, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5e9c282e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1b693e2c, org.springframework.security.web.session.SessionManagementFilter@7741063e, org.springframework.security.web.access.ExceptionTranslationFilter@7322fc6a, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7f0d39b7]
2025-11-03 17:57:27.302 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 17:57:27.345 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 17:57:27.356 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 3.534 seconds (JVM running for 3.832)
2025-11-03 17:57:35.089 [http-nio-8080-exec-2] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 17:57:35.089 [http-nio-8080-exec-2] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-03 17:57:35.090 [http-nio-8080-exec-2] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 0 ms
2025-11-03 17:57:35.098 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:57:35.101 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:35.144 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:35.237 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:57:35.237 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:57:35.249 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:57:35.253 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:57:35.261 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:57:35.319 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:36.882 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 17:57:36.882 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 17:57:36.882 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 17:57:36.883 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:36.883 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:36.883 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:36.887 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:36.888 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:36.888 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:36.895 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 17:57:36.895 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 17:57:36.895 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 17:57:36.895 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 17:57:36.895 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 17:57:36.896 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 17:57:36.896 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 17:57:36.896 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 17:57:36.897 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 17:57:36.901 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 17:57:36.904 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 17:57:36.907 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:57:36.908 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:36.908 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 17:57:36.924 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:36.983 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 17:57:36.988 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:37.005 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 17:57:37.005 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:37.012 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:37.017 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 17:57:37.018 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 17:57:37.077 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:57:37.077 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:57:37.079 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:57:37.080 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:57:37.080 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:57:37.106 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:38.962 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-11-03 17:57:38.962 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:38.965 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:38.974 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-11-03 17:57:38.974 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-11-03 17:57:38.975 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:57:38.975 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:57:38.976 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:57:38.978 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:57:38.979 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:57:38.981 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-11-03 17:57:38.996 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:57:39.002 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:57:39.008 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:57:39.014 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:57:39.018 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:57:39.023 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:57:39.028 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:57:39.033 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:57:39.036 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:57:39.041 [http-nio-8080-exec-6] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:57:39.046 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:39.086 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-11-03 17:57:39.086 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:39.088 [http-nio-8080-exec-7] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:57:39.088 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-11-03 17:57:39.088 [http-nio-8080-exec-7] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-11-03 17:57:39.088 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:39.090 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-11-03 17:57:39.090 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:39.091 [http-nio-8080-exec-7] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 17:57:39.091 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-11-03 17:57:39.107 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:39.127 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-11-03 17:57:39.127 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:39.129 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:39.132 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 17:57:39.133 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-11-03 17:57:39.133 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:57:39.134 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:57:39.136 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:57:39.136 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:57:39.137 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:57:39.137 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-11-03 17:57:39.149 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 17:57:39.149 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 17:57:39.153 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 17:57:39.160 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 17:57:39.165 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 17:57:39.170 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 17:57:39.173 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 17:57:39.177 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 17:57:39.183 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 17:57:39.188 [http-nio-8080-exec-8] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 17:57:39.192 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 17:57:47.990 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 17:57:47.992 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 17:57:47.994 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 17:57:47.997 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 17:57:47.997 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 17:57:48.008 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 17:57:48.008 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 17:57:48.009 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 17:57:48.010 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 17:57:48.011 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 17:57:48.069 [http-nio-8080-exec-9] ERROR [com.yxly.exception.GlobalExceptionHandler] - 系统异常
org.springframework.jdbc.BadSqlGrammarException: 
### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)
### The error may involve defaultParameterMap
### The error occurred while setting parameters
### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)
### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:236)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:73)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:92)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:439)
	at jdk.proxy2/jdk.proxy2.$Proxy95.selectList(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.selectList(SqlSessionTemplate.java:224)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.executeForMany(MybatisMapperMethod.java:164)
	at com.baomidou.mybatisplus.core.override.MybatisMapperMethod.execute(MybatisMapperMethod.java:77)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$PlainMethodInvoker.invoke(MybatisMapperProxy.java:152)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectList(Unknown Source)
	at com.baomidou.mybatisplus.core.mapper.BaseMapper.selectOne(BaseMapper.java:222)
	at java.base/java.lang.invoke.MethodHandle.invokeWithArguments(MethodHandle.java:732)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy$DefaultMethodInvoker.invoke(MybatisMapperProxy.java:166)
	at com.baomidou.mybatisplus.core.override.MybatisMapperProxy.invoke(MybatisMapperProxy.java:89)
	at jdk.proxy3/jdk.proxy3.$Proxy123.selectOne(Unknown Source)
	at com.baomidou.mybatisplus.extension.service.impl.ServiceImpl.getOne(ServiceImpl.java:242)
	at com.yxly.service.impl.RoomReviewServiceImpl.submitReview(RoomReviewServiceImpl.java:50)
	at com.yxly.service.impl.RoomReviewServiceImpl$$FastClassBySpringCGLIB$$4dc73aa2.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:792)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:762)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:707)
	at com.yxly.service.impl.RoomReviewServiceImpl$$EnhancerBySpringCGLIB$$403b45ed.submitReview(<generated>)
	at com.yxly.controller.user.UserReviewController.submit(UserReviewController.java:31)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at com.alibaba.druid.support.http.WebStatFilter.doFilter(WebStatFilter.java:114)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:337)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)
	at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at com.yxly.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:54)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:112)
	at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:82)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:346)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:221)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:186)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:168)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:342)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:928)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1794)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.base/java.lang.Thread.run(Thread.java:842)
Caused by: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:121)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:916)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:354)
	at com.alibaba.druid.pool.DruidPooledPreparedStatement.execute(DruidPooledPreparedStatement.java:483)
	at jdk.internal.reflect.GeneratedMethodAccessor21.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.logging.jdbc.PreparedStatementLogger.invoke(PreparedStatementLogger.java:58)
	at jdk.proxy4/jdk.proxy4.$Proxy140.execute(Unknown Source)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.query(PreparedStatementHandler.java:65)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.query(RoutingStatementHandler.java:80)
	at jdk.internal.reflect.GeneratedMethodAccessor20.invoke(Unknown Source)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:61)
	at jdk.proxy2/jdk.proxy2.$Proxy138.query(Unknown Source)
	at org.apache.ibatis.executor.SimpleExecutor.doQuery(SimpleExecutor.java:65)
	at org.apache.ibatis.executor.BaseExecutor.queryFromDatabase(BaseExecutor.java:336)
	at org.apache.ibatis.executor.BaseExecutor.query(BaseExecutor.java:158)
	at com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor.intercept(MybatisPlusInterceptor.java:81)
	at org.apache.ibatis.plugin.Plugin.invoke(Plugin.java:59)
	at jdk.proxy2/jdk.proxy2.$Proxy137.query(Unknown Source)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:154)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:147)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.selectList(DefaultSqlSession.java:142)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:425)
	... 127 common frames omitted
2025-11-03 17:57:48.072 [http-nio-8080-exec-9] WARN  [o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver] - Resolved [org.springframework.jdbc.BadSqlGrammarException: <EOL><EOL>### Error querying database.  Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL><EOL>### The error may exist in com/yxly/mapper/RoomReviewMapper.java (best guess)<EOL><EOL>### The error may involve defaultParameterMap<EOL><EOL>### The error occurred while setting parameters<EOL><EOL>### SQL: SELECT  id,room_id,order_id,user_id,rating,content,anonymous,is_append,parent_id,create_time,update_time,deleted  FROM room_review  WHERE deleted=0     AND (order_id = ? AND is_append = ?)<EOL><EOL>### Cause: java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list'<EOL>; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: Unknown column 'is_append' in 'field list']
2025-11-03 17:57:48.074 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:00:55.465 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 2248 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 18:00:55.466 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 18:00:55.466 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 18:00:55.507 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 18:00:55.507 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 18:00:56.045 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 18:00:56.046 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 18:00:56.069 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
2025-11-03 18:00:56.673 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 18:00:56.681 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 18:00:56.681 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 18:00:56.749 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 18:00:56.749 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 1241 ms
2025-11-03 18:00:56.818 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 18:00:57.167 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-11-03 18:00:57.416 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:00:57.840 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 18:00:57.841 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 18:00:57.841 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 18:00:57.842 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 18:00:57.842 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 18:00:57.842 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 18:00:57.842 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 18:00:57.842 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 18:00:57.842 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 18:00:57.842 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 18:00:57.842 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 18:00:57.842 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 18:00:57.844 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 18:00:57.844 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 18:00:57.844 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 18:00:57.844 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 18:00:57.844 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 18:00:57.844 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 18:00:57.844 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 18:00:57.844 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 18:00:57.844 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 18:00:57.844 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 18:00:57.849 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@66cbd317, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1890d836, org.springframework.security.web.context.SecurityContextPersistenceFilter@673d136c, org.springframework.security.web.header.HeaderWriterFilter@2da2ca3a, org.springframework.web.filter.CorsFilter@1a4e350f, org.springframework.security.web.authentication.logout.LogoutFilter@68b249ae, com.yxly.security.JwtAuthenticationFilter@48485fae, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5499e857, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@67d5ba76, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@22daf5b9, org.springframework.security.web.session.SessionManagementFilter@6d80ce0b, org.springframework.security.web.access.ExceptionTranslationFilter@2b730b6d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@273fa737]
2025-11-03 18:00:58.427 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 18:00:58.463 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 18:00:58.471 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 3.293 seconds (JVM running for 3.577)
2025-11-03 18:01:06.562 [http-nio-8080-exec-1] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 18:01:06.562 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-03 18:01:06.563 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-11-03 18:01:06.570 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-11-03 18:01:06.570 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 18:01:06.570 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 18:01:06.573 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:06.573 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:06.573 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:06.615 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:01:06.615 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:01:06.615 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:01:06.713 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-11-03 18:01:06.713 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-11-03 18:01:06.713 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-11-03 18:01:06.713 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 18:01:06.713 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-11-03 18:01:06.713 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 18:01:06.725 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-11-03 18:01:06.725 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-11-03 18:01:06.729 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-11-03 18:01:06.729 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-11-03 18:01:06.729 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-11-03 18:01:06.735 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 0
2025-11-03 18:01:06.741 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-11-03 18:01:06.747 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 0
2025-11-03 18:01:06.755 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:01:06.755 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:01:06.757 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:01:06.759 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-11-03 18:01:06.759 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-11-03 18:01:06.807 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:06.807 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:06.807 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:25.528 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:01:25.528 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:25.530 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:25.535 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:01:25.535 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:01:25.536 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:01:25.540 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:01:25.545 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:01:25.551 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:29.358 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:01:29.358 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:01:29.358 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:01:29.358 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:29.358 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:29.358 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:29.362 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:29.362 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:29.362 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:29.370 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:01:29.370 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:01:29.371 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:01:29.370 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:01:29.371 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:01:29.371 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:01:29.371 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:01:29.371 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:01:29.371 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:01:29.378 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:01:29.378 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:01:29.379 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:01:29.382 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:01:29.385 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:29.400 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:29.463 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:01:29.472 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:29.488 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:01:29.489 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:29.496 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:29.503 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:01:29.504 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:01:29.562 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:01:29.562 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:01:29.564 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:01:29.565 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:01:29.565 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:01:29.589 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:31.714 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=10
2025-11-03 18:01:31.715 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:31.718 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:31.724 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=10] with attributes [authenticated]
2025-11-03 18:01:31.725 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=10
2025-11-03 18:01:31.727 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:01:31.728 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:01:31.729 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:01:31.730 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:01:31.731 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:01:31.733 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=10, status=null
2025-11-03 18:01:31.749 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 18:01:31.754 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 18:01:31.761 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 18:01:31.766 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 18:01:31.772 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 18:01:31.778 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 18:01:31.783 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 18:01:31.790 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 18:01:31.796 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 18:01:31.802 [http-nio-8080-exec-9] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 18:01:31.809 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:31.845 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /placeholder/300/200
2025-11-03 18:01:31.845 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:31.845 [http-nio-8080-exec-10] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 18:01:31.846 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Failed to authorize filter invocation [GET /placeholder/300/200] with attributes [authenticated]
2025-11-03 18:01:31.846 [http-nio-8080-exec-10] DEBUG [o.s.s.w.authentication.Http403ForbiddenEntryPoint] - Pre-authenticated entry point called. Rejecting access
2025-11-03 18:01:31.847 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:31.849 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /error
2025-11-03 18:01:31.849 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:31.849 [http-nio-8080-exec-10] DEBUG [o.s.s.w.a.AnonymousAuthenticationFilter] - Set SecurityContextHolder to anonymous SecurityContext
2025-11-03 18:01:31.849 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /error
2025-11-03 18:01:31.861 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:31.893 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/bookings/my?current=1&size=1000
2025-11-03 18:01:31.893 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:31.896 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:31.902 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/bookings/my?current=1&size=1000] with attributes [authenticated]
2025-11-03 18:01:31.902 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/bookings/my?current=1&size=1000
2025-11-03 18:01:31.904 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:01:31.904 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:01:31.905 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:01:31.906 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:01:31.906 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:01:31.906 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.BookingOrderServiceImpl] - 分页查询用户订单: userId=1, current=1, size=1000, status=null
2025-11-03 18:01:31.922 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 开始转换订单分页数据，共 8 条记录
2025-11-03 18:01:31.922 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=31, orderNo=YX17616683100571238, roomId=7
2025-11-03 18:01:31.928 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=30, orderNo=YX17616675776771335, roomId=4
2025-11-03 18:01:31.937 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=29, orderNo=YX17616572659249697, roomId=7
2025-11-03 18:01:31.945 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=26, orderNo=YX17607009096022310, roomId=1
2025-11-03 18:01:31.952 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=25, orderNo=YX17607007935715752, roomId=1
2025-11-03 18:01:31.959 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=24, orderNo=YX1760700772778945, roomId=1
2025-11-03 18:01:31.965 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=23, orderNo=YX17607001927079386, roomId=1
2025-11-03 18:01:31.976 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 处理订单: id=22, orderNo=YX17607001236074440, roomId=1
2025-11-03 18:01:31.984 [http-nio-8080-exec-2] DEBUG [com.yxly.service.impl.BookingOrderServiceImpl] - 订单分页数据转换完成
2025-11-03 18:01:31.991 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:37.158 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/reviews
2025-11-03 18:01:37.158 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:37.161 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:37.164 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/reviews] with attributes [authenticated]
2025-11-03 18:01:37.164 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/reviews
2025-11-03 18:01:37.175 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:01:37.175 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:01:37.176 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:01:37.178 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:01:37.178 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:01:37.196 [http-nio-8080-exec-3] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始插入填充...
2025-11-03 18:01:37.206 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:41.708 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:01:41.708 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:01:41.708 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:01:41.708 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:41.708 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:41.708 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:41.712 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:41.712 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:41.712 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:41.717 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:01:41.717 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:01:41.717 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:01:41.717 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:01:41.718 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:01:41.718 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:01:41.718 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:01:41.718 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:01:41.718 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:01:41.718 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:01:41.719 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:01:41.719 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:01:41.724 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:01:41.726 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:41.726 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:41.730 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:01:41.731 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:42.024 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:01:42.024 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:42.028 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:42.038 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:01:42.039 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:01:42.040 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:01:42.040 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:01:42.043 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:01:42.045 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:01:42.045 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:01:42.060 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:43.655 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 18:01:43.655 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:43.658 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:43.664 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 18:01:43.664 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 18:01:43.668 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 18:01:43.668 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 18:01:43.671 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:43.818 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 18:01:43.819 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:43.821 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:43.825 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 18:01:43.825 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 18:01:43.839 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:53.138 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:01:53.138 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:01:53.138 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:01:53.138 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:53.138 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:53.138 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:53.141 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:53.141 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:53.141 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:53.145 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:01:53.145 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:01:53.145 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:01:53.145 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:01:53.145 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:01:53.146 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:01:53.146 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:01:53.146 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:01:53.147 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:01:53.147 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:01:53.147 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:01:53.147 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:01:53.151 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:01:53.153 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:53.159 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:53.160 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:01:53.164 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:01:53.454 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:01:53.455 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:01:53.456 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:01:53.462 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:01:53.462 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:01:53.463 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:01:53.463 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:01:53.464 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:01:53.464 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:01:53.464 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:01:53.473 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:02:26.465 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:02:26.466 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:02:26.468 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:02:26.474 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:02:26.474 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:02:26.474 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:02:26.475 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:02:26.479 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:02:26.480 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:02:26.611 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:02:26.611 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:02:26.615 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:02:26.618 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:02:26.618 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:02:26.619 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:02:26.619 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:02:26.624 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:02:26.641 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:02:26.641 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:02:26.645 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:02:26.648 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:02:26.650 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:02:26.650 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:02:26.650 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:02:26.657 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:02:26.658 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:02:26.671 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:02:26.671 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:02:26.675 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:02:26.681 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:02:26.681 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:02:26.682 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:02:26.683 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:02:26.683 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:02:26.684 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:02:26.684 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:02:26.704 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:06:48.440 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:06:48.440 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:06:48.441 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:06:48.441 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:06:48.443 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:06:48.443 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:06:48.456 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:06:48.456 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:06:48.457 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:06:48.457 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:06:48.457 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:06:48.457 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:06:48.457 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:06:48.457 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:06:48.462 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:06:48.464 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:06:48.466 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:06:48.514 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:06:48.514 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:06:48.515 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:06:48.519 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:06:48.520 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:06:48.520 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:06:48.520 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:06:48.526 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:06:48.527 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:06:48.749 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:06:48.749 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:06:48.751 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:06:48.755 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:06:48.755 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:06:48.757 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:06:48.757 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:06:48.758 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:06:48.759 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:06:48.759 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:06:48.766 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:08:45.472 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closing ...
2025-11-03 18:08:45.477 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closed
2025-11-03 18:08:51.820 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 12276 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 18:08:51.821 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 18:08:51.822 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 18:08:51.861 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 18:08:51.861 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 18:08:52.436 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 18:08:52.437 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 18:08:52.459 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
2025-11-03 18:08:53.099 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 18:08:53.107 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 18:08:53.107 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 18:08:53.179 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 18:08:53.179 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 1317 ms
2025-11-03 18:08:53.255 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 18:08:53.635 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-11-03 18:08:53.969 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:08:54.422 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 18:08:54.423 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 18:08:54.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 18:08:54.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 18:08:54.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 18:08:54.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 18:08:54.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 18:08:54.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 18:08:54.424 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 18:08:54.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 18:08:54.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 18:08:54.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 18:08:54.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 18:08:54.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 18:08:54.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 18:08:54.425 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 18:08:54.426 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 18:08:54.426 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 18:08:54.426 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 18:08:54.426 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 18:08:54.426 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 18:08:54.426 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 18:08:54.432 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6ca04419, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@15e9d6fb, org.springframework.security.web.context.SecurityContextPersistenceFilter@405e2f0, org.springframework.security.web.header.HeaderWriterFilter@4cf1061c, org.springframework.web.filter.CorsFilter@2bee33e0, org.springframework.security.web.authentication.logout.LogoutFilter@6fc0c49d, com.yxly.security.JwtAuthenticationFilter@675c8be8, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@311f2d8a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@58a763a4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@612427a7, org.springframework.security.web.session.SessionManagementFilter@693e44e7, org.springframework.security.web.access.ExceptionTranslationFilter@54d14c9b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6890dfbd]
2025-11-03 18:08:55.023 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 18:08:55.061 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 18:08:55.072 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 3.568 seconds (JVM running for 3.871)
2025-11-03 18:09:00.836 [http-nio-8080-exec-1] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 18:09:00.836 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-03 18:09:00.837 [http-nio-8080-exec-1] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-11-03 18:09:00.846 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:09:00.848 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:00.880 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:09:00.880 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:09:00.882 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:00.882 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:00.895 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:00.895 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:00.895 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:00.998 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:09:00.998 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:09:00.998 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:09:00.998 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:09:01.000 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:09:01.000 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:09:01.015 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:09:01.015 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:09:01.021 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:09:01.021 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:09:01.025 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:01.025 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:01.033 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:09:01.110 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:01.110 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:01.113 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:09:01.118 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:09:01.119 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:01.121 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:01.123 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:01.129 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:09:01.129 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:09:01.130 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:09:01.130 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:09:01.136 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:09:01.137 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:01.154 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:09:01.154 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:01.161 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:01.165 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:09:01.165 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:09:01.216 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:09:01.216 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:09:01.217 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:09:01.218 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:09:01.218 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:09:01.242 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:02.443 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:09:02.444 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:02.447 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:02.456 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:09:02.456 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:09:02.457 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:09:02.457 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:09:02.461 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:09:02.464 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:02.680 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:09:02.680 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:09:02.681 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:02.681 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:02.684 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:02.684 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:02.690 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:09:02.690 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:09:02.690 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:09:02.690 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:09:02.690 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:09:02.690 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:09:02.691 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:02.691 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:02.698 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:02.700 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:09:02.703 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:02.714 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:09:02.714 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:02.718 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:02.721 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:09:02.722 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:09:02.722 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:09:02.722 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:09:02.724 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:09:02.726 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:09:02.726 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:09:02.741 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:05.188 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6&locationId=10
2025-11-03 18:09:05.188 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:05.191 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:05.194 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6&locationId=10] with attributes [permitAll]
2025-11-03 18:09:05.194 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6&locationId=10
2025-11-03 18:09:05.195 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=10, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:05.195 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=10, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:05.201 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=0, records=0
2025-11-03 18:09:05.202 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:06.422 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6&locationId=9
2025-11-03 18:09:06.423 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:06.426 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:06.430 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6&locationId=9] with attributes [permitAll]
2025-11-03 18:09:06.430 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6&locationId=9
2025-11-03 18:09:06.431 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=9, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:06.431 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=9, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:06.439 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=2, records=2
2025-11-03 18:09:06.442 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:06.752 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:09:06.752 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:06.756 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:06.759 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:09:06.759 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:09:06.762 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:09:06.762 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:09:06.763 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:09:06.764 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:09:06.764 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:09:06.767 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:07.395 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6&locationId=2
2025-11-03 18:09:07.396 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:07.399 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:07.403 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6&locationId=2] with attributes [permitAll]
2025-11-03 18:09:07.403 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6&locationId=2
2025-11-03 18:09:07.405 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=2, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:07.405 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=2, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:07.413 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=4, records=4
2025-11-03 18:09:07.415 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:07.733 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:09:07.733 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:07.736 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:07.742 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:09:07.742 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:09:07.743 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:09:07.743 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:09:07.744 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:09:07.745 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:09:07.745 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:09:07.753 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:10.263 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:09:10.264 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:10.267 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:10.271 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:09:10.271 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:09:10.271 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:10.272 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:10.283 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:09:10.284 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:10.595 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:09:10.595 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:10.599 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:10.605 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:09:10.605 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:09:10.606 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:09:10.606 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:09:10.608 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:09:10.609 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:09:10.610 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:09:10.624 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:10.978 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6&locationId=10
2025-11-03 18:09:10.979 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:10.981 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:10.986 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6&locationId=10] with attributes [permitAll]
2025-11-03 18:09:10.986 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6&locationId=10
2025-11-03 18:09:10.987 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=10, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:10.987 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=10, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:10.991 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=0, records=0
2025-11-03 18:09:10.992 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:12.536 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6&locationId=9
2025-11-03 18:09:12.537 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:12.539 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:12.543 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6&locationId=9] with attributes [permitAll]
2025-11-03 18:09:12.543 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6&locationId=9
2025-11-03 18:09:12.544 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=9, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:12.544 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=9, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:12.550 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=2, records=2
2025-11-03 18:09:12.552 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:12.799 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:09:12.799 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:12.803 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:12.806 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:09:12.806 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:09:12.808 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:09:12.808 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:09:12.809 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:09:12.809 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:09:12.810 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:09:12.816 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:13.591 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6&locationId=2
2025-11-03 18:09:13.591 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:13.593 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:13.596 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6&locationId=2] with attributes [permitAll]
2025-11-03 18:09:13.596 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6&locationId=2
2025-11-03 18:09:13.598 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=2, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:13.598 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=2, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:13.604 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=4, records=4
2025-11-03 18:09:13.605 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:13.918 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:09:13.919 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:13.922 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:13.928 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:09:13.928 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:09:13.929 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:09:13.929 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:09:13.930 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:09:13.931 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:09:13.931 [http-nio-8080-exec-1] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:09:13.941 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:14.808 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6&locationId=10
2025-11-03 18:09:14.808 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:14.810 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:14.814 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6&locationId=10] with attributes [permitAll]
2025-11-03 18:09:14.814 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6&locationId=10
2025-11-03 18:09:14.815 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=10, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:14.815 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=10, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:14.819 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=0, records=0
2025-11-03 18:09:14.820 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:15.539 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6&locationId=9
2025-11-03 18:09:15.540 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:15.541 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:15.544 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6&locationId=9] with attributes [permitAll]
2025-11-03 18:09:15.544 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6&locationId=9
2025-11-03 18:09:15.544 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=9, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:15.545 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=9, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:15.551 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=2, records=2
2025-11-03 18:09:15.552 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:15.803 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6&locationId=2
2025-11-03 18:09:15.803 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:15.805 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:15.808 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6&locationId=2] with attributes [permitAll]
2025-11-03 18:09:15.808 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6&locationId=2
2025-11-03 18:09:15.809 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=2, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:15.810 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=2, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:15.815 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=4, records=4
2025-11-03 18:09:15.817 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:15.848 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:09:15.848 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:15.851 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:15.857 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:09:15.857 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:09:15.858 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:09:15.859 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:09:15.860 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:09:15.861 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:09:15.861 [http-nio-8080-exec-8] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:09:15.866 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:09:15.866 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:15.868 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:15.870 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:15.875 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:09:15.875 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:09:15.878 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:09:15.878 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:09:15.879 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:09:15.880 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:09:15.880 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:09:15.890 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:35.073 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:09:35.074 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:35.077 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:35.082 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:09:35.082 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:09:35.084 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:35.084 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:35.090 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:09:35.092 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:35.411 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:09:35.413 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:35.414 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:35.417 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:09:35.417 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:09:35.418 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:09:35.418 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:09:35.419 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:09:35.420 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:09:35.420 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:09:35.432 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:39.513 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:09:39.513 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:39.515 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:39.519 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:09:39.519 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:09:39.520 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:09:39.520 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:09:39.523 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:09:39.524 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:39.570 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:09:39.570 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:39.572 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:39.580 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:09:39.580 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:09:39.581 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:09:39.581 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:09:39.593 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:39.649 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:09:39.649 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:39.651 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:39.656 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:09:39.656 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:09:39.656 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:39.656 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:09:39.662 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:09:39.663 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:09:39.679 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:09:39.679 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:09:39.681 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:09:39.691 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:09:39.693 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:09:39.694 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:09:39.694 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:09:39.696 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:09:39.697 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:09:39.698 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:09:39.715 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:11:29.845 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/search?current=1&size=6&roomTypeId=1
2025-11-03 18:11:29.845 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:11:29.847 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:11:29.864 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/search?current=1&size=6&roomTypeId=1] with attributes [permitAll]
2025-11-03 18:11:29.864 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/search?current=1&size=6&roomTypeId=1
2025-11-03 18:11:29.867 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户搜索房间: locationId=null, checkIn=null, checkOut=null, guests=null, roomTypeId=1
2025-11-03 18:11:29.868 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=1, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:11:29.878 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=2, records=2
2025-11-03 18:11:29.880 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:11:30.106 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:11:30.106 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:11:30.109 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:11:30.114 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:11:30.114 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:11:30.115 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:11:30.115 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:11:30.116 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:11:30.117 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:11:30.117 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:11:30.122 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:11:33.321 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/search?current=1&size=6
2025-11-03 18:11:33.321 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:11:33.322 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:11:33.326 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/search?current=1&size=6] with attributes [permitAll]
2025-11-03 18:11:33.326 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/search?current=1&size=6
2025-11-03 18:11:33.327 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户搜索房间: locationId=null, checkIn=null, checkOut=null, guests=null, roomTypeId=null
2025-11-03 18:11:33.327 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:11:33.334 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:11:33.335 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:11:33.646 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:11:33.646 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:11:33.649 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:11:33.652 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:11:33.652 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:11:33.654 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:11:33.654 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:11:33.655 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:11:33.656 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:11:33.656 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:11:33.667 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:11:41.323 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 18:11:41.323 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:11:41.326 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:11:41.330 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 18:11:41.332 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 18:11:41.335 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 18:11:41.335 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 18:11:41.340 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:11:41.460 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 18:11:41.460 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:11:41.462 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:11:41.465 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 18:11:41.465 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 18:11:41.490 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:11:46.089 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:11:46.090 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:11:46.090 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:11:46.090 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:11:46.090 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:11:46.090 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:11:46.092 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:11:46.092 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:11:46.092 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:11:46.101 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:11:46.103 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:11:46.103 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:11:46.103 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:11:46.104 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:11:46.104 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:11:46.104 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:11:46.104 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:11:46.104 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:11:46.105 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:11:46.106 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:11:46.106 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:11:46.109 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:11:46.111 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:11:46.111 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:11:46.117 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:11:46.119 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:11:46.129 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:11:46.129 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:11:46.134 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:11:46.139 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:11:46.139 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:11:46.140 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:11:46.140 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:11:46.142 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:11:46.143 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:11:46.143 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:11:46.156 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:16:09.546 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 18:16:09.547 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:16:09.549 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:16:09.556 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 18:16:09.556 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 18:16:09.558 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 18:16:09.559 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 18:16:09.563 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:16:09.570 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 18:16:09.570 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:16:09.572 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:16:09.576 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 18:16:09.576 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 18:16:09.589 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:16:13.605 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:16:13.606 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:16:13.609 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:16:13.618 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:16:13.618 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:16:13.619 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:16:13.619 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:16:13.627 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:16:13.633 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:16:13.918 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:16:13.918 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:16:13.919 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:16:13.919 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:16:13.922 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:16:13.923 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:16:13.931 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:16:13.931 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:16:13.931 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:16:13.931 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:16:13.931 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:16:13.931 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:16:13.932 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:16:13.932 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:16:13.938 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:16:13.942 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=6, records=6
2025-11-03 18:16:13.943 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:16:13.953 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:16:13.953 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:16:13.955 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:16:13.960 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:16:13.960 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:16:13.962 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:16:13.962 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:16:13.964 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:16:13.964 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:16:13.965 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:16:13.980 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:19:15.889 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-11-03 18:19:15.889 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 18:19:15.889 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 18:19:15.891 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:19:15.891 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:19:15.891 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:19:15.894 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:19:15.894 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:19:15.894 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:19:15.902 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-11-03 18:19:15.902 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-11-03 18:19:15.902 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-11-03 18:19:15.902 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 18:19:15.902 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-11-03 18:19:15.902 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 18:19:15.903 [http-nio-8080-exec-10] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-11-03 18:19:15.903 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-11-03 18:19:15.904 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-11-03 18:19:15.904 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-11-03 18:19:15.908 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 6
2025-11-03 18:19:15.913 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 0
2025-11-03 18:19:15.917 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-11-03 18:19:15.919 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 0
2025-11-03 18:19:15.925 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:19:15.925 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:19:15.926 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:19:15.927 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-11-03 18:19:15.927 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-11-03 18:19:15.932 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:19:15.934 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:19:15.934 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:19:17.700 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 18:19:17.700 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:19:17.700 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:19:17.700 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 18:19:17.701 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:19:17.701 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:19:17.702 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:19:17.702 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:19:17.702 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:19:17.706 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 18:19:17.707 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 18:19:17.707 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 18:19:17.707 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 18:19:17.707 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-11-03 18:19:17.708 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:19:17.723 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 18:19:17.723 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:19:17.723 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 18:19:17.724 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 18:19:17.724 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 18:19:17.724 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:19:17.726 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 18:19:17.730 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:19:17.731 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 18:19:17.733 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:19:17.738 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 18:19:17.742 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 18:19:17.746 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:24:42.949 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 18:24:42.949 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 18:24:42.949 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:24:42.949 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:24:42.949 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:24:42.949 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:24:42.951 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:24:42.951 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:24:42.951 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:24:42.958 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-11-03 18:24:42.958 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 18:24:42.959 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:24:42.959 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 18:24:42.959 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 18:24:42.959 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 18:24:42.963 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 18:24:42.963 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:24:42.963 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 18:24:42.963 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 18:24:42.963 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:24:42.963 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 18:24:42.963 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 18:24:42.967 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 18:24:42.972 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 18:24:42.974 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:24:42.976 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 18:24:42.976 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:24:42.977 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:20.110 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 18:27:20.110 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:20.111 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:20.119 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 18:27:20.121 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 18:27:20.122 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 18:27:20.122 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 18:27:20.122 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 18:27:20.126 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 18:27:20.130 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 18:27:20.133 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 18:27:20.136 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:20.176 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 18:27:20.176 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:20.178 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:20.181 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 18:27:20.181 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 18:27:20.183 [http-nio-8080-exec-10] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 18:27:20.183 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 18:27:20.187 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:20.302 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/7
2025-11-03 18:27:20.302 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:20.303 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:20.308 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/7] with attributes [authenticated]
2025-11-03 18:27:20.308 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/7
2025-11-03 18:27:20.310 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.RoomController] - 查询房间详情: id=7
2025-11-03 18:27:20.310 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 18:27:20.313 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:32.847 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 18:27:32.847 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 18:27:32.847 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:32.847 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:32.850 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:32.850 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:32.856 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 18:27:32.857 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 18:27:32.857 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 18:27:32.858 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 18:27:32.858 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 18:27:32.858 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 18:27:32.859 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 18:27:32.858 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 18:27:32.859 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 18:27:32.863 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 18:27:32.867 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:32.868 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 18:27:32.872 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 18:27:32.873 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:33.152 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:27:33.152 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:33.154 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:33.156 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-11-03 18:27:33.156 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:27:33.158 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:27:33.158 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:27:33.165 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:56.391 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 18:27:56.391 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 18:27:56.391 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/7
2025-11-03 18:27:56.392 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:56.392 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:56.392 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:56.396 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:56.396 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:56.396 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:56.399 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/7] with attributes [authenticated]
2025-11-03 18:27:56.399 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 18:27:56.399 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/7
2025-11-03 18:27:56.399 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 18:27:56.399 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 18:27:56.399 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 18:27:56.400 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 18:27:56.400 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.RoomController] - 查询房间详情: id=7
2025-11-03 18:27:56.400 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 18:27:56.400 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 18:27:56.400 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 18:27:56.400 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 18:27:56.400 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 18:27:56.402 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 18:27:56.403 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:56.404 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:56.407 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 18:27:56.410 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 18:27:56.413 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:58.463 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 18:27:58.463 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 18:27:58.463 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:58.463 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:58.465 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:58.465 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:58.468 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 18:27:58.468 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 18:27:58.469 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 18:27:58.469 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 18:27:58.469 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 18:27:58.469 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 18:27:58.469 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 18:27:58.469 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 18:27:58.472 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 18:27:58.477 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 18:27:58.480 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:58.481 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 18:27:58.486 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 18:27:58.487 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:27:58.771 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:27:58.771 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:27:58.774 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:27:58.778 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-11-03 18:27:58.779 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:27:58.780 [http-nio-8080-exec-10] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:27:58.780 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:27:58.789 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:05.772 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 18:28:05.772 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/7
2025-11-03 18:28:05.772 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 18:28:05.772 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:05.772 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:05.772 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:05.775 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:28:05.775 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:28:05.775 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:28:05.779 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 18:28:05.779 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/7] with attributes [authenticated]
2025-11-03 18:28:05.779 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 18:28:05.779 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 18:28:05.779 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/7
2025-11-03 18:28:05.779 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 18:28:05.780 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 18:28:05.780 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 18:28:05.780 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 18:28:05.780 [http-nio-8080-exec-9] INFO  [com.yxly.controller.admin.RoomController] - 查询房间详情: id=7
2025-11-03 18:28:05.780 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 18:28:05.780 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 18:28:05.780 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 18:28:05.783 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 18:28:05.784 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:05.784 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:05.787 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 18:28:05.790 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 18:28:05.791 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:24.278 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /v1/admin/rooms
2025-11-03 18:28:24.278 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:24.280 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:28:24.284 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /v1/admin/rooms] with attributes [authenticated]
2025-11-03 18:28:24.284 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /v1/admin/rooms
2025-11-03 18:28:24.300 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 创建房间: roomNumber=102
2025-11-03 18:28:24.304 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 创建房间: roomNumber=102
2025-11-03 18:28:24.316 [http-nio-8080-exec-4] DEBUG [com.yxly.config.MyBatisPlusConfig] - 开始插入填充...
2025-11-03 18:28:24.327 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 房间创建成功: id=8, roomNumber=102
2025-11-03 18:28:24.330 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:26.201 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:28:26.201 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 18:28:26.201 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 18:28:26.201 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:26.201 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:26.201 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:26.202 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:28:26.202 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:28:26.203 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:28:26.207 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-11-03 18:28:26.207 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 18:28:26.207 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:28:26.207 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 18:28:26.207 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 18:28:26.207 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 18:28:26.207 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 18:28:26.207 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 18:28:26.208 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:28:26.208 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 18:28:26.208 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:28:26.208 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 18:28:26.208 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 18:28:26.211 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 18:28:26.214 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:26.214 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 18:28:26.216 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:26.217 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 18:28:26.219 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:30.970 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:28:30.970 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:28:30.970 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:28:30.970 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:30.970 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:30.970 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:30.973 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:28:30.973 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:28:30.973 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:28:30.977 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:28:30.977 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:28:30.978 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:28:30.978 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:28:30.978 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:28:30.978 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:28:30.978 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:28:30.978 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:28:30.978 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:28:30.978 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:28:30.979 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:28:30.979 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:28:30.982 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:28:30.984 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:30.988 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 18:28:30.989 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:30.990 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:31.064 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:28:31.064 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:31.068 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:28:31.074 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:28:31.074 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:28:31.077 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:28:31.078 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:28:31.078 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:28:31.080 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:28:31.080 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:28:31.090 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:41.787 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/8
2025-11-03 18:28:41.788 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:41.790 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:28:41.794 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/8] with attributes [permitAll]
2025-11-03 18:28:41.794 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/8
2025-11-03 18:28:41.795 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=8
2025-11-03 18:28:41.796 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=8
2025-11-03 18:28:41.798 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:41.804 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/8?current=1&size=5
2025-11-03 18:28:41.804 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:41.807 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:28:41.810 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/8?current=1&size=5] with attributes [authenticated]
2025-11-03 18:28:41.811 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/8?current=1&size=5
2025-11-03 18:28:41.817 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:48.323 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:28:48.323 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:28:48.323 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:28:48.323 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:48.323 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:48.323 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:48.324 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:28:48.325 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:28:48.325 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:28:48.331 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:28:48.331 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:28:48.331 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:28:48.331 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:28:48.332 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:28:48.332 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:28:48.332 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:28:48.332 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:28:48.333 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:28:48.333 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:28:48.333 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:28:48.333 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:28:48.339 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:28:48.341 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:48.341 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:48.343 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 18:28:48.345 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:28:48.355 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:28:48.355 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:28:48.357 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:28:48.360 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:28:48.360 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:28:48.361 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:28:48.361 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:28:48.363 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:28:48.364 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:28:48.364 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:28:48.372 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:34:02.934 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:34:02.934 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:34:02.934 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:34:02.934 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:34:02.936 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:34:02.936 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:34:02.940 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:34:02.940 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:34:02.940 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:34:02.940 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:34:02.941 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:34:02.941 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:34:02.941 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:34:02.941 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:34:02.944 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:34:02.950 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:34:02.950 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:34:03.029 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:34:03.029 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:34:03.030 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:34:03.033 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:34:03.033 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:34:03.034 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:34:03.034 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:34:03.039 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 18:34:03.040 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:34:03.181 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:34:03.182 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:34:03.183 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:34:03.185 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:34:03.186 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:34:03.187 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:34:03.187 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:34:03.189 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:34:03.190 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:34:03.190 [http-nio-8080-exec-9] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:34:03.197 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:35:00.368 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:35:00.368 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:35:00.369 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:35:00.369 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:35:00.370 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:35:00.370 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:35:00.375 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:35:00.375 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:35:00.375 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:35:00.375 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:35:00.375 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:35:00.375 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:35:00.376 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:35:00.376 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:35:00.384 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:35:00.386 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:35:00.386 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:35:00.591 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:35:00.591 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:35:00.593 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:35:00.595 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:35:00.595 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:35:00.595 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:35:00.595 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:35:00.601 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 18:35:00.601 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:35:00.609 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:35:00.609 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:35:00.611 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:35:00.613 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:35:00.613 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:35:00.614 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:35:00.614 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:35:00.615 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:35:00.617 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:35:00.617 [http-nio-8080-exec-4] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:35:00.624 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:36:05.285 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closing ...
2025-11-03 18:36:05.289 [SpringApplicationShutdownHook] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} closed
2025-11-03 18:36:10.787 [restartedMain] INFO  [com.yxly.YxlyApplication] - Starting YxlyApplication using Java 17.0.12 on LuoRui with PID 5592 (E:\CursorProject\LRminsu\yxly-backend\target\classes started by 罗瑞 in E:\CursorProject\LRminsu\yxly-backend)
2025-11-03 18:36:10.789 [restartedMain] DEBUG [com.yxly.YxlyApplication] - Running with Spring Boot v2.7.18, Spring v5.3.31
2025-11-03 18:36:10.789 [restartedMain] INFO  [com.yxly.YxlyApplication] - The following 1 profile is active: "dev"
2025-11-03 18:36:10.832 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-03 18:36:10.832 [restartedMain] INFO  [o.s.b.d.env.DevToolsPropertyDefaultsPostProcessor] - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-03 18:36:11.412 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-03 18:36:11.415 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-03 18:36:11.441 [restartedMain] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] - Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
2025-11-03 18:36:12.150 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat initialized with port(s): 8080 (http)
2025-11-03 18:36:12.157 [restartedMain] INFO  [org.apache.catalina.core.StandardService] - Starting service [Tomcat]
2025-11-03 18:36:12.158 [restartedMain] INFO  [org.apache.catalina.core.StandardEngine] - Starting Servlet engine: [Apache Tomcat/9.0.83]
2025-11-03 18:36:12.230 [restartedMain] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring embedded WebApplicationContext
2025-11-03 18:36:12.230 [restartedMain] INFO  [o.s.b.w.s.c.ServletWebServerApplicationContext] - Root WebApplicationContext: initialization completed in 1397 ms
2025-11-03 18:36:12.298 [restartedMain] INFO  [c.a.d.s.b.a.DruidDataSourceAutoConfigure] - Init DruidDataSource
2025-11-03 18:36:12.655 [restartedMain] INFO  [com.alibaba.druid.pool.DruidDataSource] - {dataSource-1} inited
2025-11-03 18:36:12.929 [restartedMain] DEBUG [com.yxly.security.JwtAuthenticationFilter] - Filter 'jwtAuthenticationFilter' configured for use
2025-11-03 18:36:13.401 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/auth/**']
2025-11-03 18:36:13.402 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/merchant/register']
2025-11-03 18:36:13.403 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/dev/**']
2025-11-03 18:36:13.403 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v3/api-docs/**']
2025-11-03 18:36:13.403 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui/**']
2025-11-03 18:36:13.403 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/swagger-ui.html']
2025-11-03 18:36:13.404 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/druid/**']
2025-11-03 18:36:13.404 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/actuator/**']
2025-11-03 18:36:13.404 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/error']
2025-11-03 18:36:13.404 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/rooms/**', GET]
2025-11-03 18:36:13.405 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/rooms/types', GET]
2025-11-03 18:36:13.405 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/files/**']
2025-11-03 18:36:13.405 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/upload/**']
2025-11-03 18:36:13.405 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/super-admin/**']
2025-11-03 18:36:13.405 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/recharge/**']
2025-11-03 18:36:13.405 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/withdraw/**']
2025-11-03 18:36:13.406 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/bookings/**']
2025-11-03 18:36:13.406 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/admin/bookings/**']
2025-11-03 18:36:13.406 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [permitAll] for Ant [pattern='/v1/admin/statistics/**']
2025-11-03 18:36:13.406 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/v1/user/**']
2025-11-03 18:36:13.407 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for Ant [pattern='/user/**']
2025-11-03 18:36:13.407 [restartedMain] DEBUG [o.s.s.w.a.e.ExpressionBasedFilterInvocationSecurityMetadataSource] - Adding web access control expression [authenticated] for any request
2025-11-03 18:36:13.411 [restartedMain] INFO  [o.s.security.web.DefaultSecurityFilterChain] - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6f6c57b4, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4fd47e87, org.springframework.security.web.context.SecurityContextPersistenceFilter@434b3d4d, org.springframework.security.web.header.HeaderWriterFilter@300af4fa, org.springframework.web.filter.CorsFilter@5bc6b72a, org.springframework.security.web.authentication.logout.LogoutFilter@45552af, com.yxly.security.JwtAuthenticationFilter@49bddbbd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1232eeb7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@581fe342, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3a374d81, org.springframework.security.web.session.SessionManagementFilter@221b4919, org.springframework.security.web.access.ExceptionTranslationFilter@70fbe5f5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@16474005]
2025-11-03 18:36:14.010 [restartedMain] INFO  [o.s.b.d.autoconfigure.OptionalLiveReloadServer] - LiveReload server is running on port 35729
2025-11-03 18:36:14.045 [restartedMain] INFO  [o.s.boot.web.embedded.tomcat.TomcatWebServer] - Tomcat started on port(s): 8080 (http) with context path '/api'
2025-11-03 18:36:14.055 [restartedMain] INFO  [com.yxly.YxlyApplication] - Started YxlyApplication in 3.589 seconds (JVM running for 3.893)
2025-11-03 18:36:20.447 [http-nio-8080-exec-3] INFO  [o.a.c.c.ContainerBase.[Tomcat].[localhost].[/api]] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-03 18:36:20.447 [http-nio-8080-exec-3] INFO  [org.springframework.web.servlet.DispatcherServlet] - Initializing Servlet 'dispatcherServlet'
2025-11-03 18:36:20.448 [http-nio-8080-exec-3] INFO  [org.springframework.web.servlet.DispatcherServlet] - Completed initialization in 1 ms
2025-11-03 18:36:20.459 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:36:20.462 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:36:20.501 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:36:20.587 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:36:20.587 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:36:20.597 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:36:20.601 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:36:20.610 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:36:20.661 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:36:20.665 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:36:20.666 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:36:20.668 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:36:20.677 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:36:20.677 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:36:20.678 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:36:20.678 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:36:20.684 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:36:20.686 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:36:36.817 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:36:36.817 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:36:36.821 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:36:36.828 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:36:36.828 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:36:36.829 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:36:36.829 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:36:36.838 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:36:36.843 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:36:36.985 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:36:36.985 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:36:36.987 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:36:36.994 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:36:36.995 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:36:36.995 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:36:37.000 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:36:37.020 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:36:37.049 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:36:37.050 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:36:37.053 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:36:37.060 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:36:37.060 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:36:37.072 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:36:37.073 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:36:37.154 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 18:36:37.162 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:36:37.170 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:36:37.170 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:36:37.182 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:36:37.186 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:36:37.187 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:36:37.268 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:36:37.269 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:36:37.272 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:36:37.272 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:36:37.272 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:36:37.312 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:38:22.605 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:38:22.605 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:38:22.605 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:38:22.605 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:38:22.606 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:38:22.606 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:38:22.608 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:38:22.608 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:38:22.609 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:38:22.622 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:38:22.622 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:38:22.623 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:38:22.623 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:38:22.623 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:38:22.623 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:38:22.624 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:38:22.624 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:38:22.625 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:38:22.625 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:38:22.626 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:38:22.626 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:38:22.631 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:38:22.636 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:38:22.638 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:38:22.641 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 18:38:22.643 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:38:22.655 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:38:22.655 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:38:22.659 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:38:22.662 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:38:22.663 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:38:22.664 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:38:22.664 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:38:22.665 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:38:22.666 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:38:22.666 [http-nio-8080-exec-5] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:38:22.680 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:39:26.043 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/8
2025-11-03 18:39:26.044 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:39:26.051 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:39:26.058 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/8] with attributes [permitAll]
2025-11-03 18:39:26.060 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/8
2025-11-03 18:39:26.064 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=8
2025-11-03 18:39:26.064 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=8
2025-11-03 18:39:26.069 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:39:26.077 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/8?current=1&size=5
2025-11-03 18:39:26.077 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:39:26.080 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:39:26.086 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/8?current=1&size=5] with attributes [authenticated]
2025-11-03 18:39:26.086 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/8?current=1&size=5
2025-11-03 18:39:26.109 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:39:30.084 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 18:39:30.084 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 18:39:30.084 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 18:39:30.084 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:39:30.084 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:39:30.084 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:39:30.088 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:39:30.088 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:39:30.089 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:39:30.100 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 18:39:30.100 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 18:39:30.101 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 18:39:30.101 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 18:39:30.101 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 18:39:30.101 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 18:39:30.103 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:39:30.103 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 18:39:30.104 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 18:39:30.104 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 18:39:30.106 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 18:39:30.107 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 18:39:30.109 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 18:39:30.112 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:39:30.120 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 18:39:30.123 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:39:30.124 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:39:30.137 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 18:39:30.137 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:39:30.141 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:39:30.148 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 18:39:30.150 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 18:39:30.150 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:39:30.151 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:39:30.152 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:39:30.153 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 18:39:30.153 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 18:39:30.170 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:39:51.137 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/4
2025-11-03 18:39:51.138 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:39:51.141 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:39:51.144 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/4] with attributes [permitAll]
2025-11-03 18:39:51.144 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/4
2025-11-03 18:39:51.146 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=4
2025-11-03 18:39:51.147 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=4
2025-11-03 18:39:51.152 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:39:51.159 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/4?current=1&size=5
2025-11-03 18:39:51.159 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:39:51.163 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:39:51.167 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/4?current=1&size=5] with attributes [authenticated]
2025-11-03 18:39:51.167 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/4?current=1&size=5
2025-11-03 18:39:51.173 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:40:05.196 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/dashboard
2025-11-03 18:40:05.196 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:40:05.196 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 18:40:05.196 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 18:40:05.197 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:40:05.197 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:40:05.199 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:40:05.199 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:40:05.199 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:40:05.205 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/occupancy-trend?days=7] with attributes [permitAll]
2025-11-03 18:40:05.206 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/revenue-trend?days=7] with attributes [permitAll]
2025-11-03 18:40:05.206 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/statistics/dashboard] with attributes [permitAll]
2025-11-03 18:40:05.206 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/dashboard
2025-11-03 18:40:05.206 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/occupancy-trend?days=7
2025-11-03 18:40:05.206 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/statistics/revenue-trend?days=7
2025-11-03 18:40:05.206 [http-nio-8080-exec-10] INFO  [com.yxly.controller.admin.StatisticsController] - 获取仪表板统计数据
2025-11-03 18:40:05.207 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 开始获取仪表板统计数据
2025-11-03 18:40:05.207 [http-nio-8080-exec-3] INFO  [com.yxly.controller.admin.StatisticsController] - 获取收入趋势: days=7
2025-11-03 18:40:05.207 [http-nio-8080-exec-5] INFO  [com.yxly.controller.admin.StatisticsController] - 获取入住率趋势: days=7
2025-11-03 18:40:05.210 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 房间总数: 7
2025-11-03 18:40:05.214 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日订单数: 0
2025-11-03 18:40:05.217 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 客户总数: 14
2025-11-03 18:40:05.221 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.StatisticsServiceImpl] - 今日收入: 0
2025-11-03 18:40:05.224 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 18:40:05.224 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 18:40:05.225 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 18:40:05.226 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 29
2025-11-03 18:40:05.226 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 29 ===
2025-11-03 18:40:05.231 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:40:05.231 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:40:05.231 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:40:06.868 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 18:40:06.868 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:40:06.868 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 18:40:06.870 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:40:06.870 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:40:06.870 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:40:06.872 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:40:06.872 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:40:06.872 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:40:06.877 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 18:40:06.877 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 18:40:06.877 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 18:40:06.877 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms?current=1&size=10&roomNumber=] with attributes [authenticated]
2025-11-03 18:40:06.877 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 18:40:06.877 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms?current=1&size=10&roomNumber=
2025-11-03 18:40:06.895 [http-nio-8080-exec-4] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 18:40:06.895 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 18:40:06.895 [http-nio-8080-exec-2] INFO  [com.yxly.controller.admin.RoomController] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:40:06.895 [http-nio-8080-exec-1] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 18:40:06.895 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 18:40:06.895 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 分页查询房间列表: current=1, size=10, locationId=null, roomNumber=, roomTypeId=null, status=null, floorNumber=null
2025-11-03 18:40:06.901 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 18:40:06.906 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 18:40:06.907 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:40:06.910 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:40:06.913 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 18:40:06.920 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 18:40:06.923 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:40:20.988 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/locations
2025-11-03 18:40:20.990 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/types
2025-11-03 18:40:20.990 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:40:20.990 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:40:20.992 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:40:20.992 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:40:20.997 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/locations] with attributes [authenticated]
2025-11-03 18:40:20.997 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/types] with attributes [permitAll]
2025-11-03 18:40:20.998 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/types
2025-11-03 18:40:20.998 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/locations
2025-11-03 18:40:20.999 [http-nio-8080-exec-6] INFO  [com.yxly.controller.admin.RoomController] - 查询房型列表
2025-11-03 18:40:20.999 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询启用的房型列表
2025-11-03 18:40:21.000 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.RoomController] - 获取当前管理员的民宿位置列表
2025-11-03 18:40:21.000 [http-nio-8080-exec-8] INFO  [com.yxly.controller.admin.RoomController] - 当前登录用户: XHH
2025-11-03 18:40:21.001 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据用户名获取用户信息: username=XHH
2025-11-03 18:40:21.008 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.MerchantServiceImpl] - 根据管理员用户ID获取商户信息: adminUserId=29
2025-11-03 18:40:21.010 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:40:21.014 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取商户的民宿位置列表: merchantId=1
2025-11-03 18:40:21.018 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 查询到2个民宿位置
2025-11-03 18:40:21.019 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:40:21.216 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/admin/rooms/4
2025-11-03 18:40:21.216 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:40:21.217 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: XHH
2025-11-03 18:40:21.221 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/admin/rooms/4] with attributes [authenticated]
2025-11-03 18:40:21.222 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/admin/rooms/4
2025-11-03 18:40:21.223 [http-nio-8080-exec-7] INFO  [com.yxly.controller.admin.RoomController] - 查询房间详情: id=4
2025-11-03 18:40:21.223 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=4
2025-11-03 18:40:21.227 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:42:48.049 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/4
2025-11-03 18:42:48.049 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:42:48.053 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:42:48.059 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/4] with attributes [permitAll]
2025-11-03 18:42:48.059 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/4
2025-11-03 18:42:48.060 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=4
2025-11-03 18:42:48.061 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=4
2025-11-03 18:42:48.065 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 18:42:48.207 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/4?current=1&size=5
2025-11-03 18:42:48.208 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 18:42:48.210 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 18:42:48.215 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/4?current=1&size=5] with attributes [authenticated]
2025-11-03 18:42:48.215 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/4?current=1&size=5
2025-11-03 18:42:48.231 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:33.535 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/4
2025-11-03 20:27:33.535 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:33.540 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:33.546 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/4] with attributes [permitAll]
2025-11-03 20:27:33.546 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/4
2025-11-03 20:27:33.547 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=4
2025-11-03 20:27:33.548 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=4
2025-11-03 20:27:33.552 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:33.558 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/4?current=1&size=5
2025-11-03 20:27:33.558 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:33.561 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:33.564 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/4?current=1&size=5] with attributes [authenticated]
2025-11-03 20:27:33.564 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/4?current=1&size=5
2025-11-03 20:27:33.574 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:34.865 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 20:27:34.866 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 20:27:34.866 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:34.866 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 20:27:34.866 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:34.866 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:34.869 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:34.870 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:34.870 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:34.873 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 20:27:34.873 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 20:27:34.873 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 20:27:34.873 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 20:27:34.873 [http-nio-8080-exec-2] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 20:27:34.873 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 20:27:34.873 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 20:27:34.873 [http-nio-8080-exec-2] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 20:27:34.873 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 20:27:34.874 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 20:27:34.875 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 20:27:34.875 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 20:27:34.878 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 20:27:34.884 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 20:27:34.884 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:34.886 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:34.888 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:34.897 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 20:27:34.897 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:34.899 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:34.904 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 20:27:34.905 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 20:27:34.910 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 20:27:34.911 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 20:27:34.914 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 20:27:34.915 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 20:27:34.915 [http-nio-8080-exec-6] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 20:27:34.929 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:37.611 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 20:27:37.611 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:37.613 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:37.618 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 20:27:37.620 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 20:27:37.620 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 20:27:37.620 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 20:27:37.624 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 20:27:37.625 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:38.946 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 20:27:38.947 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:38.950 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:38.955 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 20:27:38.957 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 20:27:38.957 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 20:27:38.957 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 20:27:38.961 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 20:27:38.962 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:39.264 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 20:27:39.264 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 20:27:39.265 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:39.265 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:39.266 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:39.267 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:39.270 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 20:27:39.270 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 20:27:39.270 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 20:27:39.270 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 20:27:39.270 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 20:27:39.270 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 20:27:39.270 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 20:27:39.271 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 20:27:39.277 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:39.279 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 20:27:39.280 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:39.289 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 20:27:39.290 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:39.291 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:39.295 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 20:27:39.295 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 20:27:39.296 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 20:27:39.296 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 20:27:39.298 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 20:27:39.301 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 20:27:39.301 [http-nio-8080-exec-10] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 20:27:39.310 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:49.067 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 20:27:49.068 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:49.071 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:49.073 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 20:27:49.073 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 20:27:49.074 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 20:27:49.074 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 20:27:49.077 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:49.082 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 20:27:49.082 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:49.085 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:49.088 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 20:27:49.088 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 20:27:49.097 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:27:59.798 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 20:27:59.798 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:27:59.800 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:27:59.803 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 20:27:59.803 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 20:27:59.805 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 20:27:59.805 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 20:27:59.808 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:28:00.115 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 20:28:00.115 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:28:00.118 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:28:00.121 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 20:28:00.121 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 20:28:00.131 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:36:56.884 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 20:36:56.886 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:36:56.888 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:36:56.891 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 20:36:56.891 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 20:36:56.893 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 20:36:56.893 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 20:36:56.895 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 20:36:56.896 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:36:58.640 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 20:36:58.640 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 20:36:58.641 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:36:58.641 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:36:58.644 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:36:58.644 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:36:58.648 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 20:36:58.648 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 20:36:58.648 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 20:36:58.648 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 20:36:58.650 [http-nio-8080-exec-8] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 20:36:58.650 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 20:36:58.650 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 20:36:58.650 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 20:36:58.652 [http-nio-8080-exec-8] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 20:36:58.654 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:36:58.662 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:36:58.942 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 20:36:58.942 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:36:58.943 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:36:58.947 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 20:36:58.947 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 20:36:58.948 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 20:36:58.948 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 20:36:58.955 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 20:36:58.956 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:36:58.965 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 20:36:58.966 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:36:58.974 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:36:58.984 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 20:36:58.984 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 20:36:58.987 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 20:36:58.988 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 20:36:58.990 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 20:36:58.991 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 20:36:58.991 [http-nio-8080-exec-3] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 20:36:59.004 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:37:00.809 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 20:37:00.809 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:37:00.812 [http-nio-8080-exec-10] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:37:00.815 [http-nio-8080-exec-10] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 20:37:00.815 [http-nio-8080-exec-10] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 20:37:00.816 [http-nio-8080-exec-10] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 20:37:00.816 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 20:37:00.820 [http-nio-8080-exec-10] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 20:37:00.821 [http-nio-8080-exec-10] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:37:01.584 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 20:37:01.584 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 20:37:01.584 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:37:01.584 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:37:01.587 [http-nio-8080-exec-5] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:37:01.587 [http-nio-8080-exec-4] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:37:01.593 [http-nio-8080-exec-5] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 20:37:01.593 [http-nio-8080-exec-4] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 20:37:01.593 [http-nio-8080-exec-5] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 20:37:01.593 [http-nio-8080-exec-4] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 20:37:01.594 [http-nio-8080-exec-5] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 20:37:01.596 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 20:37:01.597 [http-nio-8080-exec-4] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 20:37:01.597 [http-nio-8080-exec-4] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 20:37:01.602 [http-nio-8080-exec-5] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 20:37:01.603 [http-nio-8080-exec-4] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:37:01.603 [http-nio-8080-exec-5] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:37:01.895 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 20:37:01.895 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:37:01.897 [http-nio-8080-exec-1] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:37:01.900 [http-nio-8080-exec-1] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 20:37:01.900 [http-nio-8080-exec-1] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 20:37:01.900 [http-nio-8080-exec-1] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 20:37:01.900 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 20:37:01.906 [http-nio-8080-exec-1] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 20:37:01.906 [http-nio-8080-exec-1] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:37:01.915 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing POST /user/favorites/check-batch
2025-11-03 20:37:01.915 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:37:01.918 [http-nio-8080-exec-2] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:37:01.921 [http-nio-8080-exec-2] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [POST /user/favorites/check-batch] with attributes [authenticated]
2025-11-03 20:37:01.921 [http-nio-8080-exec-2] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured POST /user/favorites/check-batch
2025-11-03 20:37:01.922 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 开始获取当前用户ID ===
2025-11-03 20:37:01.922 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从请求中提取的JWT token: 存在
2025-11-03 20:37:01.923 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - JWT token验证通过
2025-11-03 20:37:01.924 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - 从JWT token中提取的userId: 1
2025-11-03 20:37:01.924 [http-nio-8080-exec-2] INFO  [com.yxly.util.SecurityUtils] - === 从JWT token成功获取userId: 1 ===
2025-11-03 20:37:01.933 [http-nio-8080-exec-2] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:37:05.751 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/7
2025-11-03 20:37:05.752 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:37:05.753 [http-nio-8080-exec-6] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:37:05.759 [http-nio-8080-exec-6] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/7] with attributes [permitAll]
2025-11-03 20:37:05.759 [http-nio-8080-exec-6] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/7
2025-11-03 20:37:05.760 [http-nio-8080-exec-6] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房间详情: id=7
2025-11-03 20:37:05.760 [http-nio-8080-exec-6] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询房间详情: id=7
2025-11-03 20:37:05.762 [http-nio-8080-exec-6] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:37:05.768 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /user/reviews/room/7?current=1&size=5
2025-11-03 20:37:05.768 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:37:05.770 [http-nio-8080-exec-8] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:37:05.774 [http-nio-8080-exec-8] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /user/reviews/room/7?current=1&size=5] with attributes [authenticated]
2025-11-03 20:37:05.774 [http-nio-8080-exec-8] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /user/reviews/room/7?current=1&size=5
2025-11-03 20:37:05.783 [http-nio-8080-exec-8] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:37:13.946 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/location/list
2025-11-03 20:37:13.946 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:37:13.949 [http-nio-8080-exec-7] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:37:13.954 [http-nio-8080-exec-7] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/location/list] with attributes [authenticated]
2025-11-03 20:37:13.954 [http-nio-8080-exec-7] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/location/list
2025-11-03 20:37:13.954 [http-nio-8080-exec-7] INFO  [com.yxly.controller.user.UserLocationController] - 用户查询所有启用的位置列表
2025-11-03 20:37:13.954 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取所有启用的位置列表（用户端）
2025-11-03 20:37:13.957 [http-nio-8080-exec-7] INFO  [com.yxly.service.impl.LocationInfoServiceImpl] - 获取启用位置列表成功: count=3
2025-11-03 20:37:13.960 [http-nio-8080-exec-7] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:37:14.251 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms/types
2025-11-03 20:37:14.251 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Securing GET /v1/rooms?current=1&size=6
2025-11-03 20:37:14.251 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:37:14.251 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Set SecurityContextHolder to empty SecurityContext
2025-11-03 20:37:14.254 [http-nio-8080-exec-9] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:37:14.255 [http-nio-8080-exec-3] DEBUG [com.yxly.security.UserDetailsServiceImpl] - 加载用户信息: LLL
2025-11-03 20:37:14.258 [http-nio-8080-exec-9] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms/types] with attributes [permitAll]
2025-11-03 20:37:14.258 [http-nio-8080-exec-3] DEBUG [o.s.s.w.access.intercept.FilterSecurityInterceptor] - Authorized filter invocation [GET /v1/rooms?current=1&size=6] with attributes [permitAll]
2025-11-03 20:37:14.258 [http-nio-8080-exec-9] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms/types
2025-11-03 20:37:14.258 [http-nio-8080-exec-3] DEBUG [org.springframework.security.web.FilterChainProxy] - Secured GET /v1/rooms?current=1&size=6
2025-11-03 20:37:14.258 [http-nio-8080-exec-9] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询房型列表
2025-11-03 20:37:14.258 [http-nio-8080-exec-9] INFO  [com.yxly.service.impl.RoomServiceImpl] - 查询所有房型列表
2025-11-03 20:37:14.258 [http-nio-8080-exec-3] INFO  [com.yxly.controller.user.UserRoomController] - 用户查询可用房间: current=1, size=6, locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 20:37:14.258 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间: locationId=null, roomTypeId=null, maxGuests=null, minPrice=null, maxPrice=null
2025-11-03 20:37:14.265 [http-nio-8080-exec-9] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
2025-11-03 20:37:14.268 [http-nio-8080-exec-3] INFO  [com.yxly.service.impl.RoomServiceImpl] - 用户查询可用房间完成: total=7, records=6
2025-11-03 20:37:14.270 [http-nio-8080-exec-3] DEBUG [o.s.s.web.context.SecurityContextPersistenceFilter] - Cleared SecurityContextHolder to complete request
