# 项目拆分完成说明

## 📁 新的项目结构

```
LRminsu/
├── yxly-frontend/          # 用户端 (端口 3000)
│   └── 普通用户功能（浏览房间、预订、个人中心）
│
├── yxly-admin-frontend/    # 管理后台 (端口 3001)
│   ├── 民宿管理员功能（/admin/*）
│   └── 超级管理员功能（/super-admin/*）
│
└── yxly-backend/           # 后端服务 (端口 8080)
```

## 🎯 解决的问题

### 之前的问题
- ❌ 无法同时登录管理员和用户账号
- ❌ 两个浏览器标签页共享 Cookies/localStorage
- ❌ 切换账号会导致两边都退出

### 现在的解决方案
- ✅ 用户端和管理后台完全独立
- ✅ 不同端口，独立的 Cookies 和存储
- ✅ 可以同时登录多个账号
- ✅ 符合企业级最佳实践

## 🚀 快速启动

### 方式一：一键启动所有服务

双击运行：
```
start-all.bat
```

将自动启动：
- 用户端：http://localhost:3000
- 管理后台：http://localhost:3001

### 方式二：分别启动

**启动用户端：**
```
start-user.bat
```

**启动管理后台：**
```
start-admin.bat
```

## 📋 功能分布

### 用户端 (localhost:3000)

**路由：**
- `/home` - 首页
- `/rooms` - 房间列表
- `/rooms/:id/book` - 预订房间
- `/user-center` - 个人中心
  - `/user-center/profile` - 个人信息
  - `/user-center/wallet` - 我的钱包
  - `/user-center/orders` - 预订信息
  - `/user-center/favorites` - 我的收藏
  - `/user-center/settings` - 账户设置

**登录入口：**
- 普通用户：`/login`
- 民宿主注册：`/merchant-register`

---

### 管理后台 (localhost:3001)

**民宿管理员路由：** `/admin/*`
- `/admin/dashboard` - 管理仪表盘
- `/admin/customers` - 客户管理
- `/admin/rooms` - 房间管理
- `/admin/bookings` - 订单管理
- `/admin/withdraw-apply` - 提现申请
- `/admin/location` - 位置管理

**超级管理员路由：** `/super-admin/*`
- `/super-admin/merchants` - 商户管理
- `/super-admin/recharge` - 充值管理
- `/super-admin/withdraw` - 提现管理

**登录入口：**
- 管理员：`/login`（同一个登录页，根据角色自动跳转）

## 🔐 权限控制

### 角色代码
- `SUPER_ADMIN` - 超级管理员
- `HOMESTAY_ADMIN` - 民宿管理员
- `USER` - 普通用户

### 访问限制
- 普通用户 → 只能访问用户端
- 民宿管理员 → 只能访问管理后台 `/admin/*`
- 超级管理员 → 只能访问管理后台 `/super-admin/*`

## 📝 测试账号

### 超级管理员
- 前往：http://localhost:3001
- 账号：`superadmin@yxly.com`
- 密码：见数据库或项目文档

### 民宿管理员
- 前往：http://localhost:3001
- 使用已审核通过的民宿主账号

### 普通用户
- 前往：http://localhost:3000
- 使用普通账号（如 LLL）

## 🎨 多账号同时登录示例

1. **Chrome 普通窗口** → 打开 http://localhost:3000 → 登录 LLL 用户
2. **Chrome 另一个标签** → 打开 http://localhost:3001 → 登录超级管理员
3. **两个账号同时在线** ✅

或者：

1. **Chrome** → 打开 http://localhost:3000 → 登录 LLL 用户
2. **无痕窗口** → 打开 http://localhost:3000 → 登录另一个用户
3. **新标签** → 打开 http://localhost:3001 → 登录管理员
4. **三个账号同时在线** ✅

## 📦 安装依赖

### 首次运行管理后台

```bash
cd yxly-admin-frontend
npm install
```

### 首次运行用户端

```bash
cd yxly-frontend
npm install
```

> 提示：使用启动脚本会自动检查并安装依赖

## 🛠️ 开发建议

### 修改管理端代码
- 进入 `yxly-admin-frontend` 目录
- 修改后自动热更新（HMR）

### 修改用户端代码
- 进入 `yxly-frontend` 目录
- 修改后自动热更新（HMR）

### API 修改
- 两个项目都有独立的 API 文件
- 如需共享，建议统一修改后手动同步

## ⚠️ 注意事项

1. **端口占用**：确保 3000 和 3001 端口未被占用
2. **后端服务**：确保 `yxly-backend` 在 8080 端口运行
3. **浏览器缓存**：如遇到问题，清除浏览器缓存
4. **代码同步**：共享代码（API/Utils）修改后需手动同步

## 📚 相关文档

- `yxly-frontend/README.md` - 用户端说明
- `yxly-admin-frontend/README.md` - 管理后台说明
- `超级管理员账号说明.md` - 超管账号信息
- `民宿主管理员注册功能使用说明.md` - 民宿主注册流程

## 🎉 拆分完成

项目已成功拆分为用户端和管理后台两个独立项目，完全解决多账号登录问题！
